(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("mrSG"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.F)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.z)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.E)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.F)(i):i,n+=" "}return n},v=null,m=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,v=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===v&&!0===f.get("logging_enabled")&&b(!0)),v){var n=y.apply(null,t);v(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],Object(i.e)(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));d.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));throw d.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));d.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",T="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===I||e===T)return-1;if(e===I||t===T)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.F)(e))},N=function(t){if("object"!=typeof t||null===t)return Object(o.F)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.F)(e[i]),r+=":",r+=N(t[e[i]]);return r+"}"},k=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var R=function(t){var e,n,r,i,s;Object(o.d)(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){throw C("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},U=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function V(){return new U("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function H(t){return t.pieces_.length-t.pieceNum_}function z(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new U(t.pieces_,e)}function B(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function G(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function W(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Q(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new U(e,0)}function Y(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof U)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new U(n,0)}function K(t){return t.pieceNum_>=t.pieces_.length}function $(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return $(z(t),z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function J(t,e){for(var n=W(t,0),r=W(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function X(t,e){if(H(t)!==H(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Z(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(H(t)>H(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt=function(){return function(t,e){this.errorPrefix_=e,this.parts_=W(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.D)(this.parts_[n]);et(this)}}();function et(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nt(t))}function nt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var rt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,it="websocket",ot="long_polling",st=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function at(t,e,n){var r;if(Object(o.d)("string"==typeof e,"typeof type must == string"),Object(o.d)("object"==typeof n,"typeof params must == object"),e===it)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==ot)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return P(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var ut,ct,lt,ht,ft,dt,pt,gt=function(t,e){var n=yt(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new st(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new U(n.pathString)}},yt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.g)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},vt=/[\[\].#$\/\u0000-\u001F\u007F]/,mt=/[\[\].#$\u0000-\u001F\u007F]/,bt=10485760,_t=function(t){return"string"==typeof t&&0!==t.length&&!vt.test(t)},wt=function(t){return"string"==typeof t&&0!==t.length&&!mt.test(t)},Ot=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},Et=function(t,e,n,r,i){i&&void 0===n||Ct(Object(o.l)(t,e,i),n,r)},Ct=function(t,e,n){var r=n instanceof U?new tt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+nt(r));if("function"==typeof e)throw new Error(t+"contains a function "+nt(r)+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+nt(r));if("string"==typeof e&&e.length>bt/3&&Object(o.D)(e)>bt)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+nt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(P(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!_t(e)))throw new Error(t+" contains an invalid key ("+e+") "+nt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;u=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(u),a.byteLength_+=Object(o.D)(u),et(a),Ct(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=Object(o.D)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+nt(r)+" in addition to actual children.")}},St=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];P(n,function(t,e){var n=new U(t);if(Ct(s,e,Y(r,n)),".priority"===B(n)&&!Ot(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=W(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!_t(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(J);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Z(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},It=function(t,e,n,r){if(!r||void 0!==n){if(S(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ot(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Tt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},xt=function(t,e,n,r){if(!(r&&void 0===n||_t(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},jt=function(t,e,n,r){if(!(r&&void 0===n||wt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},At=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jt(t,e,n,r)},Nt=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},kt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!_t(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wt(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Pt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},Rt=function(t){return"number"==typeof t?"number:"+R(t):"string:"+t},Dt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===ut||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===ut||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Mt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Dt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return ct},set:function(t){ct=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return K(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===H(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(z(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Rt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?R(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Lt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ut=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ft(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Lt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Lt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ut,t}(),qt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ht=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new qt(I,t),r=new qt(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return qt.MIN},t}(),zt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return new qt(T,new Mt("[PRIORITY-POST]",ht))},e.prototype.makePost=function(t,e){var n=lt(t);return new qt(e,new Mt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ht)),Bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return ft},set:function(t){ft=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return new qt(T,ft)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new qt(t,ft)},e.prototype.toString=function(){return".key"},e}(Ht),Gt=new Bt,Wt=Math.log(2),Qt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Wt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Yt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ft(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ft.BLACK):(a(h,Ft.BLACK),a(h,Ft.RED))}return o}(new Qt(t.length));return new Vt(r||e,o)},Kt={},$t=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(Kt&&zt,"ChildrenNode.ts has not been loaded"),dt=dt||new t({".priority":Kt},{".priority":zt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.C)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Gt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(qt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Yt(s,e.getCompare()):Kt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.A)(this.indexes_,function(t,i){var s=Object(o.C)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===Kt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(qt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Yt(a,s.getCompare())}return Kt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new qt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.A)(this.indexes_,function(t){if(t===Kt)return t;var r=n.get(e.name);return r?t.remove(new qt(e.name,r)):t}),this.indexSet_)},t}();function Jt(t,e){return x(t.name,e.name)}function Xt(t,e){return x(t,e)}var Zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Dt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return pt||(pt=new t(new Vt(Xt),null,$t.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||pt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?pt:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(z(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new qt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?pt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.d)(".priority"!==q(t)||1===H(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(z(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(zt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Rt(this.getPriority().val())+":"),this.forEachChild(zt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new qt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new qt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new qt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,qt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,qt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===te?-1:0},t.prototype.withIndex=function(e){if(e===Gt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Gt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(zt),r=e.getIterator(zt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Gt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),te=new(function(t){function e(){return t.call(this,new Vt(Xt),Zt.EMPTY_NODE,$t.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Zt));function ee(t,e){if(void 0===e&&(e=null),null===t)return Zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Mt(t,ee(e));if(t instanceof Array){var n=Zt.EMPTY_NODE;return P(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=ee(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(ee(e))}var r=[],i=!1;if(P(t,function(t,e){if("."!==t.substring(0,1)){var n=ee(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new qt(t,n)))}}),0===r.length)return Zt.EMPTY_NODE;var s=Yt(r,Jt,function(t){return t.name},Xt);if(i){var a=Yt(r,zt.getCompare());return new Zt(s,ee(e),new $t({".priority":a},{".priority":zt}))}return new Zt(s,ee(e),$t.Default)}Object.defineProperties(qt,{MIN:{value:new qt(I,Zt.EMPTY_NODE)},MAX:{value:new qt(T,te)}}),Bt.__EMPTY_NODE=Zt.EMPTY_NODE,Mt.__childrenNodeConstructor=Zt,ut=te,ht=te,lt=ee;var ne=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function re(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var ie,oe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ne.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(K(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new U(e));return new t(V(),n,this.revert)}return Object(o.d)(q(this.path)===e,"operationForChild called for unrelated child."),new t(z(this.path),this.affectedTree,this.revert)},t}(),se=function(){function t(t,e){void 0===e&&(ie||(ie=new Vt(j)),e=ie),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return P(e,function(t,e){n=n.set(new U(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:V(),value:this.value};if(K(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(z(t),e);return null!=i?{path:Y(new U(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(K(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(z(e)):new t(null)},t.prototype.set=function(e,n){if(K(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(z(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(K(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(z(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(K(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(z(t)):null},t.prototype.setTree=function(e,n){if(K(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(z(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(V(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(Y(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,V(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(K(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(z(t),Y(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,V(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(K(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(z(e),Y(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(V(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(Y(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),ae=function(){function t(t,e){this.source=t,this.path=e,this.type=ne.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return K(this.path)?new t(this.source,V()):new t(this.source,z(this.path))},t}(),ue=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ne.OVERWRITE}return t.prototype.operationForChild=function(e){return K(this.path)?new t(this.source,V(),this.snap.getImmediateChild(e)):new t(this.source,z(this.path),this.snap)},t}(),ce=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ne.MERGE}return t.prototype.operationForChild=function(e){if(K(this.path)){var n=this.children.subtree(new U(e));return n.isEmpty()?null:n.value?new ue(this.source,V(),n.value):new t(this.source,V(),n)}return Object(o.d)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,z(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),le=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(K(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),he=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new le(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new le(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}();function fe(t){return{type:"value",snapshotNode:t}}function de(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function pe(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ge(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ye=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(pe(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(de(e,n)):s.trackChildChange(ge(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(zt,function(t,r){e.hasChild(t)||n.trackChildChange(pe(t,r))}),e.isLeafNode()||e.forEachChild(zt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ge(e,r,i))}else n.trackChildChange(de(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ve=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ge(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,pe(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,de(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ge(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),me=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),be=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new le(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),_e=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),we=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.d)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.d)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new ve;if(n.type===ne.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!K(c.path),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===ne.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===ne.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ne.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new _e(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(fe(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(K(e))if(Object(o.d)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Zt?c:Zt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=q(e);if(".priority"===f){Object(o.d)(1===H(e),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var g=z(e),y=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);y=null!=v?s.getNode().getImmediateChild(f).updateChild(g,v):s.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(s.getNode(),f,y,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||K(e),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(K(e))a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=q(e);if(!u.isCompleteForPath(e)&&H(e)>1)return t;var f=z(e),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,me,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||K(e),c.filtersNodes()),g=new be(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new be(r,t,i);if(K(e))a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=q(e);if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=z(e),f=u.getNode().getImmediateChild(l),d=void 0;if(K(h))d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===B(h)&&p.getChild(Q(h)).isEmpty()?p:p.updateChild(h,n):Zt.EMPTY_NODE}if(f.equals(d))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=Y(n,r);t.cacheHasChild_(e,q(l))&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=Y(n,r);t.cacheHasChild_(e,q(l))||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=K(e)?n:new se(null).setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new U(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&void 0===n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new U(e),f,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(K(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(K(e)){var u=new se(null);return a.getNode().forEachChild(Gt,function(t,e){u=u.set(new U(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new se(null);return n.foreach(function(t,n){var r=Y(e,t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||K(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,me,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new be(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(K(e)||".priority"===q(e)){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.d)(h instanceof Zt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=q(e),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,z(e),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Zt.EMPTY_NODE,z(e),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(V()),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Oe=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function Ee(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new qt(e.childName,e.snapshotNode),i=new qt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}var Ce,Se,Ie="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Te=(Ce=0,Se=[],function(t){var e,n=t===Ce;Ce=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=Ie.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===Se[e];e--)Se[e]=0;Se[e]++}else for(e=0;e<12;e++)Se[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=Ie.charAt(Se[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),xe=function(t){if("2147483647"===t)return"-";var e=M(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return T;var o=Ie.charAt(Ie.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},je=function(t){if("-2147483648"===t)return I;var e=M(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Ie.charAt(Ie.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Ae=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return qt.MAX},e.prototype.makePost=function(t,e){var n=ee(t);return new qt(e,n)},e.prototype.toString=function(){return".value"},e}(Ht)),Ne=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!K(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ee(t),r=Zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new qt(e,r)},e.prototype.maxPost=function(){var t=Zt.EMPTY_NODE.updateChild(this.indexPath_,te);return new qt(T,t)},e.prototype.toString=function(){return W(this.indexPath_,0).join("/")},e}(Ht),ke=function(){function t(e){this.indexedFilter_=new ye(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new qt(e,n))||(n=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Zt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Zt.EMPTY_NODE);var i=this;return e.forEachChild(zt,function(t,e){i.matches(new qt(t,e))||(r=r.updateImmediateChild(t,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Pe=function(){function t(t){this.rangedFilter_=new ke(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new qt(e,n))||(n=Zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Zt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Zt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Zt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new qt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ge(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(pe(e,f));var g=u.updateImmediateChild(e,Zt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(de(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(pe(l.name,l.node)),i.trackChildChange(de(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Zt.EMPTY_NODE)):t},t}(),Re=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:T},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===zt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function De(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Me(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Le(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Fe(t,e,n){var r;return t.index_===Gt?("string"==typeof e&&(e=xe(e)),r=Le(t,e,n)):r=Le(t,e,null==n?T:xe(n)),r.startAfterSet_=!0,r}function Ue(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ve(t,e,n){var r;return t.index_===Gt?("string"==typeof e&&(e=je(e)),r=Ue(t,e,n)):r=Ue(t,e,null==n?I:je(n)),r.endBeforeSet_=!0,r}function qe(t,e){var n=t.copy();return n.index_=e,n}function He(t){var e,n={};return t.isDefault()||(t.index_===zt?e="$priority":t.index_===Ae?e="$value":t.index_===Gt?e="$key":(Object(o.d)(t.index_ instanceof Ne,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.F)(e),t.startSet_&&(n.startAt=Object(o.F)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.F)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.F)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.F)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var ze,Be=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new ye(r.getIndex()),o=(n=r).loadsAllData()?new ye(n.getIndex()):n.hasLimit()?new Pe(n):new ke(n);this.processor_=new we(o);var s=e.getServerCache(),a=e.getEventCache(),u=i.updateFullNode(Zt.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(Zt.EMPTY_NODE,a.getNode(),null),l=new le(u,s.isFullyInitialized(),i.filtersNodes()),h=new le(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new he(h,l),this.eventGenerator_=new Oe(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!K(t)&&!e.getImmediateChild(q(t)).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.d)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===ne.MERGE&&null!==t.source.queryId&&(Object(o.d)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.d)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.d)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(zt,function(t,e){n.push(de(t,e))}),e.isFullyInitialized()&&n.push(fe(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Ee(t,i,"child_removed",e,r,n),Ee(t,i,"child_added",e,r,n),Ee(t,i,"child_moved",o,r,n),Ee(t,i,"child_changed",e,r,n),Ee(t,i,"value",e,r,n),i}(this.eventGenerator_,t,e,n?[n]:this.eventRegistrations_)},t}(),Ge=function(){return function(){this.views=new Map}}();function We(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.d)(null!=c,"SyncTree gave us an op for an invalid query."),c.applyOperation(e,n,r)}var l=[];try{for(var h=Object(i.g)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat((c=f.value).applyOperation(e,n,r))}catch(d){s={error:d}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Qe(t,e,n,r,i){var o=e.queryIdentifier(),s=t.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Zt?(a=n.calcCompleteEventChildren(r),u=!1):(a=Zt.EMPTY_NODE,u=!1);var c=new he(new le(a,u,!1),new le(r,i,!1));return new Be(e,c)}return s}function Ye(t){var e,n,r=[];try{for(var o=Object(i.g)(t.views.values()),s=o.next();!s.done;s=o.next()){var a=s.value;a.getQuery().getQueryParams().loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function Ke(t,e){var n,r,o=null;try{for(var s=Object(i.g)(t.views.values()),a=s.next();!a.done;a=s.next())o=o||a.value.getCompleteServerCache(e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function $e(t,e){if(e.getQueryParams().loadsAllData())return Ze(t);var n=e.queryIdentifier();return t.views.get(n)}function Je(t,e){return null!=$e(t,e)}function Xe(t){return null!=Ze(t)}function Ze(t){var e,n;try{for(var r=Object(i.g)(t.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;if(s.getQuery().getQueryParams().loadsAllData())return s}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var tn=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new se(null))},t}();function en(t,e,n){if(K(e))return new tn(new se(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=$(i,e);return o=o.updateChild(s,n),new tn(t.writeTree_.set(i,o))}var a=new se(n),u=t.writeTree_.setTree(e,a);return new tn(u)}function nn(t,e,n){var r=t;return P(n,function(t,n){r=en(r,Y(e,t),n)}),r}function rn(t,e){if(K(e))return tn.empty();var n=t.writeTree_.setTree(e,new se(null));return new tn(n)}function on(t,e){return null!=sn(t,e)}function sn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild($(n.path,e)):null}function an(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(zt,function(t,n){e.push(new qt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new qt(t,n.value))}),e}function un(t,e){if(K(e))return t;var n=sn(t,e);return new tn(null!=n?new se(n):t.writeTree_.subtree(e))}function cn(t){return t.writeTree_.isEmpty()}function ln(t,e){return hn(V(),t.writeTree_,e)}function hn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=hn(Y(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(Y(t,".priority"),r)),n}var fn=function(){function t(){this.visibleWrites_=tn.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new dn(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.d)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=en(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.d)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=nn(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:Z(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=rn(this.visibleWrites_,r.path):P(r.children,function(t){e.visibleWrites_=rn(e.visibleWrites_,Y(r.path,t))}),!0))},t.prototype.getCompleteWriteData=function(t){return sn(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=un(this.visibleWrites_,e);return!i&&cn(o)?n:i||null!=n||on(o,V())?ln(t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Z(t.path,e)||Z(e,t.path))},e),n||Zt.EMPTY_NODE):null}var s=sn(this.visibleWrites_,e);if(null!=s)return s;var a=un(this.visibleWrites_,e);return cn(a)?n:null!=n||on(a,V())?ln(a,n||Zt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Zt.EMPTY_NODE,r=sn(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(zt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=un(this.visibleWrites_,t);return e.forEachChild(zt,function(t,e){var r=ln(un(i,new U(t)),e);n=n.updateImmediateChild(t,r)}),an(i).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return an(un(this.visibleWrites_,t)).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.d)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=Y(t,e);if(on(this.visibleWrites_,i))return null;var s=un(this.visibleWrites_,i);return cn(s)?r.getChild(e):ln(s,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=Y(t,e),i=sn(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?ln(un(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return sn(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=un(this.visibleWrites_,t),u=sn(a,V());if(null!=u)s=u;else{if(null==e)return[];s=ln(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return Z(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Z(Y(t.path,n),e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,V()),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=tn.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Z(n,a)?r=en(r,u=$(n,a),s.snap):Z(a,n)&&(u=$(a,n),r=en(r,V(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(Z(n,a))r=nn(r,u=$(n,a),s.children);else if(Z(a,n))if(K(u=$(a,n)))r=nn(r,V(),s.children);else{var c=Object(o.C)(s.children,q(u));if(c){var l=c.getChild(z(u));r=en(r,V(),l)}}}}}return r},t}(),dn=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(Y(this.treePath_,t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(Y(this.treePath_,e),this.writeTree_)},t}(),pn=1,gn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new se(null),this.pendingWriteTree_=new fn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function yn(t,e,n,r,i){return t.pendingWriteTree_.addOverwrite(e,n,r,i),i?On(t,new ue({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function vn(t,e,n){void 0===n&&(n=!1);var r=t.pendingWriteTree_.getWrite(e);if(t.pendingWriteTree_.removeWrite(e)){var i=new se(null);return null!=r.snap?i=i.set(V(),!0):P(r.children,function(t){i=i.set(new U(t),!0)}),On(t,new oe(r.path,i,n))}return[]}function mn(t,e,n){return On(t,new ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function bn(t,e,n,r){var s=e.path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e.queryIdentifier()||Je(a,e))){var c=function(t,e,n,r){var s,a,u=e.queryIdentifier(),c=[],l=[],h=Xe(t);if("default"===u)try{for(var f=Object(i.g)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,g=Object(i.e)(d.value,2),y=g[0];l=l.concat((p=g[1]).removeEventRegistration(n,r)),p.isEmpty()&&(t.views.delete(y),p.getQuery().getQueryParams().loadsAllData()||c.push(p.getQuery()))}}catch(v){s={error:v}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(p.removeEventRegistration(n,r)),p.isEmpty()&&(t.views.delete(u),p.getQuery().getQueryParams().loadsAllData()||c.push(p.getQuery())));return h&&!Xe(t)&&c.push(new(Object(o.d)(ze,"Reference.ts has not been loaded"),ze)(e.repo,e.path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t.getQueryParams().loadsAllData()}),f=t.syncPointTree_.findOnPath(s,function(t,e){return Xe(e)});if(h&&!f){var d=t.syncPointTree_.subtree(s);if(!d.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Xe(e))return[Ze(e)];var r=[];return e&&(r=Ye(e)),P(n,function(t,e){r=r.concat(e)}),r})}(d),g=0;g<p.length;++g){var y=p[g],v=y.getQuery(),m=Sn(t,y);t.listenProvider_.startListening(Nn(v),In(t,v),m.hashFn,m.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(Nn(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(Tn(e));t.listenProvider_.stopListening(Nn(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=Tn(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function _n(t,e,n){var r=e.path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=$(t,r);i=i||Ke(e,n),s=s||Xe(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Xe(u),i=i||Ke(u,V())):(u=new Ge,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Zt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Ke(e,V());n&&(i=i.updateImmediateChild(t,n))}));var c=Je(u,e);if(!c&&!e.getQueryParams().loadsAllData()){var l=Tn(e);Object(o.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=pn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var s=Qe(t,e,r,i,o);return t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),s),s.addEventRegistration(n),s.getInitialEvents(n)}(u,e,n,t.pendingWriteTree_.childWrites(r),i,a);if(!c&&!s){var d=$e(u,e);f=f.concat(function(t,e,n){var r=e.path,i=In(t,e),s=Sn(t,n),a=t.listenProvider_.startListening(Nn(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.d)(!Xe(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!K(t)&&e&&Xe(e))return[Ze(e).getQuery()];var r=[];return e&&(r=r.concat(Ye(e).map(function(t){return t.getQuery()}))),P(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(Nn(h),In(t,h))}return a}(t,e,d))}return f}function wn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Ke(n,$(t,e));if(r)return r});return r.calcCompleteEventCache(e,i,n,!0)}function On(t,e){return En(e,t.syncPointTree_,null,t.pendingWriteTree_.childWrites(V()))}function En(t,e,n,r){if(K(t.path))return Cn(t,e,n,r);var i=e.get(V());null==n&&null!=i&&(n=Ke(i,V()));var o=[],s=q(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(En(a,u,c,l))}return i&&(o=o.concat(We(i,t,r,n))),o}function Cn(t,e,n,r){var i=e.get(V());null==n&&null!=i&&(n=Ke(i,V()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=r.child(e),u=t.operationForChild(e);u&&(o=o.concat(Cn(u,i,s,a)))}),i&&(o=o.concat(We(i,t,r,n))),o}function Sn(t,e){var n=e.getQuery(),r=In(t,n);return{hashFn:function(){return(e.getServerCache()||Zt.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=xn(t,n);if(r){var i=jn(r),o=i.path,s=i.queryId,a=$(o,e);return An(t,o,new ae(re(s),a))}return[]}(t,n.path,r):function(t,e){return On(t,new ae({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return bn(t,n,null,i)}}}function In(t,e){var n=Tn(e);return t.queryToTagMap.get(n)}function Tn(t){return t.path.toString()+"$"+t.queryIdentifier()}function xn(t,e){return t.tagToQueryMap.get(e)}function jn(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new U(t.substr(0,e))}}function An(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.d)(r,"Missing sync point for query tag that we're tracking"),We(r,n,t.pendingWriteTree_.childWrites(e),null)}function Nn(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var kn=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Pn=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=Y(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return wn(this.syncTree_,this.path_)},t}(),Rn=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Dn(t[".sv"],e,n):"object"==typeof t[".sv"]?Mn(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Dn=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},Mn=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},Ln=function(t,e,n,r){return Un(e,new Pn(n,t),r)},Fn=function(t,e,n){return Un(t,new kn(e),n)};function Un(t,e,n){var r,i=t.getPriority().val(),o=Rn(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Rn(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Mt(a,ee(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Mt(o))),u.forEachChild(zt,function(t,i){var o=Un(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}function Vn(){return{value:null,children:new Map}}function qn(t,e,n){if(K(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=q(e);t.children.has(r)||t.children.set(r,Vn()),qn(t.children.get(r),e=z(e),n)}}function Hn(t,e){if(K(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(zt,function(e,n){qn(t,new U(e),n)}),Hn(t,e)}if(t.children.size>0){var r=q(e);return e=z(e),t.children.has(r)&&Hn(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function zn(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){zn(r,new U(e.toString()+"/"+t),n)})}var Bn=function(){function t(){this.rootNode_=Zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Gn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),Wn={},Qn={};function Yn(t){var e=t.toString();return Wn[e]||(Wn[e]=new Gn),Wn[e]}var Kn=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&P(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),$n=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Kn(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Jn=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Xn(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||X(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Zn(t,e,n){Xn(t,n),er(t,function(t){return X(t,e)})}function tr(t,e,n){Xn(t,n),er(t,function(t){return Z(t,e)||Z(e,t)})}function er(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(nr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function nr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();v&&_("event: "+n.toString()),L(r)}}}var rr=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)([],Object(i.e)(this.listeners_[t])),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ir=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(rr),or=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.t)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(rr),sr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&L(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),ar="start",ur="close",cr=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Yn(e),this.urlFn=function(t){return at(e,ot,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new sr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.v)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new lr(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===ar)n.id=s,n.password=a;else{if(o!==ur)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.v)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=k(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.v)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.F)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),lr=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.v)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.v)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),hr="";function fr(t){hr=t}var dr=null;"undefined"!=typeof MozWebSocket?dr=MozWebSocket:"undefined"!=typeof WebSocket&&(dr=WebSocket);var pr=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Yn(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.v)()&&"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),at(t,it,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.v)()){var r={headers:{"User-Agent":"Firebase/5/"+hr+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new dr(this.connURL,[],r)}else this.mySock=new dr(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==dr&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.z)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=k(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),gr=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[cr,pr]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=pr&&pr.isAvailable(),s=o&&!pr.previouslyFailed();if(e.webSocketOnly&&(o||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[pr];else{var a=this.transports_=[];try{for(var u=Object(i.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),yr=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new gr(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),vr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),mr=1e3,br=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=mr,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.v)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),ir.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&or.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.F)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.C)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.n)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.y)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.F)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(o.F)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=mr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=mr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new yr(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){C(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&C(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.r)(this.interruptReasons_)&&(this.reconnectDelay_=mr,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new U(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.g)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.v)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+hr.replace(/\./g,"-")]=1,Object(o.t)()?t["framework.cordova"]=1:Object(o.w)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=or.getInstance().currentlyOnline();return Object(o.r)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(vr),_r=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=He(t.getQueryParams());this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.C)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=He(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.B)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.z)(u.responseText)}catch(e){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(vr),wr=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.G)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.G)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.G)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.G)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.G)("DataSnapshot.child",0,1,arguments.length),e=String(e),jt("DataSnapshot.child",1,e,!1);var n=new U(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,zt)},t.prototype.hasChild=function(t){Object(o.G)("DataSnapshot.hasChild",1,1,arguments.length),jt("DataSnapshot.hasChild",1,t,!1);var e=new U(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.G)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.G)("DataSnapshot.forEach",1,1,arguments.length),Object(o.H)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),zt))})},t.prototype.hasChildren=function(){return Object(o.G)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.G)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.G)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Or=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function Er(t,e){for(var n=e instanceof U?e:new U(e),r=t,i=q(n);null!==i;){var s=Object(o.C)(r.node.children,i)||{children:{},childCount:0};r=new Or(i,r,s),i=q(n=z(n))}return r}function Cr(t){return t.node.value}function Sr(t,e){t.node.value=e,Ar(t)}function Ir(t){return t.node.childCount>0}function Tr(t,e){P(t.node.children,function(n,r){e(new Or(n,t,r))})}function xr(t,e,n,r){n&&!r&&e(t),Tr(t,function(t){xr(t,e,!0,r)}),n&&r&&e(t)}function jr(t){return new U(null===t.parent?t.name:jr(t.parent)+"/"+t.name)}function Ar(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Cr(t)&&!Ir(t)}(n),i=Object(o.h)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Ar(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Ar(t))}(t.parent,t.name,t)}var Nr="repo_interrupt",kr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Jn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vn(),this.transactionQueueTree_=new Or,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Pr(t){var e=t.infoData_.getNode(new U(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Rr(t){return(e=(e={timestamp:Pr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Dr(t,e,n,r,i){t.dataUpdateCount++;var s=new U(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.A)(n,function(t){return ee(t)});a=function(t,e,n,r){var i=xn(t,r);if(i){var o=jn(i),s=o.path,a=o.queryId,u=$(s,e),c=se.fromObject(n);return An(t,s,new ce(re(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=ee(n);a=function(t,e,n,r){var i=xn(t,r);if(null!=i){var o=jn(i),s=o.path,a=o.queryId,u=$(s,e);return An(t,s,new ue(re(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.A)(n,function(t){return ee(t)});a=function(t,e,n){var r=se.fromObject(n);return On(t,new ce({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=ee(n);a=mn(t.serverSyncTree_,s,h)}var f=s;a.length>0&&(f=ei(t,s)),tr(t.eventQueue_,f,a)}function Mr(t,e){Lr(t,"connected",e),!1===e&&function(t){Kr(t,"onDisconnectEvents");var e=Rr(t),n=Vn();zn(t.onDisconnect_,V(),function(r,i){var o=Ln(r,i,t.serverSyncTree_,e);qn(n,r,o)});var r=[];zn(n,V(),function(e,n){r=r.concat(mn(t.serverSyncTree_,e,n));var i=si(t,e);ei(t,i)}),t.onDisconnect_=Vn(),tr(t.eventQueue_,V(),r)}(t)}function Lr(t,e,n){var r=new U("/.info/"+e),i=ee(n);t.infoData_.updateSnapshot(r,i);var o=mn(t.infoSyncTree_,r,i);tr(t.eventQueue_,r,o)}function Fr(t){return t.nextWriteId_++}function Ur(t,e,n,r,i){Kr(t,"set",{path:e.toString(),value:n,priority:r});var o=Rr(t),s=ee(n,r),a=wn(t.serverSyncTree_,e),u=Fn(s,a,o),c=Fr(t),l=yn(t.serverSyncTree_,e,u,c,!0);Xn(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||C("set at "+e+" failed: "+n);var s=vn(t.serverSyncTree_,c,!o);tr(t.eventQueue_,e,s),$r(0,i,n,r)});var h=si(t,e);ei(t,h),tr(t.eventQueue_,h,[])}function Vr(t,e,n,r){Kr(t,"update",{path:e.toString(),value:n});var i=!0,o=Rr(t),s={};if(P(n,function(n,r){i=!1,s[n]=Ln(Y(e,n),ee(r),t.serverSyncTree_,o)}),i)_("update() called with empty data.  Don't do anything."),$r(0,r,"ok",void 0);else{var a=Fr(t),u=function(t,e,n,r){t.pendingWriteTree_.addMerge(e,n,r);var i=se.fromObject(n);return On(t,new ce({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,s,a);Xn(t.eventQueue_,u),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||C("update at "+e+" failed: "+n);var s=vn(t.serverSyncTree_,a,!o),u=s.length>0?ei(t,e):e;tr(t.eventQueue_,u,s),$r(0,r,n,i)}),P(n,function(n){var r=si(t,Y(e,n));ei(t,r)}),tr(t.eventQueue_,e,[])}}function qr(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Hn(t.onDisconnect_,e),$r(0,n,r,i)})}function Hr(t,e,n,r){var i=ee(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&qn(t.onDisconnect_,e,i),$r(0,r,n,o)})}function zr(t,e,n,r,i){var o=ee(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&qn(t.onDisconnect_,e,o),$r(0,i,n,r)})}function Br(t,e,n,r){if(Object(o.r)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void $r(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&P(n,function(n,r){var i=ee(r);qn(t.onDisconnect_,Y(e,n),i)}),$r(0,r,i,o)})}function Gr(t,e,n){var r;r=".info"===q(e.path)?_n(t.infoSyncTree_,e,n):_n(t.serverSyncTree_,e,n),Zn(t.eventQueue_,e.path,r)}function Wr(t,e,n){var r;r=".info"===q(e.path)?bn(t.infoSyncTree_,e,n):bn(t.serverSyncTree_,e,n),Zn(t.eventQueue_,e.path,r)}function Qr(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Nr)}function Yr(t){t.persistentConnection_&&t.persistentConnection_.resume(Nr)}function Kr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([r],Object(i.e)(e)))}function $r(t,e,n,r){e&&L(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function Jr(t){return t.__database||(t.__database=new Oi(t))}function Xr(t,e,n,r,i){Kr(t,"transaction on "+e);var s=function(){},a=new yi(t,e);a.on("value",s);var u={path:e,update:n,onComplete:r,status:null,order:p(),applyLocally:i,retryCount:0,unwatcher:function(){a.off("value",s)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Zr(t,e,void 0);u.currentInputSnapshot=c;var l=u.update(c.val());if(void 0===l){if(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete){var h=new wr(u.currentInputSnapshot,new yi(t,u.path),zt);u.onComplete(null,!1,h)}}else{Ct("transaction failed: Data returned ",l,u.path),u.status=0;var f=Er(t.transactionQueueTree_,e),d=Cr(f)||[];d.push(u),Sr(f,d);var g=void 0;"object"==typeof l&&null!==l&&Object(o.h)(l,".priority")?(g=Object(o.C)(l,".priority"),Object(o.d)(Ot(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(wn(t.serverSyncTree_,e)||Zt.EMPTY_NODE).getPriority().val();var y=Rr(t),v=ee(l,g),m=Fn(v,c,y);u.currentOutputSnapshotRaw=v,u.currentOutputSnapshotResolved=m,u.currentWriteId=Fr(t);var b=yn(t.serverSyncTree_,e,m,u.currentWriteId,u.applyLocally);tr(t.eventQueue_,e,b),ti(t,t.transactionQueueTree_)}}function Zr(t,e,n){return wn(t.serverSyncTree_,e,n)||Zt.EMPTY_NODE}function ti(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||oi(t,e),Cr(e)){var n=ri(t,e);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=Zr(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=$(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=e;t.server_.put(f.toString(),h,function(r){Kr(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<n.length;s++){if(n[s].status=2,i=i.concat(vn(t.serverSyncTree_,n[s].currentWriteId)),n[s].onComplete){var a=n[s].currentOutputSnapshotResolved,u=new yi(t,n[s].path),c=new wr(a,u,zt);o.push(n[s].onComplete.bind(null,null,!0,c))}n[s].unwatcher()}for(oi(t,Er(t.transactionQueueTree_,e)),ti(t,t.transactionQueueTree_),tr(t.eventQueue_,e,i),s=0;s<o.length;s++)L(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)n[s].status=3===n[s].status?4:0;else for(C("transaction at "+f.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r;ei(t,e)}},a)}(t,jr(e),n)}else Ir(e)&&Tr(e,function(e){ti(t,e)})}function ei(t,e){var n=ni(t,e),r=jr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=0;a<e.length;a++){var u=e[a],c=$(n,u.path),l=!1,h=void 0;if(Object(o.d)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(vn(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(vn(t.serverSyncTree_,u.currentWriteId,!0));else{var f=Zr(t,u.path,s);u.currentInputSnapshot=f;var d=e[a].update(f.val());if(void 0!==d){Ct("transaction failed: Data returned ",d,u.path);var p=ee(d);"object"==typeof d&&null!=d&&Object(o.h)(d,".priority")||(p=p.updatePriority(f.getPriority()));var g=u.currentWriteId,y=Rr(t),v=Fn(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=v,u.currentWriteId=Fr(t),s.splice(s.indexOf(g),1),i=(i=i.concat(yn(t.serverSyncTree_,u.path,v,u.currentWriteId,u.applyLocally))).concat(vn(t.serverSyncTree_,g,!0))}else l=!0,h="nodata",i=i.concat(vn(t.serverSyncTree_,u.currentWriteId,!0))}if(tr(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete))if("nodata"===h){var m=new yi(t,e[a].path),b=new wr(e[a].currentInputSnapshot,m,zt);r.push(e[a].onComplete.bind(null,null,!1,b))}else r.push(e[a].onComplete.bind(null,new Error(h),!1,null))}for(oi(t,t.transactionQueueTree_),a=0;a<r.length;a++)L(r[a]);ti(t,t.transactionQueueTree_)}}(t,ri(t,n),r),r}function ni(t,e){var n,r=t.transactionQueueTree_;for(n=q(e);null!==n&&void 0===Cr(r);)r=Er(r,n),n=q(e=z(e));return r}function ri(t,e){var n=[];return ii(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function ii(t,e,n){var r=Cr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Tr(e,function(e){ii(t,e,n)})}function oi(t,e){var n=Cr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Sr(e,n.length>0?n:void 0)}Tr(e,function(e){oi(t,e)})}function si(t,e){var n=jr(ni(t,e)),r=Er(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){ai(t,e)}),ai(t,r),xr(r,function(e){ai(t,e)}),n}function ai(t,e){var n=Cr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(vn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Sr(e,void 0):n.length=s+1,tr(t.eventQueue_,jr(e),i),a=0;a<r.length;a++)L(r[a])}}var ui,ci=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.G)("OnDisconnect.cancel",0,1,arguments.length),Object(o.H)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return qr(this.repo_,this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.G)("OnDisconnect.remove",0,1,arguments.length),Nt("OnDisconnect.remove",this.path_),Object(o.H)("OnDisconnect.remove",1,t,!0);var e=new o.a;return Hr(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.G)("OnDisconnect.set",1,2,arguments.length),Nt("OnDisconnect.set",this.path_),Et("OnDisconnect.set",1,t,this.path_,!1),Object(o.H)("OnDisconnect.set",2,e,!0);var n=new o.a;return Hr(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.G)("OnDisconnect.setWithPriority",2,3,arguments.length),Nt("OnDisconnect.setWithPriority",this.path_),Et("OnDisconnect.setWithPriority",1,t,this.path_,!1),It("OnDisconnect.setWithPriority",2,e,!1),Object(o.H)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return zr(this.repo_,this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.G)("OnDisconnect.update",1,2,arguments.length),Nt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}St("OnDisconnect.update",1,t,this.path_,!1),Object(o.H)("OnDisconnect.update",2,e,!0);var i=new o.a;return Br(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},t}(),li=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.G)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),hi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.F)(this.snapshot.exportVal())},t}(),fi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),di=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new hi("value",this,new wr(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new fi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),pi=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new fi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new hi(t.type,this,new wr(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),gi=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(ui,"Reference.ts has not been loaded"),ui},set:function(t){ui=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Gt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==T)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===zt){if(null!=e&&!Ot(e)||null!=n&&!Ot(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof Ne||t.getIndex()===Ae,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.G)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.G)("Query.on",2,4,arguments.length),Tt("Query.on",1,e,!1),Object(o.H)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new di(t,e||null,n||null);Gr(this.repo,this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new pi(t,e,n);Gr(this.repo,this,r)},t.prototype.off=function(t,e,n){Object(o.G)("Query.off",0,3,arguments.length),Tt("Query.off",1,t,!0),Object(o.H)("Query.off",2,e,!0),Object(o.I)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new di(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new pi(i,null,n||null));Wr(this.repo,this,r)},t.prototype.get=function(){return null!=(n=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=$(t,n);r=r||Ke(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Ke(i,V()):(i=new Ge,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new le(r,!0,!1):null;return Qe(i,e,t.pendingWriteTree_.childWrites(e.path),o?s.getNode():Zt.EMPTY_NODE,o).getCompleteNode()}((t=this.repo).serverSyncTree_,e=this))?Promise.resolve(new wr(n,e.getRef(),e.getQueryParams().getIndex())):t.server_.get(e).then(function(n){var r=ee(n),i=mn(t.serverSyncTree_,e.path,r);return Zn(t.eventQueue_,e.path,i),Promise.resolve(new wr(r,e.getRef(),e.getQueryParams().getIndex()))},function(n){return Kr(t,"get for query "+Object(o.F)(e)+" failed: "+n),Promise.reject(new Error(n))});var t,e,n},t.prototype.once=function(e,n,r,i){var s=this;Object(o.G)("Query.once",1,4,arguments.length),Tt("Query.once",1,e,!1),Object(o.H)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.G)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,De(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.G)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,Me(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.G)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');jt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new U(e);if(K(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Ne(n),i=qe(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.G)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=qe(this.queryParams_,Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.G)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=qe(this.queryParams_,zt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.G)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=qe(this.queryParams_,Ae);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAt",0,2,arguments.length),Et("Query.startAt",1,e,this.path,!0),xt("Query.startAt",2,n,!0);var r=Le(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAfter",0,2,arguments.length),Et("Query.startAfter",1,e,this.path,!1),xt("Query.startAfter",2,n,!0);var r=Fe(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endAt",0,2,arguments.length),Et("Query.endAt",1,e,this.path,!0),xt("Query.endAt",2,n,!0);var r=Ue(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endBefore",0,2,arguments.length),Et("Query.endBefore",1,e,this.path,!1),xt("Query.endBefore",2,n,!0);var r=Ve(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.G)("Query.equalTo",1,2,arguments.length),Et("Query.equalTo",1,t,this.path,!1),xt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.G)("Query.toString",0,0,arguments.length),this.repo.toString()+G(this.path)},t.prototype.toJSON=function(){return Object(o.G)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==zt&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=N(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.G)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=X(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.H)(t,3,r.cancel,!0),r.context=n,Object(o.I)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),yi=function(t){function e(e,n){if(!(e instanceof kr))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new Re,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.G)("Reference.key",0,0,arguments.length),K(this.path)?null:B(this.path)},e.prototype.child=function(t){return Object(o.G)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof U||(null===q(this.path)?At("Reference.child",1,t,!1):jt("Reference.child",1,t,!1)),new e(this.repo,Y(this.path,t))},e.prototype.getParent=function(){Object(o.G)("Reference.parent",0,0,arguments.length);var t=Q(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.G)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return Jr(this.repo)},e.prototype.set=function(t,e){Object(o.G)("Reference.set",1,2,arguments.length),Nt("Reference.set",this.path),Et("Reference.set",1,t,this.path,!1),Object(o.H)("Reference.set",2,e,!0);var n=new o.a;return Ur(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.G)("Reference.update",1,2,arguments.length),Nt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}St("Reference.update",1,t,this.path,!1),Object(o.H)("Reference.update",2,e,!0);var i=new o.a;return Vr(this.repo,this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.G)("Reference.setWithPriority",2,3,arguments.length),Nt("Reference.setWithPriority",this.path),Et("Reference.setWithPriority",1,t,this.path,!1),It("Reference.setWithPriority",2,e,!1),Object(o.H)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return Ur(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.G)("Reference.remove",0,1,arguments.length),Nt("Reference.remove",this.path),Object(o.H)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.G)("Reference.transaction",1,3,arguments.length),Nt("Reference.transaction",this.path),Object(o.H)("Reference.transaction",1,t,!1),Object(o.H)("Reference.transaction",2,e,!0),Pt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new li(n,i)),"function"==typeof e&&e(t,n,i)};return Xr(this.repo,this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.G)("Reference.setPriority",1,2,arguments.length),Nt("Reference.setPriority",this.path),It("Reference.setPriority",1,t,!1),Object(o.H)("Reference.setPriority",2,e,!0);var n=new o.a;return Ur(this.repo,Y(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.G)("Reference.push",0,2,arguments.length),Nt("Reference.push",this.path),Et("Reference.push",1,t,this.path,!0),Object(o.H)("Reference.push",2,e,!0);var n,r=Pr(this.repo),i=Te(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return Nt("Reference.onDisconnect",this.path),new ci(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(gi);gi.__referenceConstructor=yi,function(t){Object(o.d)(!ze,"__referenceConstructor has already been defined"),ze=t}(yi);var vi=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';C(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),mi=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),bi={},_i=!1;function wi(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=gt(i,r),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=gt(i="http://"+c+"?ns="+u.namespace,r)).repoInfo):s=!a.repoInfo.secure;var l=r&&s?new mi:new vi(t,e);return kt("Invalid Firebase Database URL",1,a),K(a.path)||E("Database URL must point to the root of a Firebase Database (not including a child path)."),Jr(function(t,e,n){var r=Object(o.C)(bi,e.name);r||(bi[e.name]=r={});var i=Object(o.C)(r,t.toURLString());return i&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new kr(t,_i,e,n),r[t.toURLString()]=i,i}(u,t,l))}var Oi=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=Object(o.C)(bi,e.app.name))&&Object(o.C)(n,e.key)===e||E("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),Qr(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof kr||E("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(function(t){if(t.stats_=Yn(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new _r(t.repoInfo_,function(e,n,r,i){Dr(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return Mr(t,!0)},0);else{var e=t.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.F)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new br(t.repoInfo_,t.app.options.appId,function(e,n,r,i){Dr(t,e,n,r,i)},function(e){Mr(t,e)},function(e){!function(t,e){P(e,function(e,n){Lr(t,e,n)})}(t,e)},t.authTokenProvider_,e),t.server_=t.persistentConnection_}var n,r;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(n=function(){return new $n(t.stats_,t.server_)},r=t.repoInfo_.toString(),Qn[r]||(Qn[r]=n()),Qn[r]),t.infoData_=new Bn,t.infoSyncTree_=new gn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=mn(t.infoSyncTree_,e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),Lr(t,"connected",!1),t.serverSyncTree_=new gn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);tr(t.eventQueue_,e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new yi(this.repo_,V())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?E("Cannot call useEmulator() after instance has already been initialized."):function(t,e,n){t.repoInfo_=new st(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new mi)}(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.G)("database.ref",0,1,arguments.length),t instanceof yi?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.G)(e,1,1,arguments.length);var n=gt(t,this.repo_.repoInfo_.nodeAdmin);kt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||E(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&E("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.G)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),Qr(this.repo_)},t.prototype.goOnline=function(){Object(o.G)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),Yr(this.repo_)},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Ei=Object.freeze({__proto__:null,forceLongPolling:function(){pr.forceDisallow(),cr.forceAllow()},forceWebSockets:function(){cr.forceDisallow()},isWebSocketsAvailable:function(){return pr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Kn(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);P(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t.repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t.repo,e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t.repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;fr(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:wi(e,u,n,s),namespace:i}}}),Ci=br;br.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},br.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Si=Object.freeze({__proto__:null,DataConnection:Ci,RealTimeConnection:yr,hijackHash:function(t){var e=br.prototype.put;return br.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){br.prototype.put=e}},ConnectionTarget:st,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){!function(t){_i=t}(t)}}),Ii=Oi.ServerValue;!function(e){fr(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){return wi(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),e,void 0)},"PUBLIC").setServiceProps({Reference:yi,Query:gi,Database:Oi,DataSnapshot:wr,enableLogging:b,INTERNAL:Ei,ServerValue:Ii,TEST_ACCESS:Si}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.5"),Object(o.v)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.0","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return Ke}),n.d(e,"b",function(){return ia}),n.d(e,"c",function(){return Zs}),n.d(e,"d",function(){return Js}),n.d(e,"e",function(){return Xs}),n.d(e,"f",function(){return Ja}),n.d(e,"g",function(){return qa}),n.d(e,"h",function(){return ss}),n.d(e,"i",function(){return ga}),n.d(e,"j",function(){return Po}),n.d(e,"k",function(){return aa}),n.d(e,"l",function(){return Lo}),n.d(e,"m",function(){return sr}),n.d(e,"n",function(){return Rs}),n.d(e,"o",function(){return Ri}),n.d(e,"p",function(){return en}),n.d(e,"q",function(){return Ye}),n.d(e,"r",function(){return Ki}),n.d(e,"s",function(){return ts}),n.d(e,"t",function(){return es}),n.d(e,"u",function(){return sa}),n.d(e,"v",function(){return vs}),n.d(e,"w",function(){return za}),n.d(e,"x",function(){return ys}),n.d(e,"y",function(){return Ma}),n.d(e,"z",function(){return ma}),n.d(e,"A",function(){return nn}),n.d(e,"B",function(){return ra}),n.d(e,"C",function(){return na}),n.d(e,"D",function(){return Uo}),n.d(e,"E",function(){return Fo}),n.d(e,"F",function(){return lr}),n.d(e,"G",function(){return qo}),n.d(e,"H",function(){return er}),n.d(e,"I",function(){return on}),n.d(e,"J",function(){return Wa}),n.d(e,"K",function(){return fs}),n.d(e,"L",function(){return Sa}),n.d(e,"M",function(){return $e}),n.d(e,"N",function(){return zo}),n.d(e,"O",function(){return Ho}),n.d(e,"P",function(){return bs}),n.d(e,"Q",function(){return j}),n.d(e,"R",function(){return La}),n.d(e,"S",function(){return Ra}),n.d(e,"T",function(){return Pa}),n.d(e,"U",function(){return Ka}),n.d(e,"V",function(){return xa}),n.d(e,"W",function(){return oa}),n.d(e,"X",function(){return Mi}),n.d(e,"Y",function(){return To}),n.d(e,"Z",function(){return Zn}),n.d(e,"ab",function(){return Mn}),n.d(e,"bb",function(){return Sn}),n.d(e,"cb",function(){return Tn}),n.d(e,"db",function(){return Nn}),n.d(e,"eb",function(){return jn}),n.d(e,"fb",function(){return xn}),n.d(e,"gb",function(){return An}),n.d(e,"hb",function(){return Eo}),n.d(e,"ib",function(){return Ya}),n.d(e,"jb",function(){return Co}),n.d(e,"kb",function(){return So}),n.d(e,"lb",function(){return In}),n.d(e,"mb",function(){return R}),n.d(e,"nb",function(){return Zi}),n.d(e,"ob",function(){return ho}),n.d(e,"pb",function(){return lo}),n.d(e,"qb",function(){return Oo}),n.d(e,"rb",function(){return Et}),n.d(e,"sb",function(){return c}),n.d(e,"tb",function(){return Cn}),n.d(e,"ub",function(){return yt}),n.d(e,"vb",function(){return Wr}),n.d(e,"wb",function(){return no}),n.d(e,"xb",function(){return Qs}),n.d(e,"yb",function(){return G}),n.d(e,"zb",function(){return X}),n.d(e,"Ab",function(){return p}),n.d(e,"Bb",function(){return g}),n.d(e,"Cb",function(){return K}),n.d(e,"Db",function(){return Z}),n.d(e,"Eb",function(){return io}),n.d(e,"Fb",function(){return co}),n.d(e,"Gb",function(){return uo}),n.d(e,"Hb",function(){return ao}),n.d(e,"Ib",function(){return mo}),n.d(e,"Jb",function(){return gn}),n.d(e,"Kb",function(){return Ge}),n.d(e,"Lb",function(){return $s}),n.d(e,"Mb",function(){return fo}),n.d(e,"Nb",function(){return Ys}),n.d(e,"Ob",function(){return ce}),n.d(e,"Pb",function(){return ue}),n.d(e,"Qb",function(){return oo}),n.d(e,"Rb",function(){return Ws}),n.d(e,"Sb",function(){return nr}),n.d(e,"Tb",function(){return $}),n.d(e,"Ub",function(){return ro}),n.d(e,"Vb",function(){return yo}),n.d(e,"Wb",function(){return vo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(c).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function l(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const h=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return c(this())},t}function d(t){return"function"==typeof(e=t)&&e.hasOwnProperty(h)&&e.__forward_ref__===f?t():t;var e}function p(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function g(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function y(t){return v(t,b)||v(t,w)}function v(t,e){return t.hasOwnProperty(e)?t[e]:null}function m(t){return t&&(t.hasOwnProperty(_)||t.hasOwnProperty(O))?t[_]:null}const b=u({"\u0275prov":u}),_=u({"\u0275inj":u}),w=u({ngInjectableDef:u}),O=u({ngInjectorDef:u});var E=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let C;function S(t){const e=C;return C=t,e}function I(t,e,n){const r=y(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&E.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${c(t)}]`)}function T(t){return{toString:t}.toString()}var x=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),j=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const A="undefined"!=typeof globalThis&&globalThis,N="undefined"!=typeof window&&window,k="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,P="undefined"!=typeof global&&global,R=A||P||N||k,D={},M=[],L=u({"\u0275cmp":u}),F=u({"\u0275dir":u}),U=u({"\u0275pipe":u}),V=u({"\u0275mod":u}),q=u({"\u0275loc":u}),H=u({"\u0275fac":u}),z=u({__NG_ELEMENT_ID__:u});let B=0;function G(t){return T(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===x.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||M,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||j.Emulated,id:"c",styles:t.styles||M,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=B++,n.inputs=J(t.inputs,e),n.outputs=J(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(W):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Q):null,n})}function W(t){return tt(t)||function(t){return t[F]||null}(t)}function Q(t){return function(t){return t[U]||null}(t)}const Y={};function K(t){const e={type:t.type,bootstrap:t.bootstrap||M,declarations:t.declarations||M,imports:t.imports||M,exports:t.exports||M,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&T(()=>{Y[t.id]=t.type}),e}function $(t,e){return T(()=>{const n=et(t,!0);n.declarations=e.declarations||M,n.imports=e.imports||M,n.exports=e.exports||M})}function J(t,e){if(null==t)return D;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const X=G;function Z(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function tt(t){return t[L]||null}function et(t,e){const n=t[V]||null;if(!n&&!0===e)throw new Error(`Type ${c(t)} does not have '\u0275mod' property.`);return n}const nt=20,rt=10;function it(t){return Array.isArray(t)&&"object"==typeof t[1]}function ot(t){return Array.isArray(t)&&!0===t[1]}function st(t){return 0!=(8&t.flags)}function at(t){return 2==(2&t.flags)}function ut(t){return 1==(1&t.flags)}function ct(t){return null!==t.template}function lt(t,e){return t.hasOwnProperty(H)?t[H]:null}class ht extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function ft(t){return"string"==typeof t?t:null==t?"":String(t)}function dt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ft(t)}function pt(t,e){const n=e?" in "+e:"";throw new ht("201",`No provider for ${dt(t)} found${n}`)}class gt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function yt(){return vt}function vt(t){return t.type.prototype.ngOnChanges&&(t.setInput=bt),mt}function mt(){const t=_t(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===D)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function bt(t,e,n,r){const i=_t(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:D,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new gt(u&&u.currentValue,e,s===D),t[r]=e}function _t(t){return t.__ngSimpleChanges__||null}yt.ngInherit=!0;const wt="http://www.w3.org/2000/svg";let Ot=void 0;function Et(t){Ot=t}function Ct(t){return!!t.listen}const St={createRenderer:(t,e)=>void 0!==Ot?Ot:"undefined"!=typeof document?document:void 0};function It(t){for(;Array.isArray(t);)t=t[0];return t}function Tt(t,e){return It(e[t.index])}function xt(t,e){return t.data[e]}function jt(t,e){const n=e[t];return it(n)?n:n[0]}function At(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Nt(t){return 4==(4&t[2])}function kt(t){return 128==(128&t[2])}function Pt(t,e){return null==e?null:t[e]}function Rt(t){t[18]=0}function Dt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Mt={lFrame:ee(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Lt(){return Mt.bindingsEnabled}function Ft(){return Mt.lFrame.lView}function Ut(){return Mt.lFrame.tView}function Vt(){let t=qt();for(;null!==t&&64===t.type;)t=t.parent;return t}function qt(){return Mt.lFrame.currentTNode}function Ht(t,e){const n=Mt.lFrame;n.currentTNode=t,n.isParent=e}function zt(){return Mt.lFrame.isParent}function Bt(){return Mt.isInCheckNoChangesMode}function Gt(t){Mt.isInCheckNoChangesMode=t}function Wt(){return Mt.lFrame.bindingIndex++}function Qt(t,e){const n=Mt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yt(e)}function Yt(t){Mt.lFrame.currentDirectiveIndex=t}function Kt(){return Mt.lFrame.currentQueryIndex}function $t(t){Mt.lFrame.currentQueryIndex=t}function Jt(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Xt(t,e,n){if(n&E.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&E.Host||(r=Jt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Mt.lFrame=te();return r.currentTNode=e,r.lView=t,!0}function Zt(t){const e=te(),n=t[1];Mt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function te(){const t=Mt.lFrame,e=null===t?null:t.child;return null===e?ee(t):e}function ee(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ne(){const t=Mt.lFrame;return Mt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const re=ne;function ie(){const t=ne();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function oe(){return Mt.lFrame.selectedIndex}function se(t){Mt.lFrame.selectedIndex=t}function ae(){const t=Mt.lFrame;return xt(t.tView,t.selectedIndex)}function ue(){Mt.lFrame.currentNamespace=wt}function ce(){Mt.lFrame.currentNamespace=null}function le(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function he(t,e,n){pe(t,e,3,n)}function fe(t,e,n,r){(3&t[2])===n&&pe(t,e,n,r)}function de(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function pe(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ge(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ge(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const ye=-1;class ve{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function me(t,e,n){const r=Ct(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];_e(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function be(t){return 3===t||4===t||6===t}function _e(t){return 64===t.charCodeAt(0)}function we(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Oe(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Oe(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ee(t){return t!==ye}function Ce(t){return 32767&t}function Se(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ie=!0;function Te(t){const e=Ie;return Ie=t,e}let xe=0;function je(t,e){const n=Ne(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ae(r.data,t),Ae(e,null),Ae(r.blueprint,null));const i=ke(t,e),o=t.injectorIndex;if(Ee(i)){const t=Ce(i),n=Se(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ae(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ne(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function ke(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ye;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ye}function Pe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(z)&&(r=n[z]),null==r&&(r=n[z]=xe++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function Re(t,e,n){if(n&E.Optional)return t;pt(e,"NodeInjector")}function De(t,e,n,r){if(n&E.Optional&&void 0===r&&(r=null),0==(n&(E.Self|E.Host))){const i=t[9],o=S(void 0);try{return i?i.get(e,r,n&E.Optional):I(e,r,n&E.Optional)}finally{S(o)}}return Re(r,e,n)}function Me(t,e,n,r=E.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(z)?t[z]:void 0;return"number"==typeof e?e>=0?255&e:Fe:e}(n);if("function"==typeof o){if(!Xt(e,t,r))return r&E.Host?Re(i,n,r):De(e,n,r,i);try{const t=o();if(null!=t||r&E.Optional)return t;pt(n)}finally{re()}}else if("number"==typeof o){let i=null,s=Ne(t,e),a=ye,u=r&E.Host?e[16][6]:null;for((-1===s||r&E.SkipSelf)&&(a=-1===s?ke(t,e):e[s+8],a!==ye&&ze(r,!1)?(i=e[1],s=Ce(a),e=Se(a,e)):s=-1);-1!==s;){const t=e[1];if(He(o,s,t.data)){const t=Ue(s,e,n,i,r,u);if(t!==Le)return t}a=e[s+8],a!==ye&&ze(r,e[1].data[s+8]===u)&&He(o,s,e)?(i=t,s=Ce(a),e=Se(a,e)):s=-1}}}return De(e,n,r,i)}const Le={};function Fe(){return new Be(Vt(),Ft())}function Ue(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ve(a,s,n,null==r?at(a)&&Ie:r!=s&&0!=(3&a.type),i&E.Host&&o===a);return null!==u?qe(e,s,u,a):Le}function Ve(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&ct(t)&&t.type===n)return u}return null}function qe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ve){const s=i;s.resolving&&function(t,e){throw new ht("200","Circular dependency in DI detected for "+t)}(dt(o[n]));const a=Te(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?S(s.injectImpl):null;Xt(t,r,E.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=vt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&S(u),Te(a),s.resolving=!1,re()}}return i}function He(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function ze(t,e){return!(t&E.Self||t&E.Host&&e)}class Be{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Me(this._tNode,this._lView,t,void 0,e)}}function Ge(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(be(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Vt(),t)}const We="__parameters__";function Qe(t,e,n){return T(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(We)?t[We]:Object.defineProperty(t,We,{value:[]})[We];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ye{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=p({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const Ke=new Ye("AnalyzeForEntryComponents"),$e=Function;function Je(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Je(r,e)):e!==t&&e.push(r)}return e}function Xe(t,e){t.forEach(t=>Array.isArray(t)?Xe(t,e):e(t))}function Ze(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function tn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const en=Qe("Inject",t=>({token:t})),nn=Qe("Optional"),rn=Qe("Self"),on=Qe("SkipSelf"),sn=Qe("Host"),an={},un=/\n/gm,cn="__source",ln=u({provide:String,useValue:u});let hn,fn=void 0;function dn(t){const e=fn;return fn=t,e}function pn(t,e=E.Default){if(void 0===fn)throw new Error("inject() must be called from an injection context");return null===fn?I(t,void 0,e):fn.get(t,e&E.Optional?null:void 0,e)}function gn(t,e=E.Default){return(C||pn)(d(t),e)}function yn(t){const e=[];for(let n=0;n<t.length;n++){const r=d(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=E.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof nn||"Optional"===i.ngMetadataName||i===nn?n|=E.Optional:i instanceof on||"SkipSelf"===i.ngMetadataName||i===on?n|=E.SkipSelf:i instanceof rn||"Self"===i.ngMetadataName||i===rn?n|=E.Self:i instanceof sn||"Host"===i.ngMetadataName||i===sn?n|=E.Host:t=i instanceof en||i===en?i.token:i}e.push(gn(t,n))}else e.push(gn(r))}return e}function vn(t){var e;return(null===(e=function(){if(void 0===hn&&(hn=null,R.trustedTypes))try{hn=R.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return hn}())||void 0===e?void 0:e.createHTML(t))||t}class mn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see https://g.co/ng/security#xss)"}}class bn extends mn{getTypeName(){return"HTML"}}class _n extends mn{getTypeName(){return"Style"}}class wn extends mn{getTypeName(){return"Script"}}class On extends mn{getTypeName(){return"URL"}}class En extends mn{getTypeName(){return"ResourceURL"}}function Cn(t){return t instanceof mn?t.changingThisBreaksApplicationSecurity:t}function Sn(t,e){const n=In(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function In(t){return t instanceof mn&&t.getTypeName()||null}function Tn(t){return new bn(t)}function xn(t){return new _n(t)}function jn(t){return new wn(t)}function An(t){return new On(t)}function Nn(t){return new En(t)}class kn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(vn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Pn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=vn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=vn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Rn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Dn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Mn(t){return(t=String(t)).match(Rn)||t.match(Dn)?t:"unsafe:"+t}function Ln(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Fn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Un=Ln("area,br,col,hr,img,wbr"),Vn=Ln("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),qn=Ln("rp,rt"),Hn=Fn(qn,Vn),zn=Fn(Un,Fn(Vn,Ln("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fn(qn,Ln("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Hn),Bn=Ln("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Gn=Ln("srcset"),Wn=Fn(Bn,Gn,Ln("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ln("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Qn=Ln("script,style,template");class Yn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!zn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Qn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Wn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Bn[o]&&(s=Mn(s)),Gn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Mn(t.trim())).join(", ")),this.buf.push(" ",e,'="',Jn(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();zn.hasOwnProperty(e)&&!Un.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Jn(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const Kn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$n=/([^\#-~ |!])/g;function Jn(t){return t.replace(/&/g,"&amp;").replace(Kn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace($n,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xn;function Zn(t,e){let n=null;try{Xn=Xn||function(t){const e=new Pn(t);return function(){try{return!!(new window.DOMParser).parseFromString(vn(""),"text/html")}catch(t){return!1}}()?new kn(e):e}(t);let r=e?String(e):"";n=Xn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Xn.getInertBodyElement(r)}while(r!==o);return(new Yn).sanitizeChildren(tr(n)||n)}finally{if(n){const t=tr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function tr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var er=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function nr(t){const e=function(){const t=Ft();return t&&t[12]}();return e?e.sanitize(er.URL,t)||"":Sn(t,"URL")?Cn(t):Mn(ft(t))}function rr(t){return t.ngDebugContext}function ir(t){return t.ngOriginalError}function or(t,...e){t.error(...e)}class sr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||or}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?rr(t)?rr(t):this._findContext(ir(t)):null}_findOriginalError(t){let e=ir(t);for(;e&&ir(e);)e=ir(e);return e}}function ar(t,e){t.__ngContext__=e}const ur=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(R))();function cr(t){return t instanceof Function?t():t}var lr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function hr(t,e){return(void 0)(t,e)}function fr(t){const e=t[3];return ot(e)?e[3]:e}function dr(t){return gr(t[13])}function pr(t){return gr(t[4])}function gr(t){for(;null!==t&&!ot(t);)t=t[4];return t}function yr(t,e,n,r,i){if(null!=r){let o,s=!1;ot(r)?o=r:it(r)&&(s=!0,r=r[0]);const a=It(r);0===t&&null!==n?null==i?Er(e,n,a):Or(e,n,a,i||null,!0):1===t&&null!==n?Or(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Sr(t,e);r&&function(t,e,n,r){Ct(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==It(n)&&yr(e,t,r,o,i);for(let s=rt;s<n.length;s++){const i=n[s];Ar(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function vr(t,e,n){return Ct(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function mr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Dt(i,-1)),n.splice(r,1)}function br(t,e){if(t.length<=rt)return;const n=rt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&mr(o,r),e>0&&(t[n-1][4]=r[4]);const s=tn(t,rt+e);Ar(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function _r(t,e){if(!(256&e[2])){const n=e[11];Ct(n)&&n.destroyNode&&Ar(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return wr(t[1],t);for(;e;){let n=null;if(it(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)it(e)&&wr(e[1],e),e=e[3];null===e&&(e=t),it(e)&&wr(e[1],e),n=e&&e[4]}e=n}}(e)}}function wr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ve)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):It(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Ct(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ot(e[3])){n!==e[3]&&mr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Or(t,e,n,r,i){Ct(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Er(t,e,n){Ct(t)?t.appendChild(e,n):e.appendChild(n)}function Cr(t,e,n,r,i){null!==r?Or(t,e,n,r,i):Er(t,e,n)}function Sr(t,e){return Ct(t)?t.parentNode(e):e.parentNode}function Ir(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===j.None||e===j.Emulated)return null}return Tt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Tt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Cr(o,i,n[a],s,!1);else Cr(o,i,n,s,!1)}function Tr(t,e){if(null!==e){const n=e.type;if(3&n)return Tt(e,t);if(4&n)return xr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Tr(t,n);{const n=t[e.index];return ot(n)?xr(-1,n):It(n)}}if(32&n)return hr(e,t)()||It(t[e.index]);{const n=t[16],r=n[6],i=fr(n),o=r.projection[e.projection];return null!=o?Tr(i,o):Tr(t,e.next)}}return null}function xr(t,e){const n=rt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Tr(t,r)}return e[7]}function jr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&ar(It(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)jr(t,e,n.child,r,i,o,!1),yr(e,t,i,a,o);else if(32&u){const s=hr(n,r);let u;for(;u=s();)yr(e,t,i,u,o);yr(e,t,i,a,o)}else 16&u?Nr(t,e,r,n,i,o):yr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Ar(t,e,n,r,i,o){jr(n,r,t.firstChild,e,i,o,!1)}function Nr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)yr(e,t,i,a[u],o);else jr(t,e,a,s[3],i,o,!0)}function kr(t,e,n){Ct(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Pr(t,e,n){Ct(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Rr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Dr="ng-template";function Mr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Rr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Lr(t){return 4===t.type&&t.value!==Dr}function Fr(t,e,n){return e===(4!==t.type||n?t.value:Dr)}function Ur(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(be(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Fr(t,u,n)||""===u&&1===e.length){if(Vr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Mr(t.attrs,c,n)){if(Vr(r))return!1;s=!0}continue}const l=qr(8&r?"class":u,i,Lr(t),n);if(-1===l){if(Vr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Rr(e,c,0)||2&r&&c!==t){if(Vr(r))return!1;s=!0}}}}else{if(!s&&!Vr(r)&&!Vr(u))return!1;if(s&&Vr(u))continue;s=!1,r=u|1&r}}return Vr(r)||s}function Vr(t){return 0==(1&t)}function qr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Hr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Ur(t,e[r],n))return!0;return!1}function zr(t,e){return t?":not("+e.trim()+")":e}function Br(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Vr(s)||(e+=zr(o,i),i=""),r=s,o=o||!Vr(r);n++}return""!==i&&(e+=zr(o,i)),e}const Gr={};function Wr(t){Qr(Ut(),Ft(),oe()+t,Bt())}function Qr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&he(e,r,n)}else{const r=t.preOrderHooks;null!==r&&fe(e,r,0,n)}se(n)}function Yr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];$t(i),n.contentQueries(2,e[o],o)}}}function Kr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Rt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function $r(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=qt(),s=zt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Mt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Mt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Ht(o,!0),o}function Jr(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Xr(t,e,n){Zt(e);try{const r=t.viewQuery;null!==r&&Ti(1,r,n);const i=t.template;null!==i&&ei(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Yr(t,e),t.staticViewQueries&&Ti(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Oi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ie()}}function Zr(t,e,n,r){const i=e[2];if(256==(256&i))return;Zt(e);const o=Bt();try{Rt(e),Mt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ei(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&he(e,n,null)}else{const n=t.preOrderHooks;null!==n&&fe(e,n,0,null),de(e,0)}if(function(t){for(let e=dr(t);null!==e;e=pr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Dt(r,1),n[2]|=1024}}}(e),function(t){for(let e=dr(t);null!==e;e=pr(e))for(let t=rt;t<e.length;t++){const n=e[t],r=n[1];kt(n)&&Zr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Yr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&he(e,n)}else{const n=t.contentHooks;null!==n&&fe(e,n,1),de(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)se(~r);else{const i=r,o=n[++t],s=n[++t];Qt(o,i),s(2,e[i])}}}finally{se(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)_i(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ti(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&he(e,n)}else{const n=t.viewHooks;null!==n&&fe(e,n,2),de(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Dt(e[3],-1))}finally{ie()}}function ti(t,e,n,r){const i=e[10],o=!Bt(),s=Nt(e);try{o&&!s&&i.begin&&i.begin(),s&&Xr(t,e,r),Zr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function ei(t,e,n,r,i){const o=oe();try{se(-1),2&r&&e.length>nt&&Qr(t,e,nt,Bt()),n(r,i)}finally{se(o)}}function ni(t,e,n){Lt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||je(n,e),ar(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=ct(r);o&&yi(e,n,r);const u=qe(e,t,a,n);ar(u,e),null!==s&&vi(0,a-i,u,r,0,s),o&&(jt(n.index,e)[8]=u)}}(t,e,n,Tt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Mt.lFrame.currentDirectiveIndex;try{se(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Yt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||hi(r,i)}}finally{se(-1),Yt(s)}}(t,e,n))}function ri(t,e,n=Tt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function ii(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=oi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function oi(t,e,n,r,i,o,s,a,u,c){const l=nt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Gr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function si(t,e,n,r){const i=ji(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Ai(t).push(r,i.length-1))}function ai(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ui(t,e,n,r,i,o,s,a){const u=Tt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(ki(t,n,c,r,i),at(e)&&function(t,e){const n=jt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Ct(o)?o.setProperty(u,r,i):_e(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ci(t,e,n,r){let i=!1;if(Lt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Hr(n,s.selectors,!1)&&(i||(i=[]),Pe(je(n,e),t,s.type),ct(s)?(fi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,pi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Jr(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=we(n.mergedAttrs,c.hostAttrs),gi(t,n,e,u,c),di(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Lr(e)?null:mi(n,i);o.push(c),s=ai(n,u,s),a=ai(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new ht("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=we(n.mergedAttrs,n.attrs),i}function li(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function hi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function fi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function di(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ct(e)&&(n[""]=t)}}function pi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function gi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=lt(i.type)),s=new ve(o,ct(i),null);t.blueprint[r]=s,n[r]=s,li(t,e,0,r,Jr(t,n,i.hostVars,Gr),i)}function yi(t,e,n){const r=Tt(e,t),i=ii(n),o=t[10],s=Ei(t,Kr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function vi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function mi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function bi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function _i(t,e){const n=jt(e,t);if(kt(n)){const t=n[1];80&n[2]?Zr(t,n,t.template,n[8]):n[5]>0&&wi(n)}}function wi(t){for(let n=dr(t);null!==n;n=pr(n))for(let t=rt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Zr(t,e,t.template,e[8])}else e[5]>0&&wi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=jt(e[n],t);kt(r)&&r[5]>0&&wi(r)}}function Oi(t,e){const n=jt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Xr(r,n,n[8])}function Ei(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ci(t){for(;t;){t[2]|=64;const e=fr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Si(t,e,n){const r=e[10];r.begin&&r.begin();try{Zr(t,e,t.template,n)}catch(i){throw Ni(e,i),i}finally{r.end&&r.end()}}function Ii(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=At(n),i=r[1];ti(i,r,i.template,n)}}(t[8])}function Ti(t,e,n){$t(0),e(t,n)}const xi=(()=>Promise.resolve(null))();function ji(t){return t[7]||(t[7]=[])}function Ai(t){return t.cleanup||(t.cleanup=[])}function Ni(t,e){const n=t[9],r=n?n.get(sr,null):null;r&&r.handleError(e)}function ki(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Pi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=l(i,t):2==o&&(r=l(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Ri=new Ye("INJECTOR",-1);class Di{get(t,e=an){if(e===an){const e=new Error(`NullInjectorError: No provider for ${c(t)}!`);throw e.name="NullInjectorError",e}return e}}const Mi=new Ye("Set Injector scope."),Li={},Fi={},Ui=[];let Vi=void 0;function qi(){return void 0===Vi&&(Vi=new Di),Vi}function Hi(t,e=null,n=null,r){return new zi(t,n,e||qi(),r)}class zi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Xe(e,n=>this.processProvider(n,t,e)),Xe([t],t=>this.processInjectorType(t,[],i)),this.records.set(Ri,Gi(void 0,this));const o=this.records.get(Mi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:c(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=an,n=E.Default){this.assertNotDestroyed();const r=dn(this);try{if(!(n&E.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Ye)&&y(t);e=n&&this.injectableDefInScope(n)?Gi(Bi(t),Li):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&E.Self?qi():this.parent).get(t,e=n&E.Optional&&e===an?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(c(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[cn]&&i.unshift(e[cn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=c(e);if(Array.isArray(e))i=e.map(c).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):c(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(un,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{dn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(c(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=d(t)))return!1;let r=m(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=m(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Xe(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Xe(r,t=>this.processProvider(t,n,r||Ui))}}this.injectorDefTypes.add(o),this.records.set(o,Gi(r.factory,Li));const a=r.providers;if(null!=a&&!s){const e=t;Xe(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Qi(t=d(t))?t:d(t&&t.provide);const i=function(t,e,n){return Wi(t)?Gi(void 0,t.useValue):Gi(function(t,e,n){let r=void 0;if(Qi(t)){const e=d(t);return lt(e)||Bi(e)}if(Wi(t))r=()=>d(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...yn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>gn(d(t.useExisting));else{const e=d(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return lt(e)||Bi(e);r=()=>new e(...yn(t.deps))}var i;return r}(t),Li)}(t);if(Qi(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Gi(void 0,Li,!0),e.factory=()=>yn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Li&&(e.value=Fi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Bi(t){const e=y(t),n=null!==e?e.factory:lt(t);if(null!==n)return n;const r=m(t);if(null!==r)return r.factory;if(t instanceof Ye)throw new Error(`Token ${c(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${c(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[b]||t[w]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Gi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Wi(t){return null!==t&&"object"==typeof t&&ln in t}function Qi(t){return"function"==typeof t}const Yi=function(t,e,n){return function(t,e=null,n=null,r){const i=Hi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Ki=(()=>{class t{static create(t,e){return Array.isArray(t)?Yi(t,e,""):Yi(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=an,t.NULL=new Di,t.\u0275prov=p({token:t,providedIn:"any",factory:()=>gn(Ri)}),t.__NG_ELEMENT_ID__=-1,t})();function $i(t,e){le(At(t)[1],Vt())}let Ji=null;function Xi(){if(!Ji){const t=R.Symbol;if(t&&t.iterator)Ji=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ji=n)}}}return Ji}function Zi(t){return!!to(t)&&(Array.isArray(t)||!(t instanceof Map)&&Xi()in t)}function to(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function eo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function no(t,e,n,r){const i=Ft();return eo(i,Wt(),e)&&(Ut(),function(t,e,n,r,i,o){const s=Tt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Ct(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?ft(o):s(o,r||"",i);Ct(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ae(),i,t,e,n,r)),no}function ro(t,e,n,r,i,o,s,a){const u=Ft(),c=Ut(),l=t+nt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=$r(e,t,4,s||null,Pt(c,a));ci(e,n,l,Pt(c,u)),le(e,l);const h=l.tViews=oi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Ht(h,!1);const f=u[11].createComment("");Ir(c,u,f,h),ar(f,u),Ei(u,u[l]=bi(f,u,f,h)),ut(h)&&ni(c,u,h),null!=s&&ri(u,h,a)}function io(t,e=E.Default){const n=Ft();return null===n?gn(t,e):Me(Vt(),n,d(t),e)}function oo(t,e,n){const r=Ft();return eo(r,Wt(),e)&&ui(Ut(),ae(),r,t,e,r[11],n,!1),oo}function so(t,e,n,r,i){const o=i?"class":"style";ki(t,n,e.inputs[o],o,r)}function ao(t,e,n,r){const i=Ft(),o=Ut(),s=nt+t,a=i[11],u=i[s]=vr(a,e,Mt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=$r(e,t,2,i,Pt(a,o));return ci(e,n,u,Pt(a,s)),null!==u.attrs&&Pi(u,u.attrs,!1),null!==u.mergedAttrs&&Pi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Ht(c,!0);const l=c.mergedAttrs;null!==l&&me(a,u,l);const h=c.classes;null!==h&&Pr(a,u,h);const f=c.styles;null!==f&&kr(a,u,f),64!=(64&c.flags)&&Ir(o,i,u,c),0===Mt.lFrame.elementDepthCount&&ar(u,i),Mt.lFrame.elementDepthCount++,ut(c)&&(ni(o,i,c),function(t,e,n){if(st(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&ri(i,c)}function uo(){let t=Vt();zt()?Mt.lFrame.isParent=!1:(t=t.parent,Ht(t,!1));const e=t;Mt.lFrame.elementDepthCount--;const n=Ut();n.firstCreatePass&&(le(n,t),st(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&so(n,e,Ft(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&so(n,e,Ft(),e.stylesWithoutHost,!1)}function co(t,e,n,r){ao(t,e,n,r),uo()}function lo(t){return!!t&&"function"==typeof t.then}function ho(t){return!!t&&"function"==typeof t.subscribe}function fo(t,e,n=!1,r){const i=Ft(),o=Ut(),s=Vt();return function(t,e,n,r,i,o,s=!1,a){const u=ut(r),c=t.firstCreatePass&&Ai(t),l=ji(e);let h=!0;if(3&r.type){const f=Tt(r,e),d=a?a(f):D,p=d.target||f,g=l.length,y=a?t=>a(It(t[r.index])).target:r.index;if(Ct(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=go(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=go(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=go(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),fo}function po(t,e,n){try{return!1!==e(n)}catch(r){return Ni(t,r),!1}}function go(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?jt(t.index,e):e;0==(32&e[2])&&Ci(s);let a=po(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=po(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function yo(t,e=""){const n=Ft(),r=Ut(),i=t+nt,o=r.firstCreatePass?$r(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Ct(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Ir(r,n,s,o),Ht(o,!1)}function vo(t,e,n){const r=Ft(),i=function(t,e,n,r){return eo(t,Wt(),n)?e+ft(n)+r:Gr}(r,t,e,n);return i!==Gr&&function(t,e,n){const r=function(t,e){return It(e[t])}(e,t);!function(t,e,n){Ct(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,oe(),i),vo}function mo(t,e,n){const r=Ft();return eo(r,Wt(),e)&&ui(Ut(),ae(),r,t,e,r[11],n,!0),mo}const bo=void 0;var _o=["en",[["a","p"],["AM","PM"],bo],[["AM","PM"],bo,bo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bo,"{1} 'at' {0}",bo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let wo={};function Oo(t,e,n){"string"!=typeof e&&(n=e,e=t[To.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),wo[e]=t,n&&(wo[e][To.ExtraData]=n)}function Eo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Io(e);if(n)return n;const r=e.split("-")[0];if(n=Io(r),n)return n;if("en"===r)return _o;throw new Error(`Missing locale data for the locale "${t}".`)}function Co(t){return Eo(t)[To.CurrencyCode]||null}function So(t){return Eo(t)[To.PluralCase]}function Io(t){return t in wo||(wo[t]=R.ng&&R.ng.common&&R.ng.common.locales&&R.ng.common.locales[t]),wo[t]}var To=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const xo="en-US";let jo=xo;function Ao(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(jo=t.toLowerCase().replace(/_/g,"-"))}class No{}class ko{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${c(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Po=(()=>{class t{}return t.NULL=new ko,t})();function Ro(...t){}function Do(t,e){return new Lo(Tt(t,e))}const Mo=function(){return Do(Vt(),Ft())};let Lo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Mo,t})();class Fo{}let Uo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Vo(),t})();const Vo=function(){const t=Ft(),e=jt(Vt().index,t);return function(t){return t[11]}(it(e)?e:t)};let qo=(()=>{class t{}return t.\u0275prov=p({token:t,providedIn:"root",factory:()=>null}),t})();class Ho{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const zo=new Ho("11.0.9");class Bo{constructor(){}supports(t){return Zi(t)}create(t){return new Wo(t)}}const Go=(t,e)=>e;class Wo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Go}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<$o(n,r,i)?e:n,s=$o(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Zi(t))throw new Error(`Error trying to diff '${c(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Xi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Qo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ko),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ko),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Qo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ko{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Yo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $o(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Jo{constructor(){}supports(t){return t instanceof Map||to(t)}create(){return new Xo}}class Xo{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||to(t)))throw new Error(`Error trying to diff '${c(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Zo(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Zo{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let ts=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new on,new nn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=p({token:t,providedIn:"root",factory:()=>new t([new Bo])}),t})(),es=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new on,new nn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=p({token:t,providedIn:"root",factory:()=>new t([new Jo])}),t})();function ns(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(It(o)),ot(o))for(let t=rt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ns(e[1],e,n,r)}const s=n.type;if(8&s)ns(t,e,n.child,r);else if(32&s){const t=hr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=fr(t);ns(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class rs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ns(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ot(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(br(t,n),tn(e,n))}this._attachedToViewContainer=!1}_r(this._lView[1],this._lView)}onDestroy(t){si(this._lView[1],this._lView,null,t)}markForCheck(){Ci(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Si(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Gt(!0);try{Si(t,e,n)}finally{Gt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Ar(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class is extends rs{constructor(t){super(t),this._view=t}detectChanges(){Ii(this._view)}checkNoChanges(){!function(t){Gt(!0);try{Ii(t)}finally{Gt(!1)}}(this._view)}get context(){return null}}const os=as;let ss=(()=>{class t{}return t.__NG_ELEMENT_ID__=os,t.__ChangeDetectorRef__=!0,t})();function as(t=!1){return function(t,e,n){if(!n&&at(t)){const n=jt(t.index,e);return new rs(n,n)}return 47&t.type?new rs(e[16],e):null}(Vt(),Ft(),t)}const us=[new Jo],cs=new ts([new Bo]),ls=new es(us),hs=function(){return gs(Vt(),Ft())};let fs=(()=>{class t{}return t.__NG_ELEMENT_ID__=hs,t})();const ds=fs,ps=class extends ds{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Kr(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Xr(e,n,t),new rs(n)}};function gs(t,e){return 4&t.type?new ps(e,t,Do(t,e)):null}class ys{}class vs{}const ms=function(){return Cs(Vt(),Ft())};let bs=(()=>{class t{}return t.__NG_ELEMENT_ID__=ms,t})();const _s=bs,ws=class extends _s{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Do(this._hostTNode,this._hostLView)}get injector(){return new Be(this._hostTNode,this._hostLView)}get parentInjector(){const t=ke(this._hostTNode,this._hostLView);if(Ee(t)){const e=Se(t,this._hostLView),n=Ce(t);return new Be(e[1].data[n+8],e)}return new Be(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Os(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-rt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ys,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ot(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new ws(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=rt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-rt?(e[4]=n[i],Ze(n,rt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=xr(i,o),a=n[11],u=Sr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Ar(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),Ze(Es(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Os(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=br(this._lContainer,e);n&&(tn(Es(this._lContainer),e),_r(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=br(this._lContainer,e);return n&&null!=tn(Es(this._lContainer),e)?new rs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Os(t){return t[8]}function Es(t){return t[8]||(t[8]=[])}function Cs(t,e){let n;const r=e[t.index];if(ot(r))n=r;else{let i;if(8&t.type)i=It(r);else{const n=e[11];i=n.createComment("");const r=Tt(t,e);Or(n,Sr(n,r),i,function(t,e){return Ct(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=bi(r,e,i,t),Ei(e,n)}return new ws(n,t,e)}const Ss={};class Is extends Po{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=tt(t);return new js(e,this.ngModule)}}function Ts(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const xs=new Ye("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ur});class js extends No{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Br).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ts(this.componentDef.inputs)}get outputs(){return Ts(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ss,i);return o!==Ss||r===Ss?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Fo,St),s=i.get(qo,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ct(t))return t.selectRootElement(e,n===j.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):vr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?wt:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:ur,clean:xi,playerHandler:null,flags:0},f=oi(0,null,null,1,0,null,null,null,null,null),d=Kr(null,f,h,l,null,null,o,a,s,i);let p,g;Zt(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=$r(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Pi(a,u,!0),null!==t&&(me(i,t,u),null!==a.classes&&Pr(i,t,a.classes),null!==a.styles&&kr(i,t,a.styles)));const c=r.createRenderer(t,e),l=Kr(n,ii(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Pe(je(a,n),s,e.type),fi(s,a),pi(a,n.length,1)),Ei(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)me(a,c,["ng-version",zo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Vr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&me(a,c,t),e&&e.length>0&&Pr(a,c,e.join(" "))}if(g=xt(f,nt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Vt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),gi(t,r,e,Jr(t,e,1,null),n));const i=qe(e,t,r.directiveStart,r);ar(i,e);const o=Tt(r,e);return o&&ar(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Vt();e.contentQueries(1,s,t.directiveStart)}const a=Vt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(se(a.index),li(n[1],a,0,a.directiveStart,a.directiveEnd,e),hi(e,s)),s}(t,this.componentDef,d,h,[$i]),Xr(f,d,null)}finally{ie()}return new As(this.componentType,p,Do(g,d),d,g)}}class As extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new is(r),this.componentType=t}get injector(){return new Be(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Ns=new Map;class ks extends ys{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Is(this);const n=et(t),r=t[q]||null;r&&Ao(r),this._bootstrapComponents=cr(n.bootstrap),this._r3Injector=Hi(t,e,[{provide:ys,useValue:this},{provide:Po,useValue:this.componentFactoryResolver}],c(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Ki.THROW_IF_NOT_FOUND,n=E.Default){return t===Ki||t===ys||t===Ri?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ps extends vs{constructor(t){super(),this.moduleType=t,null!==et(t)&&function(t){const e=new Set;!function t(n){const r=et(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${c(e)} vs ${c(e.name)}`)}(i,Ns.get(i),n),Ns.set(i,n));const o=cr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ks(this.moduleType,t)}}const Rs=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Ds(){return this._results[Xi()]()}class Ms{constructor(){this.dirty=!0,this._results=[],this.changes=new Rs,this.length=0;const t=Xi(),e=Ms.prototype;e[t]||(e[t]=Ds)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=Je(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ls{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ls(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fs{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Fs(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ks(t,e).matches&&this.queries[e].setDirty()}}class Us{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class Vs{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Vs(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class qs{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new qs(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Hs(e,i)),this.matchTNodeWithReadOption(t,e,Ve(e,t,i,!1,!1))}else n===fs?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ve(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Lo||r===bs||r===fs&&4&e.type)this.addMatch(e.index,-2);else{const n=Ve(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Hs(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function zs(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Do(t,e):4&t.type?gs(t,e):null}(e,t):-2===n?function(t,e,n){return n===Lo?Do(e,t):n===fs?gs(e,t):n===bs?Cs(e,t):void 0}(t,e,r):qe(t,t[1],n,e)}function Bs(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:zs(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Gs(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Bs(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=rt;t<s.length;t++){const e=s[t];e[17]===e[3]&&Gs(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Gs(n[1],n,i,r)}}}}}return r}function Ws(t){const e=Ft(),n=Ut(),r=Kt();$t(r+1);const i=Ks(n,r);if(t.dirty&&Nt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Gs(n,e,r,[]):Bs(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Qs(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new Vs),t.queries.track(new qs(e,n))}(t,new Us(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),function(t,e){const n=new Ms;si(t,e,n,n.destroy),null===e[19]&&(e[19]=new Fs),e[19].queries.push(new Ls(n))}(t,e)}(Ut(),Ft(),e,n,r,0,Vt(),t)}function Ys(){return t=Ft(),e=Kt(),t[19].queries[e].queryList;var t,e}function Ks(t,e){return t.queries.getByIndex(e)}function $s(t=E.Default){const e=as(!0);if(null!=e||t&E.Optional)return e;pt("ChangeDetectorRef")}const Js=new Ye("Application Initializer");let Xs=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ro,this.reject=Ro,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();lo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(gn(Js,8))},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();const Zs=new Ye("AppId"),ta={provide:Zs,useFactory:function(){return`${ea()}${ea()}${ea()}`},deps:[]};function ea(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const na=new Ye("Platform Initializer"),ra=new Ye("Platform ID"),ia=new Ye("appBootstrapListener");let oa=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();const sa=new Ye("LocaleId"),aa=new Ye("DefaultCurrencyCode");class ua{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ca=function(t){return new Ps(t)},la=ca,ha=function(t){return Promise.resolve(ca(t))},fa=function(t){const e=ca(t),n=cr(et(t).declarations).reduce((t,e)=>{const n=tt(e);return n&&t.push(new js(n)),t},[]);return new ua(e,n)},da=fa,pa=function(t){return Promise.resolve(fa(t))};let ga=(()=>{class t{constructor(){this.compileModuleSync=la,this.compileModuleAsync=ha,this.compileModuleAndAllComponentsSync=da,this.compileModuleAndAllComponentsAsync=pa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();const ya=(()=>Promise.resolve(0))();function va(t){"undefined"==typeof Zone?ya.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ma{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rs(!1),this.onMicrotaskEmpty=new Rs(!1),this.onStable=new Rs(!1),this.onError=new Rs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=R.requestAnimationFrame,e=R.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(R,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,wa(t),_a(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),wa(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Oa(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Ea(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Oa(t),e.invoke(r,i,o,s,a)}finally{Ea(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,wa(t),_a(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ma.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ma.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,ba,Ro,Ro);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const ba={};function _a(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function wa(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Oa(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ea(t){t._nesting--,_a(t)}class Ca{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rs,this.onMicrotaskEmpty=new Rs,this.onStable=new Rs,this.onError=new Rs}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Sa=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ma.assertNotInAngularZone(),va(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())va(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(gn(ma))},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})(),Ia=(()=>{class t{constructor(){this._applications=new Map,Aa.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Aa.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();class Ta{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function xa(t){Aa=t}let ja,Aa=new Ta,Na=!0,ka=!1;function Pa(){return ka=!0,Na}function Ra(){if(ka)throw new Error("Cannot enable prod mode after platform setup.");Na=!1}const Da=new Ye("AllowMultipleToken");class Ma{constructor(t,e){this.name=t,this.token=e}}function La(t,e,n=[]){const r="Platform: "+e,i=new Ye(r);return(e=[])=>{let o=Fa();if(!o||o.injector.get(Da,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Mi,useValue:"platform"});!function(t){if(ja&&!ja.destroyed&&!ja.injector.get(Da,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ja=t.get(Ua);const e=t.get(na,null);e&&e.forEach(t=>t())}(Ki.create({providers:t,name:r}))}return function(t){const e=Fa();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Fa(){return ja&&!ja.destroyed?ja:null}let Ua=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Ca:("zone.js"===t?void 0:t)||new ma({enableLongStackTrace:Pa(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:ma,useValue:n}];return n.run(()=>{const e=Ki.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(sr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Ha(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return lo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Xs);return t.runInitializers(),t.donePromise.then(()=>(Ao(i.injector.get(sa,xo)||xo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Va({},e);return function(t,e,n){const r=new Ps(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(qa);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${c(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(gn(Ki))},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();function Va(t,e){return Array.isArray(e)?e.reduce(Va,t):Object.assign(Object.assign({},t),e)}let qa=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ma.assertNotInAngularZone(),va(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ma.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof No?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ys),i=n.create(Ki.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Sa,null),a=s&&i.injector.get(Ia);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Ha(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),Pa()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ha(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ia,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(gn(ma),gn(oa),gn(Ki),gn(sr),gn(Po),gn(Xs))},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();function Ha(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class za{}class Ba{}const Ga={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Wa=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Ga}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Qa(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Qa(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(gn(ga),gn(Ba,8))},t.\u0275prov=p({token:t,factory:t.\u0275fac}),t})();function Qa(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ya=function(t){return null},Ka=La(null,"core",[{provide:ra,useValue:"unknown"},{provide:Ua,deps:[Ki]},{provide:Ia,deps:[]},{provide:oa,deps:[]}]),$a=[{provide:qa,useClass:qa,deps:[ma,oa,Ki,sr,Po,Xs]},{provide:xs,deps:[ma],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Xs,useClass:Xs,deps:[[new nn,Js]]},{provide:ga,useClass:ga,deps:[]},ta,{provide:ts,useFactory:function(){return cs},deps:[]},{provide:es,useFactory:function(){return ls},deps:[]},{provide:sa,useFactory:function(t){return Ao(t=t||"undefined"!=typeof $localize&&$localize.locale||xo),t},deps:[[new en(sa),new nn,new on]]},{provide:aa,useValue:"USD"}];let Ja=(()=>{class t{constructor(t){}}return t.\u0275mod=K({type:t}),t.\u0275inj=g({factory:function(e){return new(e||t)(gn(qa))},providers:$a}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return C}),n.d(e,"c",function(){return L}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return k}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return H}),n.d(e,"m",function(){return d}),n.d(e,"n",function(){return N}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return v}),n.d(e,"q",function(){return b}),n.d(e,"r",function(){return R}),n.d(e,"s",function(){return _}),n.d(e,"t",function(){return p}),n.d(e,"u",function(){return g}),n.d(e,"v",function(){return O}),n.d(e,"w",function(){return m}),n.d(e,"x",function(){return w}),n.d(e,"y",function(){return A}),n.d(e,"z",function(){return T}),n.d(e,"A",function(){return D}),n.d(e,"B",function(){return M}),n.d(e,"C",function(){return P}),n.d(e,"D",function(){return W}),n.d(e,"E",function(){return G}),n.d(e,"F",function(){return x}),n.d(e,"G",function(){return q}),n.d(e,"H",function(){return z}),n.d(e,"I",function(){return B});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function O(){return!1}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,C.prototype.create),o}return Object(r.c)(e,t),e}(Error),C=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?S(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new E(i,a,r);return u},t}();function S(t,e){return t.replace(I,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var I=/\{\$([^}]+)}/g;function T(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var j=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=T(c(o[0])||""),n=T(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=j(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},N=function(t){var e=j(t).claims;return"object"==typeof e&&!0===e.admin};function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function V(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function z(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e,r)+"must be a valid function.")}function B(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e,r)+"must be a valid context object.")}var G=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},W=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return I}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return m}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return v}),n.d(e,"f",function(){return C}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return O});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.O("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.T)()&&"undefined"!=typeof console&&console[t](...e)};function C(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[m,u.z,[new u.A,b]]};let I=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Cb({type:t}),t.\u0275inj=u.Bb({factory:function(e){return new(e||t)(u.Jb(u.B))},providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new v(t,e))}}class v{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function p(){return t=>{return a()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.o)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.u)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new v(t)},"PRIVATE")),t.registerVersion(h,"0.6.16",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyD4kCugT3a04uKthhAROqVlbbciuY3uJI4",authDomain:"deivamanikailasam-58dd9.firebaseapp.com",databaseURL:"https://deivamanikailasam-58dd9-default-rtdb.firebaseio.com",projectId:"deivamanikailasam-58dd9",storageBucket:"deivamanikailasam-58dd9.appspot.com",messagingSenderId:"1031640298822",appId:"1:1031640298822:web:439b0ea59a4eff327e2147",measurementId:"G-K0RRK188WF"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ab)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Jb)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a))},t.\u0275prov=Object(r.Ab)({factory:d,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function d(){return new h(Object(r.Jb)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ab)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Jb)(a).location;return new _(Object(r.Jb)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(u),r.Jb(b,8))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(u),r.Jb(b,8))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),O=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(v),r.Jb(u))},t.normalizeQueryParams=y,t.joinWithSlash=p,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Ab)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new O(Object(r.Jb)(v),Object(r.Jb)(u))}function C(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const I=r.kb;class T{}let x=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(I(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.u))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();class j{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new j(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new N(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new N(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(r.P),r.Eb(r.K),r.Eb(r.s))},t.\u0275dir=r.zb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class N{constructor(t,e){this.record=t,this.view=e}}let k=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[{provide:T,useClass:x}]}),t})();function P(t){return"server"===t}let R=(()=>{class t{}return t.\u0275prov=Object(r.Ab)({token:t,providedIn:"root",factory:()=>new D(Object(r.Jb)(a),window)}),t})();class D{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=M(this.window.history)||M(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function M(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class L extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new L,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=U||(U=document.querySelector("base"),U)?U.getAttribute("href"):null;return null==e?null:(n=e,F||(F=document.createElement("a")),F.setAttribute("href",n),"/"===F.pathname.charAt(0)?F.pathname:"/"+F.pathname);var n}resetBaseElement(){U=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let F,U=null;const V=new r.q("TRANSITION_ID"),q=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[V,a,r.r],multi:!0}];class H{static init(){Object(r.V)(new H)}addToWindow(t){r.mb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.mb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.mb.getAllAngularRootElements=()=>t.getAllRootElements(),r.mb.frameworkStabilizers||(r.mb.frameworkStabilizers=[]),r.mb.frameworkStabilizers.push(t=>{const e=r.mb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const z=new r.q("EventManagerPlugins");let B=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(z),r.Jb(r.z))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();class G{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let W=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),Q=(()=>{class t extends W{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const Y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},K=/%COMP%/g;function $(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?$(t,i,n):(i=i.replace(K,t),n.push(i))}return n}function J(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let X=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Z(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new tt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.Q.ShadowDom:return new et(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=$(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(B),r.Jb(Q),r.Jb(r.c))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();class Z{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Y[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Y[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Y[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.F.DashCase|r.F.Important)?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,J(n)):this.eventManager.addEventListener(t,e,J(n))}}class tt extends Z{constructor(t,e,n,r){super(t),this.component=n;const i=$(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(K,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(K,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class et extends Z{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=$(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let nt=(()=>{class t extends G{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const rt=["alt","control","meta","shift"],it={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ot={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},st={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let at=(()=>{class t extends G{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(rt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ot.hasOwnProperty(e)&&(e=ot[e]))}return it[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),rt.forEach(r=>{r!=n&&(0,st[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const ut=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){L.makeCurrent(),H.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.rb)(document),document},deps:[]}],ct=Object(r.R)(r.U,"browser",ut),lt=[[],{provide:r.X,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:z,useClass:nt,multi:!0,deps:[a,r.z,r.B]},{provide:z,useClass:at,multi:!0,deps:[a]},[],{provide:X,useClass:X,deps:[B,Q,r.c]},{provide:r.E,useExisting:X},{provide:W,useExisting:Q},{provide:Q,useClass:Q,deps:[a]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:B,useClass:B,deps:[z,r.z]},[]];let ht=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:V,useExisting:r.c},q]}}}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)(r.Jb(t,12))},providers:lt,imports:[k,r.f]}),t})();"undefined"!=typeof window&&window;var ft=n("Cfvw"),dt=n("LRne"),pt=n("XNiG"),gt=n("9ppp");class yt extends pt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new gt.a;return this._value}next(t){super.next(this._value=t)}}var vt=n("z+Ro"),mt=n("DH7j"),bt=n("7o/Q");class _t extends bt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class wt extends bt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Ot=n("SeVD"),Et=n("HDdC");function Ct(t,e,n,r,i=new wt(t,n,r)){if(!i.closed)return e instanceof Et.a?e.subscribe(i):Object(Ot.a)(e)(i)}var St=n("yCtX");const It={};class Tt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new xt(t,this.resultSelector))}}class xt extends _t{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(It),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Ct(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===It?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const jt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var At=n("bHdf");function Nt(...t){return Object(At.a)(1)(Object(dt.a)(...t))}var kt=n("EY2u");function Pt(t){return new Et.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(ft.a)(n):Object(kt.b)()).subscribe(e)})}var Rt=n("lJxs"),Dt=n("zx2A");function Mt(t,e){return"function"==typeof e?n=>n.pipe(Mt((n,r)=>Object(ft.a)(t(n,r)).pipe(Object(Rt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Lt(t))}class Lt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ft(t,this.project))}}class Ft extends Dt.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Dt.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Dt.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ut=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Vt(t){return e=>0===t?Object(kt.b)():e.lift(new qt(t))}class qt{constructor(t){if(this.total=t,this.total<0)throw new Ut}call(t,e){return e.subscribe(new Ht(t,this.total))}}class Ht extends bt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function zt(...t){const e=t[t.length-1];return Object(vt.a)(e)?(t.pop(),n=>Nt(t,n,e)):e=>Nt(t,e)}function Bt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Gt(t,e,n))}}class Gt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Wt(t,this.accumulator,this.seed,this.hasSeed))}}class Wt extends bt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Qt(t,e){return function(n){return n.lift(new Yt(t,e))}}class Yt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Kt(t,this.predicate,this.thisArg))}}class Kt extends bt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function $t(t){return function(e){const n=new Jt(t),r=e.lift(n);return n.caught=r}}class Jt{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Xt(t,this.selector,this.caught))}}class Xt extends Dt.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Dt.a(this);this.add(r);const i=Object(Dt.c)(n,r);i!==r&&this.add(i)}}}var Zt=n("5+tZ");function te(t,e){return Object(Zt.a)(t,e,1)}function ee(t){return function(e){return 0===t?Object(kt.b)():e.lift(new ne(t))}}class ne{constructor(t){if(this.total=t,this.total<0)throw new Ut}call(t,e){return e.subscribe(new re(t,this.total))}}class re extends bt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ie(t=ae){return e=>e.lift(new oe(t))}class oe{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new se(t,this.errorFactory))}}class se extends bt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Eb){t=Eb}this.destination.error(t)}}}function ae(){return new jt}function ue(t=null){return e=>e.lift(new ce(t))}class ce{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new le(t,this.defaultValue))}}class le extends bt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var he=n("SpAZ");function fe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Qt((e,n)=>t(e,n,r)):he.a,Vt(1),n?ue(e):ie(()=>new jt))}var de=n("vkgz"),pe=n("quSY");class ge{constructor(t){this.callback=t}call(t,e){return e.subscribe(new ye(t,this.callback))}}class ye extends bt.a{constructor(t,e){super(t),this.add(new pe.a(e))}}class ve{constructor(t,e){this.id=t,this.url=e}}class me extends ve{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class be extends ve{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _e extends ve{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class we extends ve{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Oe extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ee extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ce extends ve{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Se extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ie extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Te{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xe{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class je{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ae{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ne{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ke{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pe{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Re="primary";class De{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Me(t){return new De(t)}function Le(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Fe(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ue(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Ve(t[i],e[i]))return!1;return!0}function Ve(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function qe(t){return Array.prototype.concat.apply([],t)}function He(t){return t.length>0?t[t.length-1]:null}function ze(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Be(t){return Object(r.ob)(t)?t:Object(r.pb)(t)?Object(ft.a)(Promise.resolve(t)):Object(dt.a)(t)}function Ge(t,e,n){return n?function(t,e){return Ue(t,e)}(t.queryParams,e.queryParams)&&We(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ve(t[n],e[n]))}(t.queryParams,e.queryParams)&&Qe(t.root,e.root)}function We(t,e){if(!Xe(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!We(t.children[n],e.children[n]))return!1}return!0}function Qe(t,e){return Ye(t,e,e.segments)}function Ye(t,e,n){if(t.segments.length>n.length)return!!Xe(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Xe(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Qe(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Xe(t.segments,r)&&!!t.children.primary&&Ye(t.children.primary,e,i)}}class Ke{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Me(this.queryParams)),this._queryParamMap}toString(){return en.serialize(this)}}class $e{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ze(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nn(this)}}class Je{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Me(this.parameters)),this._parameterMap}toString(){return ln(this)}}function Xe(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Ze{}class tn{parse(t){const e=new gn(t);return new Ke(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+rn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${sn(e)}=${sn(t)}`).join("&"):`${sn(e)}=${sn(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const en=new tn;function nn(t){return t.segments.map(t=>ln(t)).join("/")}function rn(t,e){if(!t.hasChildren())return nn(t);if(e){const e=t.children.primary?rn(t.children.primary,!1):"",n=[];return ze(t.children,(t,e)=>{e!==Re&&n.push(`${e}:${rn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return ze(t.children,(t,r)=>{r===Re&&(n=n.concat(e(t,r)))}),ze(t.children,(t,r)=>{r!==Re&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Re?[rn(t.children.primary,!1)]:[`${n}:${rn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${nn(t)}/${e[0]}`:`${nn(t)}/(${e.join("//")})`}}function on(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sn(t){return on(t).replace(/%3B/gi,";")}function an(t){return on(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function un(t){return decodeURIComponent(t)}function cn(t){return un(t.replace(/\+/g,"%20"))}function ln(t){return`${an(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${an(t)}=${an(e[t])}`).join("")}`;var e}const hn=/^[^\/()?;=#]+/;function fn(t){const e=t.match(hn);return e?e[0]:""}const dn=/^[^=?&#]+/,pn=/^[^?&#]+/;class gn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $e([],{}):new $e([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new $e(t,e)),n}parseSegment(){const t=fn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Je(un(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=fn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=fn(this.remaining);t&&(n=t,this.capture(n))}t[un(e)]=un(n)}parseQueryParam(t){const e=function(t){const e=t.match(dn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(pn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=cn(e),i=cn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=fn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Re);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new $e([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class yn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=vn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=vn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=mn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return mn(t,this._root).map(t=>t.value)}}function vn(t,e){if(t===e.value)return e;for(const n of e.children){const e=vn(t,n);if(e)return e}return null}function mn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=mn(t,n);if(r.length)return r.unshift(e),r}return[]}class bn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function _n(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class wn extends yn{constructor(t,e){super(t),this.snapshot=e,Tn(this,t)}toString(){return this.snapshot.toString()}}function On(t,e){const n=function(t,e){const n=new Sn([],{},{},"",{},Re,e,null,t.root,-1,{});return new In("",new bn(n,[]))}(t,e),r=new yt([new Je("",{})]),i=new yt({}),o=new yt({}),s=new yt({}),a=new yt(""),u=new En(r,i,s,a,o,Re,e,n.root);return u.snapshot=n.root,new wn(new bn(u,[]),n)}class En{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Rt.a)(t=>Me(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Rt.a)(t=>Me(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Sn{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Me(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Me(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class In extends yn{constructor(t,e){super(e),this.url=t,Tn(this,e)}toString(){return xn(this._root)}}function Tn(t,e){e.value._routerState=t,e.children.forEach(e=>Tn(t,e))}function xn(t){const e=t.children.length>0?` { ${t.children.map(xn).join(", ")} } `:"";return`${t.value}${e}`}function jn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ue(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ue(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ue(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ue(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function An(t,e){return Ue(t.params,e.params)&&function(t,e){return Xe(t,e)&&t.every((t,n)=>Ue(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||An(t.parent,e.parent))}function Nn(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Nn(t,e,r);return Nn(t,e)})}(t,e,n);return new bn(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return kn(e,t),t}{const n=new En(new yt((r=e.value).url),new yt(r.params),new yt(r.queryParams),new yt(r.fragment),new yt(r.data),r.outlet,r.component,r),i=e.children.map(e=>Nn(t,e));return new bn(n,i)}}var r}function kn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)kn(t.children[n],e.children[n])}function Pn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Rn(t){return"object"==typeof t&&null!=t&&t.outlets}function Dn(t,e,n,r,i){let o={};return r&&ze(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new Ke(n.root===t?e:Mn(n.root,t,e),o,i)}function Mn(t,e,n){const r={};return ze(t.children,(t,i)=>{r[i]=t===e?n:Mn(t,e,n)}),new $e(t.segments,r)}class Ln{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Pn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Rn);if(r&&r!==He(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Un(t,e,n){if(t||(t=new $e([],{})),0===t.segments.length&&t.hasChildren())return Vn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Rn(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Bn(a,u,e))return o;r+=2}else{if(!Bn(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new $e(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new $e(t.segments.slice(r.pathIndex),t.children),Vn(e,0,i)}return r.match&&0===i.length?new $e(t.segments,{}):r.match&&!t.hasChildren()?qn(t,e,n):r.match?Vn(t,0,i):qn(t,e,n)}function Vn(t,e,n){if(0===n.length)return new $e(t.segments,{});{const r=function(t){return Rn(t[0])?t[0].outlets:{[Re]:t}}(n),i={};return ze(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Un(t.children[r],e,n))}),ze(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new $e(t.segments,i)}}function qn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Rn(o)){const t=Hn(o.outlets);return new $e(r,t)}if(0===i&&Pn(n[0])){r.push(new Je(t.segments[e].path,n[0])),i++;continue}const s=Rn(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&Pn(a)?(r.push(new Je(s,zn(a))),i+=2):(r.push(new Je(s,{})),i++)}return new $e(r,{})}function Hn(t){const e={};return ze(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=qn(new $e([],{}),0,t))}),e}function zn(t){const e={};return ze(t,(t,n)=>e[n]=""+t),e}function Bn(t,e,n){return t==n.path&&Ue(e,n.parameters)}class Gn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),jn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=_n(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),ze(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=_n(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=_n(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new ke(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Ae(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(jn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Wn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Wn(t){jn(t.value),t.children.forEach(Wn)}class Qn{constructor(t,e){this.routes=t,this.module=e}}function Yn(t){return"function"==typeof t}function Kn(t){return t instanceof Ke}const $n=Symbol("INITIAL_VALUE");function Jn(){return Mt(t=>function(...t){let e=void 0,n=void 0;return Object(vt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(mt.a)(t[0])&&(t=t[0]),Object(St.a)(t,n).lift(new Tt(e))}(t.map(t=>t.pipe(Vt(1),zt($n)))).pipe(Bt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==$n)return t;if(r===$n&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Kn(r))return r}return t},t)},$n),Qt(t=>t!==$n),Object(Rt.a)(t=>Kn(t)?t:!0===t),Vt(1)))}let Xn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.yb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Fb(0,"router-outlet")},directives:function(){return[zr]},encapsulation:2}),t})();function Zn(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];tr(r,er(e,r))}}function tr(t,e){t.children&&Zn(t.children,e)}function er(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function nr(t){const e=t.children&&t.children.map(nr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Re&&(n.component=Xn),n}function rr(t){return t.outlet||Re}function ir(t,e){const n=t.filter(t=>rr(t)===e);return n.push(...t.filter(t=>rr(t)!==e)),n}const or={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function sr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},or):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Fe)(n,t,e);if(!i)return Object.assign({},or);const o={};ze(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function ar(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>ur(t,e,n)&&rr(n)!==Re)}(t,n,r)){const i=new $e(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&rr(o)!==Re){const n=new $e([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[rr(o)]=n}return i}(t,e,r,new $e(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>ur(t,e,n))}(t,n,r)){const o=new $e(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(ur(t,n,a)&&!i[rr(a)]){const n=new $e([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[rr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new $e(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function ur(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function cr(t,e,n,r){return!!(rr(t)===r||r!==Re&&ur(e,n,t))&&("**"===t.path||sr(e,t,n).matched)}function lr(t,e,n){return 0===e.length&&!t.children[n]}class hr{constructor(t){this.segmentGroup=t||null}}class fr{constructor(t){this.urlTree=t}}function dr(t){return new Et.a(e=>e.error(new hr(t)))}function pr(t){return new Et.a(e=>e.error(new fr(t)))}function gr(t){return new Et.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class yr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){const t=ar(this.urlTree.root,[],[],this.config).segmentGroup,e=new $e(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Re).pipe(Object(Rt.a)(t=>this.createUrlTree(vr(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe($t(t=>{if(t instanceof fr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof hr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Re).pipe(Object(Rt.a)(e=>this.createUrlTree(vr(e),t.queryParams,t.fragment))).pipe($t(t=>{if(t instanceof hr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new $e([],{[Re]:t}):t;return new Ke(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Rt.a)(t=>new $e([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(ft.a)(r).pipe(te(r=>{const i=n.children[r],o=ir(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(Rt.a)(t=>({segment:t,outlet:r})))}),Bt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Qt((e,n)=>t(e,n,r)):he.a,ee(1),n?ue(e):ie(()=>new jt))}())}expandSegment(t,e,n,r,i,o){return Object(ft.a)(n).pipe(te(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe($t(t=>{if(t instanceof hr)return Object(dt.a)(null);throw t}))),fe(t=>!!t),$t((t,n)=>{if(t instanceof jt||"EmptyError"===t.name){if(lr(e,r,i))return Object(dt.a)(new $e([],{}));throw new hr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return cr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):dr(e):dr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?pr(i):this.lineralizeSegments(n,i).pipe(Object(Zt.a)(n=>{const i=new $e(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=sr(e,r,i);if(!s)return dr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?pr(l):this.lineralizeSegments(r,l).pipe(Object(Zt.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Rt.a)(t=>(n._loadedConfig=t,new $e(r,{})))):Object(dt.a)(new $e(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=sr(e,n,r);if(!o)return dr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Zt.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=ar(e,s,u,o),l=new $e(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(Rt.a)(t=>new $e(s,t)));if(0===o.length&&0===c.length)return Object(dt.a)(new $e(s,{}));const h=rr(n)===i;return this.expandSegment(r,l,o,c,h?Re:i,!0).pipe(Object(Rt.a)(t=>new $e(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(dt.a)(new Qn(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(dt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Zt.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Rt.a)(t=>(e._loadedConfig=t,t))):function(t){return new Et.a(e=>e.error(Le(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(dt.a)(new Qn([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(dt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Yn(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Yn(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Be(o)});return Object(dt.a)(i).pipe(Jn(),Object(de.a)(t=>{if(!Kn(t))return;const e=Le(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Rt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(dt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return gr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Ke(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ze(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return ze(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new $e(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function vr(t){const e={};for(const n of Object.keys(t.children)){const r=vr(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new $e(t.segments.concat(e.segments),e.children)}return t}(new $e(t.segments,e))}class mr{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class br{constructor(t,e){this.component=t,this.route=e}}function _r(t,e,n){const r=t._root;return Or(r,e?e._root:null,n,[r.value])}function wr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Or(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=_n(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Xe(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Xe(t.url,e.url)||!Ue(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!An(t,e)||!Ue(t.queryParams,e.queryParams);case"paramsChange":default:return!An(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new mr(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Or(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new br(a.outlet.component,s))}else s&&Er(e,a,i),i.canActivateChecks.push(new mr(r)),Or(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),ze(o,(t,e)=>Er(t,n.getContext(e),i)),i}function Er(t,e,n){const r=_n(t),i=t.value;ze(r,(t,r)=>{Er(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new br(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Cr{}function Sr(t){return new Et.a(e=>e.error(t))}class Ir{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=ar(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Re);if(null===e)return null;const n=new Sn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Re,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new bn(n,e),i=new In(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Cn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=ir(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!Tr(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Re?-1:e.value.outlet===Re?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return lr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!cr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?He(n).parameters:{};i=new Sn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ar(t),rr(t),t.component,t,xr(e),jr(e)+n.length,Nr(t))}else{const r=sr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Sn(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ar(t),rr(t),t.component,t,xr(e),jr(e)+o.length,Nr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=ar(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new bn(i,t)]}if(0===a.length&&0===c.length)return[new bn(i,[])];const l=rr(t)===r,h=this.processSegment(a,u,c,l?Re:r);return null===h?null:[new bn(i,h)]}}function Tr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function xr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function jr(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ar(t){return t.data||{}}function Nr(t){return t.resolve||{}}function kr(t){return Mt(e=>{const n=t(e);return n?Object(ft.a)(n).pipe(Object(Rt.a)(()=>e)):Object(dt.a)(e)})}class Pr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Rr=new r.q("ROUTES");class Dr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Rt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new Qn(qe(r.injector.get(Rr)).map(nr),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(ft.a)(this.loader.load(t)):Be(t()).pipe(Object(Zt.a)(t=>t instanceof r.v?Object(dt.a)(t):Object(ft.a)(this.compiler.compileModuleAsync(t))))}}class Mr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Lr,this.attachRef=null}}class Lr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Mr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Fr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Ur(t){throw t}function Vr(t,e,n){return e.parse("/")}function qr(t,e){return Object(dt.a)(null)}let Hr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new pt.a,this.errorHandler=Ur,this.malformedUriErrorHandler=Vr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qr,afterPreactivation:qr},this.urlHandlingStrategy=new Fr,this.routeReuseStrategy=new Pr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.x),this.console=o.get(r.W);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z&&r.z.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Ke(new $e([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Dr(s,a,t=>this.triggerEvent(new Te(t)),t=>this.triggerEvent(new xe(t))),this.routerState=On(this.currentUrlTree,this.rootComponentType),this.transitions=new yt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Qt(t=>0!==t.id),Object(Rt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Mt(t=>{let n=!1,r=!1;return Object(dt.a)(t).pipe(Object(de.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Mt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(dt.a)(t).pipe(Mt(t=>{const n=this.transitions.getValue();return e.next(new me(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?kt.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Mt(t=>function(t,e,n,r,i){return new yr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Rt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(de.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Zt.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Ir(t,e,n,r,i,o).recognize();return null===s?Sr(new Cr):Object(dt.a)(s)}catch(Eb){return Sr(Eb)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Rt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(de.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Oe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new me(n,this.serializeUrl(r),i,o);e.next(a);const u=On(r,this.rootComponentType).snapshot;return Object(dt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),kt.a}),kr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(de.a)(t=>{const e=new Ee(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Rt.a)(t=>Object.assign(Object.assign({},t),{guards:_r(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Zt.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(dt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(ft.a)(t).pipe(Object(Zt.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(dt.a)(!0);const s=o.map(o=>{const s=wr(o,e,i);let a;if(function(t){return t&&Yn(t.canDeactivate)}(s))a=Be(s.canDeactivate(t,e,n,r));else{if(!Yn(s))throw new Error("Invalid CanDeactivate guard");a=Be(s(t,e,n,r))}return a.pipe(fe())});return Object(dt.a)(s).pipe(Jn())}(t.component,t.route,n,e,r)),fe(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Zt.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(ft.a)(e).pipe(te(e=>Nt(function(t,e){return null!==t&&e&&e(new je(t)),Object(dt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Ne(t)),Object(dt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Pt(()=>{const i=e.guards.map(i=>{const o=wr(i,e.node,n);let s;if(function(t){return t&&Yn(t.canActivateChild)}(o))s=Be(o.canActivateChild(r,t));else{if(!Yn(o))throw new Error("Invalid CanActivateChild guard");s=Be(o(r,t))}return s.pipe(fe())});return Object(dt.a)(i).pipe(Jn())}));return Object(dt.a)(i).pipe(Jn())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(dt.a)(!0);const i=r.map(r=>Pt(()=>{const i=wr(r,e,n);let o;if(function(t){return t&&Yn(t.canActivate)}(i))o=Be(i.canActivate(e,t));else{if(!Yn(i))throw new Error("Invalid CanActivate guard");o=Be(i(e,t))}return o.pipe(fe())}));return Object(dt.a)(i).pipe(Jn())}(t,e.route,n))),fe(t=>!0!==t,!0))}(r,o,t,e):Object(dt.a)(n)),Object(Rt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(de.a)(t=>{if(Kn(t.guardsResult)){const e=Le(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Ce(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Qt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new _e(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),kr(t=>{if(t.guards.canActivateChecks.length)return Object(dt.a)(t).pipe(Object(de.a)(t=>{const e=new Se(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Mt(t=>{let n=!1;return Object(dt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Zt.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(dt.a)(t);let o=0;return Object(ft.a)(n).pipe(te(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(dt.a)({});const o={};return Object(ft.a)(i).pipe(Object(Zt.a)(i=>function(t,e,n,r){const i=wr(t,e,r);return Be(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(de.a)(t=>{o[i]=t}))),ee(1),Object(Zt.a)(()=>Object.keys(o).length===i.length?Object(dt.a)(o):kt.a))}(t._resolve,t,e,r).pipe(Object(Rt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Cn(t,n).resolve),null)))}(t.route,e,r,i)),Object(de.a)(()=>o++),ee(1),Object(Zt.a)(e=>o===n.length?Object(dt.a)(t):kt.a))})),Object(de.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new _e(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(de.a)(t=>{const e=new Ie(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),kr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Rt.a)(t=>{const e=function(t,e,n){const r=Nn(t,e._root,n?n._root:void 0);return new wn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(de.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Rt.a)(t=>(new Gn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(de.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new _e(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new ge(i))),$t(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Kn(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new _e(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new we(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Gl){t.reject(Gl)}}var i;return kt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Zn(t),this.config=t.map(nr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Dn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Ln(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return ze(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Ln(n,e,r)}(n);if(o.toRoot())return Dn(e.root,new $e([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Fn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Fn(t,t===e.root,0)}const r=Pn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Fn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Vn(s.segmentGroup,s.index,o.commands):Un(s.segmentGroup,s.index,o.commands);return Dn(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Kn(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Eb){e=this.malformedUriErrorHandler(Eb,this.urlSerializer,t)}return e}isActive(t,e){if(Kn(t))return Ge(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Ge(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new be(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.M),r.Jb(Ze),r.Jb(Lr),r.Jb(O),r.Jb(r.r),r.Jb(r.w),r.Jb(r.i),r.Jb(void 0))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),zr=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Re,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Br(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Lr),r.Eb(r.P),r.Eb(r.j),r.Kb("name"),r.Eb(r.h))},t.\u0275dir=r.zb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class Br{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===En?this.route:t===Lr?this.childContexts:this.parent.get(t,e)}}class Gr{}class Wr{preload(t,e){return Object(dt.a)(null)}}let Qr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Dr(e,n,e=>t.triggerEvent(new Te(e)),e=>t.triggerEvent(new xe(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qt(t=>t instanceof be),te(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(ft.a)(n).pipe(Object(At.a)(),Object(Rt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(Zt.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Hr),r.Jb(r.w),r.Jb(r.i),r.Jb(r.r),r.Jb(Gr))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})(),Yr=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof me?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof be&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Pe&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Pe(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Hr),r.Jb(R),r.Jb(void 0))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();const Kr=new r.q("ROUTER_CONFIGURATION"),$r=new r.q("ROUTER_FORROOT_GUARD"),Jr=[O,{provide:Ze,useClass:tn},{provide:Hr,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new Hr(null,t,e,n,r,i,o,qe(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Ze,Lr,O,r.r,r.w,r.i,Rr,Kr,[class{},new r.A],[class{},new r.A]]},Lr,{provide:En,useFactory:function(t){return t.routerState.root},deps:[Hr]},{provide:r.w,useClass:r.J},Qr,Wr,class{preload(t,e){return e().pipe($t(()=>Object(dt.a)(null)))}},{provide:Kr,useValue:{enableTracing:!1}}];function Xr(){return new r.y("Router",Hr)}let Zr=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Jr,ri(e),{provide:$r,useFactory:ni,deps:[[Hr,new r.A,new r.I]]},{provide:Kr,useValue:n||{}},{provide:v,useFactory:ei,deps:[u,[new r.p(b),new r.A],Kr]},{provide:Yr,useFactory:ti,deps:[Hr,R,Kr]},{provide:Gr,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Wr},{provide:r.y,multi:!0,useFactory:Xr},[ii,{provide:r.d,multi:!0,useFactory:oi,deps:[ii]},{provide:ai,useFactory:si,deps:[ii]},{provide:r.b,multi:!0,useExisting:ai}]]}}static forChild(e){return{ngModule:t,providers:[ri(e)]}}}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)(r.Jb($r,8),r.Jb(Hr,8))}}),t})();function ti(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Yr(t,e,n)}function ei(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function ni(t){return"guarded"}function ri(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Rr,multi:!0,useValue:t}]}let ii=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new pt.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Hr),r=this.injector.get(Kr);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(dt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Kr),n=this.injector.get(Qr),i=this.injector.get(Yr),o=this.injector.get(Hr),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(r.r))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac}),t})();function oi(t){return t.appInitializer.bind(t)}function si(t){return t.bootstrapListener.bind(t)}const ai=new r.q("Router Initializer"),ui=[];let ci=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},imports:[[Zr.forRoot(ui)],Zr]}),t})();var li=n("D0XW"),hi=n("VRyK"),fi=n("w1tV");function di(t,e){return n=>n.lift(new pi(t,e))}class pi{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new gi(t,this.compare,this.keySelector))}}class gi extends bt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class yi{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new vi(t,this.observables,this.project))}}class vi extends _t{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Ct(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class mi{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new bi(t,this.predicate))}}class bi extends bt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var _i=n("spgP"),wi=(n("6Uf2"),n("pxpQ")),Oi=n("qgXg"),Ei=n("Ylt2");class Ci extends pt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Si(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new gt.a;if(this.isStopped||this.hasError?o=pe.a.EMPTY:(this.observers.push(t),o=new Ei.a(this,t)),r&&t.add(t=new wi.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Oi.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Si{constructor(t,e){this.time=t,this.value=e}}function Ii(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Ci(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Ti(t,e){return e?Mt(()=>t,e):Mt(()=>t)}var xi=n("tf+s");const ji=new r.q("angularfire2.auth.use-emulator"),Ai=new r.q("angularfire2.auth.settings"),Ni=new r.q("angularfire2.auth.tenant-id"),ki=new r.q("angularfire2.auth.langugage-code"),Pi=new r.q("angularfire2.auth.use-device-language"),Ri=new r.q("angularfire.auth.persistence");let Di=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new _i.d(i),f=Object(_i.h)(h),d=new pt.a,p=Object(dt.a)(void 0).pipe(Object(wi.b)(h.outsideAngular),Mt(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(Rt.a)(()=>Object(_i.g)(t,i,e)),Object(Rt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(_i.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Ii({bufferSize:1,refCount:!1}));if(P(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(dt.a)(null);else{p.pipe(fe()).subscribe();const t=p.pipe(Mt(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Ii({bufferSize:1,refCount:!1})),e=t=>new Et.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Mt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Mt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Ti(n),Object(xi.a)(h.outsideAngular),Object(wi.b)(h.insideAngular)),this.user=t.pipe(Ti(r),Object(xi.a)(h.outsideAngular),Object(wi.b)(h.insideAngular)),this.idToken=this.user.pipe(Mt(t=>t?Object(ft.a)(t.getIdToken()):Object(dt.a)(null))),this.idTokenResult=this.user.pipe(Mt(t=>t?Object(ft.a)(t.getIdTokenResult()):Object(dt.a)(null))),this.credential=Object(hi.a)(t,d,this.authState.pipe(Qt(t=>!t))).pipe(Object(Rt.a)(t=>(null==t?void 0:t.user)?t:null),Object(xi.a)(h.outsideAngular),Object(wi.b)(h.insideAngular))}return Object(_i.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(_i.c),r.Jb(_i.b,8),r.Jb(r.B),r.Jb(r.z),r.Jb(ji,8),r.Jb(Ai,8),r.Jb(Ni,8),r.Jb(ki,8),r.Jb(Pi,8),r.Jb(Ri,8))},t.\u0275prov=Object(r.Ab)({factory:function(){return new t(Object(r.Jb)(_i.c),Object(r.Jb)(_i.b,8),Object(r.Jb)(r.B),Object(r.Jb)(r.z),Object(r.Jb)(ji,8),Object(r.Jb)(Ai,8),Object(r.Jb)(Ni,8),Object(r.Jb)(ki,8),Object(r.Jb)(Pi,8),Object(r.Jb)(Ri,8))},token:t,providedIn:"any"}),t})();Object(_i.e)(Di,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var Mi=n("Jgta");function Li(t){return null==t}function Fi(t){return"function"==typeof t.set}function Ui(t,e){return Fi(e)?e:t.ref(e)}function Vi(t,e){if("string"==typeof t)return e.stringCase();if(Fi(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function qi(t,e,n="on",r=li.a){return new Et.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(Rt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(fi.a)())}function Hi(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function zi(t,e){const{payload:n,prevKey:r,key:i}=e,o=Hi(t,i),s=function(t,e){if(Li(e))return 0;{const n=Hi(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Bi(t){return(Li(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Gi(t,e,n){return function(t,e,n){return qi(t,"value","once",n).pipe(Mt(r=>{const i=[Object(dt.a)(r)];return e.forEach(e=>i.push(qi(t,e,"on",n))),Object(hi.a)(...i).pipe(Bt(zi,[]))}),di())}(t,e=Bi(e),n)}function Wi(t,e,n){const r=(e=Bi(e)).map(e=>qi(t,e,"on",n));return Object(hi.a)(...r)}function Qi(t,e){return function(n,r){return Vi(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Yi(t,e){return function(){return qi(t,"value","on",e)}}const Ki=new r.q("angularfire2.realtimeDatabaseURL"),$i=new r.q("angularfire2.database.use-emulator");let Ji=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new _i.d(i),this.keepUnstableUntilFirst=Object(_i.h)(this.schedulers);const a=o,u=Object(_i.g)(t,i,e);!Mi.a.auth&&s&&Object(_i.j)(),this.database=Object(_i.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Ui(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Qi(r,"update"),set:Qi(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Vi(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Gi(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Wi(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return qi(t,"value","on",e).pipe(Object(Rt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new yi(t,n))}}(e),Object(Rt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new mi(r))),Object(Rt.a)(t=>t.actions));var r}(t,Wi(t,e).pipe(Bt((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Gi(t,r,n).pipe(Object(Rt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Ui(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Yi(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Yi(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(Rt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(_i.c),r.Jb(_i.b,8),r.Jb(Ki,8),r.Jb(r.B),r.Jb(r.z),r.Jb($i,8),r.Jb(ji,8))},t.\u0275prov=Object(r.Ab)({factory:function(){return new t(Object(r.Jb)(_i.c),Object(r.Jb)(_i.b,8),Object(r.Jb)(Ki,8),Object(r.Jb)(r.B),Object(r.Jb)(r.z),Object(r.Jb)($i,8),Object(r.Jb)(ji,8))},token:t,providedIn:"any"}),t})(),Xi=(()=>{class t{}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[Ji]}),t})(),Zi=(()=>{class t{constructor(t){this.angularFireDatabase=t}getAll(){return this.todos=this.angularFireDatabase.list("/menuitems"),this.todos}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(Ji))},t.\u0275prov=r.Ab({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function to(t,e){if(1&t&&(r.Pb(),r.Ob(),r.Hb(0,"div"),r.Vb(1),r.Gb()),2&t){const t=e.$implicit;r.vb(1),r.Wb(" ",t,"\n")}}let eo=(()=>{class t{constructor(t){this.testService=t,this.title="deiva-portfolio",this.data=[]}ngOnInit(){this.testService.getAll().snapshotChanges().subscribe(t=>{t.forEach(t=>{this.data.push(t.payload.toJSON())})})}}return t.\u0275fac=function(e){return new(e||t)(r.Eb(Zi))},t.\u0275cmp=r.yb({type:t,selectors:[["app-root"]],decls:11,vars:1,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"spacer"],["aria-label","Angular on twitter","target","_blank","rel","noopener","href","https://twitter.com/angular","title","Twitter"],["id","twitter-logo","height","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 400 400"],["width","400","height","400","fill","none"],["d","M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23","fill","#fff"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(r.Hb(0,"div",0),r.Fb(1,"img",1),r.Hb(2,"span"),r.Vb(3,"Welcome"),r.Gb(),r.Fb(4,"div",2),r.Hb(5,"a",3),r.Pb(),r.Hb(6,"svg",4),r.Fb(7,"rect",5),r.Fb(8,"path",6),r.Gb(),r.Gb(),r.Gb(),r.Ub(9,to,2,1,"div",7),r.Ob(),r.Fb(10,"router-outlet")),2&t&&(r.vb(9),r.Qb("ngForOf",e.data))},directives:[A,zr],styles:["",'[_nghost-%COMP%] {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%] {\n    margin: 8px 0;\n  }\n\n  p[_ngcontent-%COMP%] {\n    margin: 0;\n  }\n\n  .spacer[_ngcontent-%COMP%] {\n    flex: 1;\n  }\n\n  .toolbar[_ngcontent-%COMP%] {\n    position: relative;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover {\n    opacity: 0.8;\n  }\n\n  .content[_ngcontent-%COMP%] {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%] {\n    height: 24px;\n    width: auto;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: #888;\n  }\n\n  .card-container[_ngcontent-%COMP%] {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card[_ngcontent-%COMP%] {\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card) {\n    cursor: pointer;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover {\n    transform: translateY(-3px);\n    box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: rgb(105, 103, 103);\n  }\n\n  .card.highlight-card[_ngcontent-%COMP%] {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  .card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n    margin-left: 60px;\n  }\n\n  svg#rocket[_ngcontent-%COMP%] {\n    width: 80px;\n    position: absolute;\n    left: -10px;\n    top: -24px;\n  }\n\n  svg#rocket-smoke[_ngcontent-%COMP%] {\n    height: calc(100vh - 95px);\n    position: absolute;\n    top: 10px;\n    right: 180px;\n    z-index: -10;\n  }\n\n  a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a[_ngcontent-%COMP%]:hover {\n    color: #125699;\n  }\n\n  .terminal[_ngcontent-%COMP%] {\n    position: relative;\n    width: 80%;\n    max-width: 600px;\n    border-radius: 6px;\n    padding-top: 45px;\n    margin-top: 8px;\n    overflow: hidden;\n    background-color: rgb(15, 15, 16);\n  }\n\n  .terminal[_ngcontent-%COMP%]::before {\n    content: "\\2022 \\2022 \\2022";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 4px;\n    background: rgb(58, 58, 58);\n    color: #c2c3c4;\n    width: 100%;\n    font-size: 2rem;\n    line-height: 0;\n    padding: 14px 0;\n    text-indent: 4px;\n  }\n\n  .terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%] {\n    font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;\n    color: white;\n    padding: 0 1rem 1rem;\n    margin: 0;\n  }\n\n  .circle-link[_ngcontent-%COMP%] {\n    height: 40px;\n    width: 40px;\n    border-radius: 40px;\n    margin: 8px;\n    background-color: white;\n    border: 1px solid #eeeeee;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    transition: 1s ease-out;\n  }\n\n  .circle-link[_ngcontent-%COMP%]:hover {\n    transform: translateY(-0.25rem);\n    box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n  }\n\n  footer[_ngcontent-%COMP%] {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n  footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%] {\n    color: #24292e;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 3px 10px;\n    border: 1px solid rgba(27,31,35,.2);\n    border-radius: 3px;\n    background-image: linear-gradient(-180deg,#fafbfc,#eff3f6 90%);\n    margin-left: 4px;\n    font-weight: 600;\n    font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]:hover {\n    background-image: linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);\n    border-color: rgba(27,31,35,.35);\n    background-position: -.5em;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 16px;\n    margin-right: 4px;\n  }\n\n  svg#clouds[_ngcontent-%COMP%] {\n    position: fixed;\n    bottom: -160px;\n    left: -230px;\n    z-index: -10;\n    width: 1920px;\n  }\n\n\n  \n  @media screen and (max-width: 767px) {\n\n    .card-container[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%] {\n      width: 100%;\n    }\n\n    .card[_ngcontent-%COMP%]:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n      margin-left: 72px;\n    }\n\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      display: none;\n      visibility: hidden;\n    }\n  }']}),t})();function no(){return t=>t.lift(new ro)}class ro{call(t,e){return e.subscribe(new io(t))}}class io extends bt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var oo=n("zIRd"),so=n("q/0M"),ao=n("qOnz"),uo=function(t,e){return(uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function co(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var lo,ho="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fo=fo||{},po=ho||self;function go(){}function yo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function vo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var mo="closure_uid_"+(1e9*Math.random()>>>0),bo=0;function _o(t,e,n){return t.call.apply(t.bind,arguments)}function wo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Oo(t,e,n){return(Oo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_o:wo).apply(null,arguments)}function Eo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Co(){return Date.now()}function So(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Io(){this.j=this.j,this.i=this.i}Io.prototype.j=!1,Io.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,mo)&&t[mo]||(t[mo]=++bo)}(this)},Io.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var To=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},xo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function jo(t){return Array.prototype.concat.apply([],arguments)}function Ao(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function No(t){return/^[\s\xa0]*$/.test(t)}var ko,Po=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ro(t,e){return-1!=t.indexOf(e)}function Do(t,e){return t<e?-1:t>e?1:0}t:{var Mo=po.navigator;if(Mo){var Lo=Mo.userAgent;if(Lo){ko=Lo;break t}}ko=""}function Fo(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Uo(t){var e={};for(var n in t)e[n]=t[n];return e}var Vo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qo(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Vo.length;o++)n=Vo[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ho(t){return Ho[" "](t),t}Ho[" "]=go;var zo,Bo,Go=Ro(ko,"Opera"),Wo=Ro(ko,"Trident")||Ro(ko,"MSIE"),Qo=Ro(ko,"Edge"),Yo=Qo||Wo,Ko=Ro(ko,"Gecko")&&!(Ro(ko.toLowerCase(),"webkit")&&!Ro(ko,"Edge"))&&!(Ro(ko,"Trident")||Ro(ko,"MSIE"))&&!Ro(ko,"Edge"),$o=Ro(ko.toLowerCase(),"webkit")&&!Ro(ko,"Edge");function Jo(){var t=po.document;return t?t.documentMode:void 0}t:{var Xo="",Zo=(Bo=ko,Ko?/rv:([^\);]+)(\)|;)/.exec(Bo):Qo?/Edge\/([\d\.]+)/.exec(Bo):Wo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Bo):$o?/WebKit\/(\S+)/.exec(Bo):Go?/(?:Version)[ \/]?(\S+)/.exec(Bo):void 0);if(Zo&&(Xo=Zo?Zo[1]:""),Wo){var ts=Jo();if(null!=ts&&ts>parseFloat(Xo)){zo=String(ts);break t}}zo=Xo}var es={};function ns(t){return function(t,e){var n=es;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Po(String(zo)).split("."),r=Po(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Do(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Do(0==s[2].length,0==a[2].length)||Do(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var rs=po.document&&Wo&&(Jo()||parseInt(zo,10))||void 0,is=!Wo||9<=Number(rs),os=Wo&&!ns("9"),ss=function(){if(!po.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{po.addEventListener("test",go,e),po.removeEventListener("test",go,e)}catch(n){}return t}();function as(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function us(t,e){if(as.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ko){t:{try{Ho(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:cs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}as.prototype.b=function(){this.defaultPrevented=!0},So(us,as);var cs={2:"touch",3:"pen",4:"mouse"};us.prototype.b=function(){us.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,os)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ls="closure_listenable_"+(1e6*Math.random()|0),hs=0;function fs(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++hs,this.Y=this.Z=!1}function ds(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ps(t){this.src=t,this.a={},this.b=0}function gs(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=To(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ds(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ys(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ps.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ys(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new fs(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var vs="closure_lm_"+(1e6*Math.random()|0),ms={};function bs(t,e,n,r,i){if(r&&r.once)return ws(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)bs(t,e[o],n,r,i);return null}return n=js(n),t&&t[ls]?t.va(e,n,vo(r)?!!r.capture:!!r,i):_s(t,e,n,!1,r,i)}function _s(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=vo(i)?!!i.capture:!!i;if(s&&!is)return null;var a=Ts(t);if(a||(t[vs]=a=new ps(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Is,e=is?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ss||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Cs(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ws(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ws(t,e[o],n,r,i);return null}return n=js(n),t&&t[ls]?t.wa(e,n,vo(r)?!!r.capture:!!r,i):_s(t,e,n,!0,r,i)}function Os(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Os(t,e[o],n,r,i);else r=vo(r)?!!r.capture:!!r,n=js(n),t&&t[ls]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ys(o=t.a[e],n,r,i))&&(ds(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Ts(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ys(e,n,r,i)),(n=-1<t?e[t]:null)&&Es(n))}function Es(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ls])gs(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Cs(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ts(e))?(gs(n,t),0==n.b&&(n.src=null,e[vs]=null)):ds(t)}}}function Cs(t){return t in ms?ms[t]:ms[t]="on"+t}function Ss(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Es(t),n.call(r,e)}function Is(t,e){if(t.Y)return!0;if(!is){if(!e)t:{e=["window","event"];for(var n=po,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ss(t,e=new us(e,this))}return Ss(t,new us(e,this))}function Ts(t){return(t=t[vs])instanceof ps?t:null}var xs="__closure_events_fn_"+(1e9*Math.random()>>>0);function js(t){return"function"==typeof t?t:(t[xs]||(t[xs]=function(e){return t.handleEvent(e)}),t[xs])}function As(){Io.call(this),this.c=new ps(this),this.J=this,this.C=null}function Ns(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new as(e,t);else if(e instanceof as)e.target=e.target||t;else{var i=e;qo(e=new as(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=ks(s,r,!0,e)&&i}if(i=ks(s=e.a=t,r,!0,e)&&i,i=ks(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ks(s=e.a=n[o],r,!1,e)&&i}function ks(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&gs(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}So(As,Io),As.prototype[ls]=!0,(lo=As.prototype).addEventListener=function(t,e,n,r){bs(this,t,e,n,r)},lo.removeEventListener=function(t,e,n,r){Os(this,t,e,n,r)},lo.G=function(){if(As.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ds(n[r]);delete e.a[t],e.b--}}this.C=null},lo.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},lo.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ps=po.JSON.stringify;function Rs(){this.b=this.a=null}var Ds,Ms=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Fs},function(t){t.reset()});function Ls(){var t=Hs,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Fs(){this.next=this.b=this.a=null}function Us(t){po.setTimeout(function(){throw t},0)}function Vs(t,e){Ds||function(){var t=po.Promise.resolve(void 0);Ds=function(){t.then(zs)}}(),qs||(Ds(),qs=!0),Hs.add(t,e)}Rs.prototype.add=function(t,e){var n=Ms.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Fs.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Fs.prototype.reset=function(){this.next=this.b=this.a=null};var qs=!1,Hs=new Rs;function zs(){for(var t;t=Ls();){try{t.a.call(t.b)}catch(n){Us(n)}var e=Ms;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}qs=!1}function Bs(t,e){As.call(this),this.b=t||1,this.a=e||po,this.f=Oo(this.Za,this),this.g=Co()}function Gs(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ws(t,e,n){if("function"==typeof t)n&&(t=Oo(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Oo(t.handleEvent,t)}return 2147483647<Number(e)?-1:po.setTimeout(t,e||0)}function Qs(t){t.a=Ws(function(){t.a=null,t.c&&(t.c=!1,Qs(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}So(Bs,As),(lo=Bs.prototype).aa=!1,lo.M=null,lo.Za=function(){if(this.aa){var t=Co()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ns(this,"tick"),this.aa&&(Gs(this),this.start()))}},lo.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Co())},lo.G=function(){Bs.X.G.call(this),Gs(this),delete this.a};var Ys=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}uo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Qs(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(po.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Io);function Ks(t){Io.call(this),this.b=t,this.a={}}So(Ks,Io);var $s=[];function Js(t,e,n,r){Array.isArray(n)||(n&&($s[0]=n.toString()),n=$s);for(var i=0;i<n.length;i++){var o=bs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Xs(t){Fo(t.a,function(t,e){this.a.hasOwnProperty(e)&&Es(t)},t),t.a={}}function Zs(){this.a=!0}function ta(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ps(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Ks.prototype.G=function(){Ks.X.G.call(this),Xs(this)},Ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zs.prototype.info=function(){};var ea={},na=null;function ra(){return na=na||new As}function ia(t){as.call(this,ea.Fa,t)}function oa(t){var e=ra();Ns(e,new ia(e,t))}function sa(t,e){as.call(this,ea.STAT_EVENT,t),this.stat=e}function aa(t){var e=ra();Ns(e,new sa(e,t))}function ua(t){as.call(this,ea.Ga,t)}function ca(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return po.setTimeout(function(){t()},e)}ea.Fa="serverreachability",So(ia,as),ea.STAT_EVENT="statevent",So(sa,as),ea.Ga="timingevent",So(ua,as);var la={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ha={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function fa(){}function da(){}fa.prototype.a=null;var pa,ga={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ya(){as.call(this,"d")}function va(){as.call(this,"c")}function ma(){}function ba(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ks(this),this.P=_a,this.R=new Bs(t=Yo?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}So(ya,as),So(va,as),So(ma,fa),pa=new ma;var _a=45e3,wa={},Oa={};function Ea(t,e,n){t.H=1,t.i=Ga(Ua(e)),t.j=n,t.I=!0,Ca(t,null)}function Ca(t,e){t.u=Co(),Ta(t),t.l=Ua(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),iu(n.b,"t",r),t.D=0,t.a=Xu(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ys(Oo(t.Ca,t,t.a),t.O)),Js(t.J,t.a,"readystatechange",t.Xa),e=t.B?Uo(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),oa(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Sa(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ia(t,n);if(i==Oa){4==e&&(t.h=4,aa(14),r=!1),ta(t.c,t.f,null,"[Incomplete Response]");break}if(i==wa){t.h=4,aa(15),ta(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ta(t.c,t.f,i,null),ka(t,i)}4==e&&0==n.length&&(t.h=1,aa(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bu(e),e.F=!0,aa(11))):(ta(t.c,t.f,n,"[Invalid Chunked Response]"),Na(t),Aa(t))}function Ia(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Oa:(n=Number(e.substring(n,r)),isNaN(n)?wa:(r+=1)+n>e.length?Oa:(e=e.substr(r,n),t.D=r+n,e))}function Ta(t){t.T=Co()+t.P,xa(t,t.P)}function xa(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ca(Oo(t.Va,t),e)}function ja(t){t.o&&(po.clearTimeout(t.o),t.o=null)}function Aa(t){0==t.g.v||t.A||Qu(t.g,t)}function Na(t){ja(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Gs(t.R),Xs(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ka(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||hu(n.b,t)))if(n.I=t.N,!t.C&&hu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Mm){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Wu(n),Du(n)}zu(n),aa(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ca(Oo(n.Sa,n),6e3));if(1>=lu(n.b)&&n.ea){try{n.ea()}catch(Mm){}n.ea=void 0}}else Ku(n,11)}else if((t.C||n.a==t)&&Wu(n),!No(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Ro(l,"spdy")||Ro(l,"quic")||Ro(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(fu(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ba(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Co()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Ju(u,u.C?u.ga:null,u.fa),d.C){du(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(ja(p),Ta(p)),u.a=d}else Hu(u);0<n.g.length&&Fu(n)}else"stop"!=i[0]&&"close"!=i[0]||Ku(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Ku(n,7):Ru(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);oa(4)}catch(Mm){}}function Pa(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(yo(t)||"string"==typeof t)xo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(yo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(yo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ra(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ra)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Da(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ma(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ma(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ma(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(lo=ba.prototype).setTimeout=function(t){this.P=t},lo.Xa=function(t){t=t.target;var e=this.F;e&&3==Au(t)?e.f():this.Ca(t)},lo.Ca=function(t){try{if(t==this.a)t:{var e=Au(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Yo&&!this.a.$())){this.A||4!=e||7==n||oa(8==n||0>=r?3:2),ja(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!No(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,aa(12),Na(this),Aa(this);break t}ta(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ka(this,u)}this.I?(Sa(this,e,o),Yo&&this.b&&3==e&&(Js(this.J,this.R,"tick",this.Wa),this.R.start())):(ta(this.c,this.f,o,null),ka(this,o)),4==e&&Na(this),this.b&&!this.A&&(4==e?Qu(this.g,this):(this.b=!1,Ta(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,aa(12)):(this.h=0,aa(13)),Na(this),Aa(this)}}}catch(c){}},lo.Wa=function(){if(this.a){var t=Au(this.a),e=this.a.$();this.D<e.length&&(ja(this),Sa(this,t,e),this.b&&4!=t&&Ta(this))}},lo.cancel=function(){this.A=!0,Na(this)},lo.Va=function(){this.o=null;var t=Co();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(oa(3),aa(17)),Na(this),this.h=2,Aa(this)):xa(this,this.T-t)},(lo=Ra.prototype).K=function(){Da(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},lo.L=function(){return Da(this),this.a.concat()},lo.get=function(t,e){return Ma(this.b,t)?this.b[t]:e},lo.set=function(t,e){Ma(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},lo.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var La=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fa(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Fa){this.a=void 0!==e?e:t.a,Va(this,t.f),this.j=t.j,qa(this,t.c),Ha(this,t.h),this.g=t.g,e=t.b;var n=new tu;n.c=e.c,e.a&&(n.a=new Ra(e.a),n.b=e.b),za(this,n),this.i=t.i}else t&&(n=String(t).match(La))?(this.a=!!e,Va(this,n[1]||"",!0),this.j=Wa(n[2]||""),qa(this,n[3]||"",!0),Ha(this,n[4]),this.g=Wa(n[5]||"",!0),za(this,n[6]||"",!0),this.i=Wa(n[7]||"")):(this.a=!!e,this.b=new tu(null,this.a))}function Ua(t){return new Fa(t)}function Va(t,e,n){t.f=n?Wa(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function qa(t,e,n){t.c=n?Wa(e,!0):e}function Ha(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function za(t,e,n){e instanceof tu?(t.b=e,function(t,e){e&&!t.f&&(eu(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(nu(this,e),iu(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Qa(e,Xa)),t.b=new tu(e,t.a))}function Ba(t,e,n){t.b.set(e,n)}function Ga(t){return Ba(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Co()).toString(36)),t}function Wa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Qa(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ya),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ya(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fa.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Qa(e,Ka,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Qa(e,Ka,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Qa(n,"/"==n.charAt(0)?Ja:$a,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Qa(n,Za)),t.join("")};var Ka=/[#\/\?@]/g,$a=/[#\?:]/g,Ja=/[#\?]/g,Xa=/[#\?@]/g,Za=/#/g;function tu(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function eu(t){t.a||(t.a=new Ra,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function nu(t,e){eu(t),e=ou(t,e),Ma(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ma((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Da(t)))}function ru(t,e){return eu(t),e=ou(t,e),Ma(t.a.b,e)}function iu(t,e,n){nu(t,e),0<n.length&&(t.c=null,t.a.set(ou(t,e),Ao(n)),t.b+=n.length)}function ou(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(lo=tu.prototype).add=function(t,e){eu(this),this.c=null,t=ou(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},lo.forEach=function(t,e){eu(this),this.a.forEach(function(n,r){xo(n,function(n){t.call(e,n,r,this)},this)},this)},lo.L=function(){eu(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},lo.K=function(t){eu(this);var e=[];if("string"==typeof t)ru(this,t)&&(e=jo(e,this.a.get(ou(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=jo(e,t[n])}return e},lo.set=function(t,e){return eu(this),this.c=null,ru(this,t=ou(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},lo.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},lo.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var su=function(){return function(t,e){this.b=t,this.a=e}}();function au(t){this.g=t||uu,t=po.PerformanceNavigationTiming?0<(t=po.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(po.ia&&po.ia.ya&&po.ia.ya()&&po.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var uu=10;function cu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function lu(t){return t.b?1:t.a?t.a.size:0}function hu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function fu(t,e){t.a?t.a.add(e):t.b=e}function du(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function pu(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=co(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ao(t.c)}function gu(){}function yu(){this.a=new gu}function vu(t,e,n){var r=n||"";try{Pa(t,function(t,n){var i=t;vo(t)&&(i=Ps(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Eb){throw e.push(r+"type="+encodeURIComponent("_badmap")),Eb}}function mu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}au.prototype.cancel=function(){var t,e;if(this.c=pu(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=co(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},gu.prototype.stringify=function(t){return po.JSON.stringify(t,void 0)},gu.prototype.parse=function(t){return po.JSON.parse(t,void 0)};var bu=po.JSON.parse;function _u(t){As.call(this),this.headers=new Ra,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=wu,this.D=this.F=!1}So(_u,As);var wu="",Ou=/^https?$/i,Eu=["POST","PUT"];function Cu(t){return"content-type"==t.toLowerCase()}function Su(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Iu(t),xu(t)}function Iu(t){t.u||(t.u=!0,Ns(t,"complete"),Ns(t,"error"))}function Tu(t){if(t.b&&void 0!==fo&&(!t.s[1]||4!=Au(t)||2!=t.W()))if(t.l&&4==Au(t))Ws(t.za,0,t);else if(Ns(t,"readystatechange"),4==Au(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(La)[1]||null;if(!o&&po.self&&po.self.location){var s=po.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ou.test(o?o.toLowerCase():"")}e=i}if(e)Ns(t,"complete"),Ns(t,"success");else{t.h=6;try{var a=2<Au(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Iu(t)}}finally{xu(t)}}}function xu(t,e){if(t.a){ju(t);var n=t.a,r=t.s[0]?go:null;t.a=null,t.s=null,e||Ns(t,"ready");try{n.onreadystatechange=r}catch(Eb){}}}function ju(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(po.clearTimeout(t.m),t.m=null)}function Au(t){return t.a?t.a.readyState:0}function Nu(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Fo(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ba(t,e,n))}function ku(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Pu(t){this.pa=0,this.g=[],this.c=new Zs,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=ku("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=ku("baseRetryDelayMs",5e3,t),this.Ra=ku("retryDelaySeedMs",1e4,t),this.Ma=ku("forwardChannelMaxRetries",2,t),this.ma=ku("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new au(t&&t.concurrentRequestLimit),this.ka=new yu,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Ru(t){if(Mu(t),3==t.v){var e=t.R++,n=Ua(t.B);Ba(n,"SID",t.J),Ba(n,"RID",e),Ba(n,"TYPE","terminate"),Vu(t,n),(e=new ba(t,t.c,e,void 0)).H=2,e.i=Ga(Ua(n)),n=!1,po.navigator&&po.navigator.sendBeacon&&(n=po.navigator.sendBeacon(e.i.toString(),"")),!n&&po.Image&&((new Image).src=e.i,n=!0),n||(e.a=Xu(e.g,null),e.a.ba(e.i)),e.u=Co(),Ta(e)}$u(t)}function Du(t){t.a&&(Bu(t),t.a.cancel(),t.a=null)}function Mu(t){Du(t),t.j&&(po.clearTimeout(t.j),t.j=null),Wu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&po.clearTimeout(t.h),t.h=null)}function Lu(t,e){t.g.push(new su(t.Oa++,e)),3==t.v&&Fu(t)}function Fu(t){cu(t.b)||t.h||(t.h=!0,Vs(t.Ba,t),t.u=0)}function Uu(t,e){var n;n=e?e.f:t.R++;var r=Ua(t.B);Ba(r,"SID",t.J),Ba(r,"RID",n),Ba(r,"AID",t.P),Vu(t,r),t.i&&t.l&&Nu(r,t.i,t.l),n=new ba(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=qu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),fu(t.b,n),Ea(n,r,e)}function Vu(t,e){t.f&&Pa({},function(t,n){Ba(e,n,t)})}function qu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Oo(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{vu(l,s,"req"+c+"_")}catch(Rc){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Hu(t){t.a||t.j||(t.T=1,Vs(t.Aa,t),t.o=0)}function zu(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=ca(Oo(t.Aa,t),Yu(t,t.o)),t.o++,0))}function Bu(t){null!=t.s&&(po.clearTimeout(t.s),t.s=null)}function Gu(t){t.a=new ba(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ua(t.la);Ba(e,"RID","rpc"),Ba(e,"SID",t.J),Ba(e,"CI",t.H?"0":"1"),Ba(e,"AID",t.P),Vu(t,e),Ba(e,"TYPE","xmlhttp"),t.i&&t.l&&Nu(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ga(Ua(e)),n.j=null,n.I=!0,Ca(n,t)}function Wu(t){null!=t.m&&(po.clearTimeout(t.m),t.m=null)}function Qu(t,e){var n=null;if(t.a==e){Wu(t),Bu(t),t.a=null;var r=2}else{if(!hu(t.b,e))return;n=e.s,du(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Co()-e.u;var i=t.u;Ns(r=ra(),new ua(r,n,e,i)),Fu(t)}else Hu(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(lu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ca(Oo(t.Ba,t,e),Yu(t,t.u)),t.u++,0)))}(t,e)||2==r&&zu(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ku(t,5);break;case 4:Ku(t,10);break;case 3:Ku(t,6);break;default:Ku(t,2)}}function Yu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ku(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Oo(t.Ya,t);n||(n=new Fa("//www.google.com/images/cleardot.gif"),po.location&&"http"==po.location.protocol||Va(n,"https"),Ga(n)),function(t,e){var n=new Zs;if(po.Image){var r=new Image;r.onload=Eo(mu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Eo(mu,n,r,"TestLoadImage: error",!1,e),r.onabort=Eo(mu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Eo(mu,n,r,"TestLoadImage: timeout",!1,e),po.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else aa(2);t.v=0,t.f&&t.f.ra(e),$u(t),Mu(t)}function $u(t){t.v=0,t.I=-1,t.f&&(0==pu(t.b).length&&0==t.g.length||(t.b.c.length=0,Ao(t.g),t.g.length=0),t.f.qa())}function Ju(t,e,n){var r=function(t){return t instanceof Fa?Ua(t):new Fa(t,void 0)}(n);if(""!=r.c)e&&qa(r,e+"."+r.c),Ha(r,r.h);else{var i=po.location;r=function(t,e,n,r){var i=new Fa(null,void 0);return t&&Va(i,t),e&&qa(i,e),n&&Ha(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Fo(t.V,function(t,e){Ba(r,e,t)}),n=t.na,(e=t.A)&&n&&Ba(r,e,n),Ba(r,"VER",t.ha),Vu(t,r),r}function Xu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new _u(t.Na)).F=t.C,e}function Zu(){}function tc(){if(Wo&&!(10<=Number(rs)))throw Error("Environmental error: no available transport.")}function ec(t,e){As.call(this),this.a=new Pu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!No(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!No(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ic(this)}function nc(t){ya.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function rc(){va.call(this),this.status=1}function ic(t){this.a=t}(lo=_u.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:pa),this.a.onreadystatechange=Oo(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Su(this,o)}t=n||"";var i=new Ra(this.headers);r&&Pa(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Cu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=po.FormData&&t instanceof po.FormData,!(0<=To(Eu,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ju(this),0<this.o&&((this.D=function(t){return Wo&&ns(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Oo(this.xa,this)):this.m=Ws(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Su(this,o)}},lo.xa=function(){void 0!==fo&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ns(this,"timeout"),this.abort(8))},lo.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ns(this,"complete"),Ns(this,"abort"),xu(this))},lo.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),xu(this,!0)),_u.X.G.call(this)},lo.za=function(){this.j||(this.A||this.l||this.g?Tu(this):this.Ua())},lo.Ua=function(){Tu(this)},lo.W=function(){try{return 2<Au(this)?this.a.status:-1}catch(Bo){return-1}},lo.$=function(){try{return this.a?this.a.responseText:""}catch(Bo){return""}},lo.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),bu(e)}},lo.ua=function(){return this.h},lo.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(lo=Pu.prototype).ha=8,lo.v=1,lo.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ba(this,this.c,t,void 0),r=this.l;if(this.O&&(r?qo(r=Uo(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=qu(this,n,e),Ba(i=Ua(this.B),"RID",t),Ba(i,"CVER",22),this.A&&Ba(i,"X-HTTP-Session-Id",this.A),Vu(this,i),this.i&&r&&Nu(i,this.i,r),fu(this.b,n),this.Ia&&Ba(i,"TYPE","init"),this.da?(Ba(i,"$req",e),Ba(i,"SID","null"),n.U=!0,Ea(n,i,null)):Ea(n,i,e),this.v=2}}else 3==this.v&&(t?Uu(this,t):0==this.g.length||cu(this.b)||Uu(this))},lo.Aa=function(){if(this.j=null,Gu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ca(Oo(this.Ta,this),t)}},lo.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,aa(10),Du(this),Gu(this))},lo.Sa=function(){null!=this.m&&(this.m=null,Du(this),zu(this),aa(19))},lo.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),aa(2)):(this.c.info("Failed to ping google.com"),aa(1))},(lo=Zu.prototype).ta=function(){},lo.sa=function(){},lo.ra=function(){},lo.qa=function(){},lo.Ja=function(){},tc.prototype.a=function(t,e){return new ec(t,e)},So(ec,As),ec.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;aa(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Ju(t,null,t.fa),Fu(t)},ec.prototype.close=function(){Ru(this.a)},ec.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Lu(this.a,e)}else this.l?((e={}).__data__=Ps(t),Lu(this.a,e)):Lu(this.a,t)},ec.prototype.G=function(){this.a.f=null,delete this.f,Ru(this.a),delete this.a,ec.X.G.call(this)},So(nc,ya),So(rc,va),So(ic,Zu),ic.prototype.ta=function(){Ns(this.a,"a")},ic.prototype.sa=function(t){Ns(this.a,new nc(t))},ic.prototype.ra=function(t){Ns(this.a,new rc(t))},ic.prototype.qa=function(){Ns(this.a,"b")},tc.prototype.createWebChannel=tc.prototype.a,ec.prototype.send=ec.prototype.h,ec.prototype.open=ec.prototype.g,ec.prototype.close=ec.prototype.close,la.NO_ERROR=0,la.TIMEOUT=8,la.HTTP_ERROR=6,ha.COMPLETE="complete",da.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",As.prototype.listen=As.prototype.va,_u.prototype.listenOnce=_u.prototype.wa,_u.prototype.getLastError=_u.prototype.Qa,_u.prototype.getLastErrorCode=_u.prototype.ua,_u.prototype.getStatus=_u.prototype.W,_u.prototype.getResponseJson=_u.prototype.Pa,_u.prototype.getResponseText=_u.prototype.$,_u.prototype.send=_u.prototype.ba;var oc=la,sc=ha,ac=ea,uc=da,cc=_u,lc=n("mrSG"),hc=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},fc=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),dc=new so.b("@firebase/firestore");function pc(){return dc.logLevel}function gc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dc.logLevel<=so.a.DEBUG){var r=e.map(mc);dc.debug.apply(dc,Object(lc.f)(["Firestore (8.3.0): "+t],r))}}function yc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dc.logLevel<=so.a.ERROR){var r=e.map(mc);dc.error.apply(dc,Object(lc.f)(["Firestore (8.3.0): "+t],r))}}function vc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(dc.logLevel<=so.a.WARN){var r=e.map(mc);dc.warn.apply(dc,Object(lc.f)(["Firestore (8.3.0): "+t],r))}}function mc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Eb){return t}}function bc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.0) INTERNAL ASSERTION FAILED: "+t;throw yc(e),new Error(e)}function _c(t,e){t||bc()}function wc(t,e){return t}function Oc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ec=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Oc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Cc(t,e){return t<e?-1:t>e?1:0}function Sc(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Ic(t){return t+"\0"}var Tc=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.h)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return Cc(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();Tc.T=new Tc("");var xc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(lc.c)(e,t),e}(Error),Ac=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(Tc.fromBase64String(e))}catch(e){throw new jc(xc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Tc.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),Nc=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Nc.UNAUTHENTICATED=new Nc(null),Nc.R=new Nc("google-credentials-uid"),Nc.P=new Nc("first-party-uid");var kc=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},Pc=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(Nc.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Rc=function(){function t(t){var e=this;this.D=null,this.currentUser=Nc.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.N!==e?(gc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(_c("string"==typeof n.accessToken),new kc(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return _c(null===t||"string"==typeof t),new Nc(t)},t}(),Dc=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=Nc.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Mc=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new Dc(this.F,this.O))},t.prototype.v=function(t){t(Nc.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),Lc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();Lc.q=-1;var Fc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new jc(xc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new jc(xc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new jc(xc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new jc(xc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?Cc(this.nanoseconds,t.nanoseconds):Cc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Uc=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new Fc(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),Vc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&bc(),void 0===n?n=t.length-e:n>t.length-e&&bc(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return this.J(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),qc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new jc(xc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.ct=function(){return new e([])},e}(Vc),Hc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Hc.test(t)},e.prototype.rt=function(){return this.it().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new jc(xc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new jc(xc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new jc(xc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new jc(xc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(Vc),Bc=function(){function t(t){this.path=t}return t._t=function(e){return new t(qc.ot(e))},t.ft=function(e){return new t(qc.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===qc.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return qc.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new qc(e.slice()))},t}();function Gc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Yc=function(){function t(t){this.fields=t,t.sort(zc.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return Sc(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Kc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $c(t){if(_c(!!t),"string"==typeof t){var e=0,n=Kc.exec(t);if(_c(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Jc(t.seconds),nanos:Jc(t.nanos)}}function Jc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Xc(t){return"string"==typeof t?Tc.fromBase64String(t):Tc.fromUint8Array(t)}function Zc(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tl(t){var e=t.mapValue.fields.__previous_value__;return Zc(e)?tl(e):e}function el(t){var e=$c(t.mapValue.fields.__local_write_time__.timestampValue);return new Fc(e.seconds,e.nanos)}function nl(t){return null==t}function rl(t){return 0===t&&1/t==-1/0}function il(t){return"number"==typeof t&&Number.isInteger(t)&&!rl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ol(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zc(t)?4:10:bc()}function sl(t,e){var n=ol(t);if(n!==ol(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return el(t).isEqual(el(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=$c(t.timestampValue),r=$c(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Xc(t.bytesValue).isEqual(Xc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Jc(t.geoPointValue.latitude)===Jc(e.geoPointValue.latitude)&&Jc(t.geoPointValue.longitude)===Jc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Jc(t.integerValue)===Jc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Jc(t.doubleValue),r=Jc(e.doubleValue);return n===r?rl(n)===rl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Sc(t.arrayValue.values||[],e.arrayValue.values||[],sl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Gc(n)!==Gc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sl(n[i],r[i])))return!1;return!0}(t,e);default:return bc()}}function al(t,e){return void 0!==(t.values||[]).find(function(t){return sl(t,e)})}function ul(t,e){var n=ol(t),r=ol(e);if(n!==r)return Cc(n,r);switch(n){case 0:return 0;case 1:return Cc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Jc(t.integerValue||t.doubleValue),r=Jc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return cl(t.timestampValue,e.timestampValue);case 4:return cl(el(t),el(e));case 5:return Cc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Xc(t),r=Xc(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Cc(n[i],r[i]);if(0!==o)return o}return Cc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Cc(Jc(t.latitude),Jc(e.latitude));return 0!==n?n:Cc(Jc(t.longitude),Jc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ul(n[i],r[i]);if(o)return o}return Cc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Cc(r[s],o[s]);if(0!==a)return a;var u=ul(n[r[s]],i[o[s]]);if(0!==u)return u}return Cc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw bc()}}function cl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Cc(t,e);var n=$c(t),r=$c(e),i=Cc(n.seconds,r.seconds);return 0!==i?i:Cc(n.nanos,r.nanos)}function ll(t){return hl(t)}function hl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=$c(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Xc(t.bytesValue).toBase64():"referenceValue"in t?Bc.ft(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=hl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+hl(t.fields[o])}return e+"}"}(t.mapValue):bc();var e}function fl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function dl(t){return!!t&&"integerValue"in t}function pl(t){return!!t&&"arrayValue"in t}function gl(t){return!!t&&"nullValue"in t}function yl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vl(t){return!!t&&"mapValue"in t}var ml=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!vl(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return sl(this.proto,t.proto)},t}(),bl=function(){function t(t){void 0===t&&(t=ml.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ol(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(zc.ct(),this.At);return null!=t?new ml(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=vl(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function _l(t){var e=[];return Wc(t.fields||{},function(t,n){var r=new zc([t]);if(vl(n)){var i=_l(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Yc(e)}var wl=function(t,e){this.key=t,this.version=e},Ol=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(lc.c)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(wl),El=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(lc.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(wl),Cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(wl),Sl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Il(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Sl(t,e,n,r,i,o,s)}function Tl(t){var e=wc(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.rt()+t.op.toString()+ll(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.rt()+t.dir}(t)}).join(","),nl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Vl(e.startAt)),e.endAt&&(n+="|ub:",n+=Vl(e.endAt)),e.vt=n}return e.vt}function xl(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Hl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!sl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bl(t.startAt,e.startAt)&&Bl(t.endAt,e.endAt)}function jl(t){return Bc.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Al=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(lc.c)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Nl(t,n,r):"array-contains"===n?new Dl(t,r):"in"===n?new Ml(t,r):"not-in"===n?new Ll(t,r):"array-contains-any"===n?new Fl(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new kl(t,n):new Pl(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(ul(e,this.value)):null!==e&&ol(this.value)===ol(e)&&this.Dt(ul(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return bc()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Nl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Bc.ft(r.referenceValue),i}return Object(lc.c)(e,t),e.prototype.matches=function(t){var e=Bc.H(t.key,this.key);return this.Dt(e)},e}(Al),kl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Rl(0,n),r}return Object(lc.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Al),Pl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Rl(0,n),r}return Object(lc.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Al);function Rl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Bc.ft(t.referenceValue)})}var Dl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(lc.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return pl(e)&&al(e.arrayValue,this.value)},e}(Al),Ml=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(lc.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&al(this.value.arrayValue,e)},e}(Al),Ll=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(lc.c)(e,t),e.prototype.matches=function(t){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!al(this.value.arrayValue,e)},e}(Al),Fl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(lc.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!pl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return al(e.value.arrayValue,t)})},e}(Al),Ul=function(t,e){this.position=t,this.before=e};function Vl(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return ll(t)}).join(",")}var ql=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Hl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function zl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?Bc.H(Bc.ft(s.referenceValue),n.key):ul(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Bl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!sl(t.position[n],e.position[n]))return!1;return!0}var Gl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null};function Wl(t,e,n,r,i,o,s,a){return new Gl(t,e,n,r,i,o,s,a)}function Ql(t){return new Gl(t)}function Yl(t){return!nl(t.limit)&&"F"===t.limitType}function Kl(t){return!nl(t.limit)&&"L"===t.limitType}function $l(t){return t.xt.length>0?t.xt[0].field:null}function Jl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Xl(t){return null!==t.collectionGroup}function Zl(t){var e=wc(t);if(null===e.Nt){e.Nt=[];var n=Jl(e),r=$l(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new ql(n)),e.Nt.push(new ql(zc.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new ql(zc.ht(),u))}}}return e.Nt}function th(t){var e=wc(t);if(!e.$t)if("F"===e.limitType)e.$t=Il(e.path,e.collectionGroup,Zl(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Zl(e);r<i.length;r++){var o=i[r];n.push(new ql(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Ul(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Ul(e.startAt.position,!e.startAt.before):null;e.$t=Il(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.$t}function eh(t,e,n){return new Gl(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nh(t,e){return xl(th(t),th(e))&&t.limitType===e.limitType}function rh(t){return Tl(th(t))+"|lt:"+t.limitType}function ih(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.rt()+" "+e.op+" "+ll(e.value);var e}).join(", ")+"]"),nl(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Vl(t.startAt)),t.endAt&&(e+=", endAt: "+Vl(t.endAt)),"Target("+e+")"}(th(t))+"; limitType="+t.limitType+")"}function oh(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):Bc.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!zl(t.startAt,Zl(t),e)||t.endAt&&zl(t.endAt,Zl(t),e))}(t,e)}function sh(t){return function(e,n){for(var r=!1,i=0,o=Zl(t);i<o.length;i++){var s=o[i],a=ah(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function ah(t,e,n){var r=t.field.ut()?Bc.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ul(r,i):bc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return bc()}}var uh=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Uc.min()),void 0===o&&(o=Uc.min()),void 0===s&&(s=Tc.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function ch(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rl(e)?"-0":e}}function lh(t){return{integerValue:""+t}}function hh(t,e){return il(e)?lh(e):ch(t,e)}var fh=function(){this.qt=void 0};function dh(t,e,n){return t instanceof yh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof vh?mh(t,e):t instanceof bh?_h(t,e):function(t,e){var n=gh(t,e),r=Oh(n)+Oh(t.Ut);return dl(n)&&dl(t.Ut)?lh(r):ch(t.Qt,r)}(t,e)}function ph(t,e,n){return t instanceof vh?mh(t,e):t instanceof bh?_h(t,e):n}function gh(t,e){return t instanceof wh?dl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var yh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e}(fh),vh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(lc.c)(e,t),e}(fh);function mh(t,e){for(var n=Eh(e),r=function(t){n.some(function(e){return sl(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var bh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(lc.c)(e,t),e}(fh);function _h(t,e){for(var n=Eh(e),r=function(t){n=n.filter(function(e){return!sl(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var wh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Object(lc.c)(e,t),e}(fh);function Oh(t){return Jc(t.integerValue||t.doubleValue)}function Eh(t){return pl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ch=function(t,e){this.field=t,this.transform=e},Sh=function(t,e){this.version=t,this.transformResults=e},Ih=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Th(t,e){return void 0!==t.updateTime?e instanceof Ol&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Ol}var xh=function(){};function jh(t,e,n){return t instanceof Rh?function(t,e,n){var r=t.value,i=Lh(t.fieldTransforms,e,n.transformResults);return r=Uh(t.fieldTransforms,r,i),new Ol(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Dh?function(t,e,n){if(!Th(t.jt,e))return new Cl(t.key,n.version);var r=Mh(t,e,Lh(t.fieldTransforms,e,n.transformResults));return new Ol(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new El(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ah(t,e,n){return t instanceof Rh?function(t,e,n){if(!Th(t.jt,e))return e;var r=t.value,i=Fh(t.fieldTransforms,n,e);r=Uh(t.fieldTransforms,r,i);var o=Ph(e);return new Ol(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof Dh?function(t,e,n){if(!Th(t.jt,e))return e;var r=Ph(e),i=Mh(t,e,Fh(t.fieldTransforms,n,e));return new Ol(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return Th(t.jt,e)?new El(t.key,Uc.min()):e}(t,e)}function Nh(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Ol?e.field(o.field):void 0,a=gh(o.transform,s||null);null!=a&&(n=null==n?(new bl).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function kh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Sc(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof vh&&e instanceof vh||t instanceof bh&&e instanceof bh?Sc(t.elements,e.elements,sl):t instanceof wh&&e instanceof wh?sl(t.Ut,e.Ut):t instanceof yh&&e instanceof yh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function Ph(t){return t instanceof Ol?t.version:Uc.min()}var Rh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Object(lc.c)(e,t),e}(xh),Dh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Object(lc.c)(e,t),e}(xh);function Mh(t,e,n){var r;return r=function(t,e){var n=new bl(e);return t.Gt.fields.forEach(function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.Pt()}(t,r=e instanceof Ol?e.data():ml.empty()),Uh(t.fieldTransforms,r,n)}function Lh(t,e,n){var r=[];_c(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Ol&&(a=e.field(o.field)),r.push(ph(s,a,n[i]))}return r}function Fh(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Ol&&(u=n.field(s.field)),r.push(dh(a,u,e))}return r}function Uh(t,e,n){for(var r=new bl(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Pt()}var Vh,qh,Hh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Object(lc.c)(e,t),e}(xh),zh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Object(lc.c)(e,t),e}(xh),Bh=function(t){this.count=t};function Gh(t){switch(t){case xc.OK:return bc();case xc.CANCELLED:case xc.UNKNOWN:case xc.DEADLINE_EXCEEDED:case xc.RESOURCE_EXHAUSTED:case xc.INTERNAL:case xc.UNAVAILABLE:case xc.UNAUTHENTICATED:return!1;case xc.INVALID_ARGUMENT:case xc.NOT_FOUND:case xc.ALREADY_EXISTS:case xc.PERMISSION_DENIED:case xc.FAILED_PRECONDITION:case xc.ABORTED:case xc.OUT_OF_RANGE:case xc.UNIMPLEMENTED:case xc.DATA_LOSS:return!0;default:return bc()}}function Wh(t){if(void 0===t)return yc("GRPC error has no .code"),xc.UNKNOWN;switch(t){case Vh.OK:return xc.OK;case Vh.CANCELLED:return xc.CANCELLED;case Vh.UNKNOWN:return xc.UNKNOWN;case Vh.DEADLINE_EXCEEDED:return xc.DEADLINE_EXCEEDED;case Vh.RESOURCE_EXHAUSTED:return xc.RESOURCE_EXHAUSTED;case Vh.INTERNAL:return xc.INTERNAL;case Vh.UNAVAILABLE:return xc.UNAVAILABLE;case Vh.UNAUTHENTICATED:return xc.UNAUTHENTICATED;case Vh.INVALID_ARGUMENT:return xc.INVALID_ARGUMENT;case Vh.NOT_FOUND:return xc.NOT_FOUND;case Vh.ALREADY_EXISTS:return xc.ALREADY_EXISTS;case Vh.PERMISSION_DENIED:return xc.PERMISSION_DENIED;case Vh.FAILED_PRECONDITION:return xc.FAILED_PRECONDITION;case Vh.ABORTED:return xc.ABORTED;case Vh.OUT_OF_RANGE:return xc.OUT_OF_RANGE;case Vh.UNIMPLEMENTED:return xc.UNIMPLEMENTED;case Vh.DATA_LOSS:return xc.DATA_LOSS;default:return bc()}}(qh=Vh||(Vh={}))[qh.OK=0]="OK",qh[qh.CANCELLED=1]="CANCELLED",qh[qh.UNKNOWN=2]="UNKNOWN",qh[qh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qh[qh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qh[qh.NOT_FOUND=5]="NOT_FOUND",qh[qh.ALREADY_EXISTS=6]="ALREADY_EXISTS",qh[qh.PERMISSION_DENIED=7]="PERMISSION_DENIED",qh[qh.UNAUTHENTICATED=16]="UNAUTHENTICATED",qh[qh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qh[qh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qh[qh.ABORTED=10]="ABORTED",qh[qh.OUT_OF_RANGE=11]="OUT_OF_RANGE",qh[qh.UNIMPLEMENTED=12]="UNIMPLEMENTED",qh[qh.INTERNAL=13]="INTERNAL",qh[qh.UNAVAILABLE=14]="UNAVAILABLE",qh[qh.DATA_LOSS=15]="DATA_LOSS";var Qh=function(){function t(t,e){this.H=t,this.root=e||Kh.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,Kh.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,Kh.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Xt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new Yh(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new Yh(this.root,t,this.H,!1)},t.prototype.ne=function(){return new Yh(this.root,null,this.H,!0)},t.prototype.se=function(t){return new Yh(this.root,t,this.H,!0)},t}(),Yh=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),Kh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw bc();if(this.right.le())throw bc();var t=this.left.Ie();if(t!==this.right.Ie())throw bc();return t+(this.le()?0:1)},t}();Kh.EMPTY=null,Kh.RED=!0,Kh.Ht=!1,Kh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw bc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw bc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new Kh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var $h=function(){function t(t){this.H=t,this.data=new Qh(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt(function(e,n){return t(e),!1})},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new Jh(this.data.te())},t.prototype.ee=function(t){return new Jh(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),Jh=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),Xh=new Qh(Bc.H);function Zh(){return Xh}function tf(){return Zh()}var ef=new Qh(Bc.H);function nf(){return ef}var rf=new Qh(Bc.H);function of(){return rf}var sf=new $h(Bc.H);function af(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=sf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var uf=new $h(Cc);function cf(){return uf}var lf=function(){function t(t){this.H=t?function(e,n){return t(e,n)||Bc.H(e.key,n.key)}:function(t,e){return Bc.H(t.key,e.key)},this.ge=nf(),this.Ve=new Qh(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),hf=function(){function t(){this.be=new Qh(Bc.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):bc():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt(function(e,n){t.push(n)}),t},t}(),ff=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,lf.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&nh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),df=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,pf.Le(e,n)),new t(Uc.min(),r,cf(),Zh(),af())},t}(),pf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(Tc.T,n,af(),af(),af())},t}(),gf=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},yf=function(t,e){this.targetId=t,this.je=e},vf=function(t,e,n,r){void 0===n&&(n=Tc.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},mf=function(){function t(){this.Ge=0,this.ze=wf(),this.He=Tc.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=af(),e=af(),n=af();return this.ze.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:bc()}}),new pf(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=wf()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),bf=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Zh(),this._n=_f(),this.fn=new $h(Cc)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof Ol?this.wn(r,t.We):t.We instanceof El&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.En(r=o[i],t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:bc()}})},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach(function(t,r){n.An(r)&&e(r)})},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(jl(i))if(0===n){var o=new Bc(i.path);this.En(e,o,new El(o,Uc.min()))}else _c(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach(function(r,i){var o=e.yn(i);if(o){if(r.Be&&jl(o.target)){var s=new Bc(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new El(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}});var r=af();this._n.forEach(function(t,n){var i=!0;n.Ae(function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)}),i&&(r=r.add(t))});var i=new df(t,n,this.fn,this.ln,r);return this.ln=Zh(),this._n=_f(),this.fn=new $h(Cc),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new mf,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new $h(Cc),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||gc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new mf),this.un.vn(t).forEach(function(n){e.En(t,n,null)})},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function _f(){return new Qh(Bc.H)}function wf(){return new Qh(Bc.H)}var Of={asc:"ASCENDING",desc:"DESCENDING"},Ef={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cf=function(t,e){this.t=t,this.Bt=e};function Sf(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function If(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function Tf(t,e){return Sf(t,e.j())}function xf(t){return _c(!!t),Uc.K(function(t){var e=$c(t);return new Fc(e.seconds,e.nanos)}(t))}function jf(t,e){return function(t){return new qc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function Af(t){var e=qc.ot(t);return _c(td(e)),e}function Nf(t,e){return jf(t.t,e.path)}function kf(t,e){var n=Af(e);if(n.get(1)!==t.t.projectId)throw new jc(xc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new jc(xc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Bc(Mf(n))}function Pf(t,e){return jf(t.t,e)}function Rf(t){var e=Af(t);return 4===e.length?qc.ct():Mf(e)}function Df(t){return new qc(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Mf(t){return _c(t.length>4&&"documents"===t.get(4)),t.Y(5)}function Lf(t,e,n){return{name:Nf(t,e),fields:n.proto.mapValue.fields}}function Ff(t,e,n){var r=kf(t,e.name),i=xf(e.updateTime),o=new ml({mapValue:{fields:e.fields}});return new Ol(r,i,o,{hasCommittedMutations:!!n})}function Uf(t,e){var n;if(e instanceof Rh)n={update:Lf(t,e.key,e.value)};else if(e instanceof Hh)n={delete:Nf(t,e.key)};else if(e instanceof Dh)n={update:Lf(t,e.key,e.data),updateMask:Zf(e.Gt)};else{if(!(e instanceof zh))return bc();n={verify:Nf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof yh)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof vh)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof bh)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof wh)return{fieldPath:e.field.rt(),increment:n.Ut};throw bc()}(0,t)})),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Tf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:bc()}(t,e.jt)),n}function Vf(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ih.updateTime(xf(t.updateTime)):void 0!==t.exists?Ih.exists(t.exists):Ih.Kt()}(e.currentDocument):Ih.Kt(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(_c("REQUEST_TIME"===e.setToServerValue),n=new yh):"appendMissingElements"in e?n=new vh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new bh(e.removeAllFromArray.values||[]):"increment"in e?n=new wh(t,e.increment):bc();var r=zc.lt(e.fieldPath);return new Ch(r,n)}(t,e)}):[];if(e.update){var i=kf(t,e.update.name),o=new ml({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Yc((t.fieldPaths||[]).map(function(t){return zc.lt(t)}))}(e.updateMask);return new Dh(i,o,s,n,r)}return new Rh(i,o,n,r)}if(e.delete){var a=kf(t,e.delete);return new Hh(a,n)}if(e.verify){var u=kf(t,e.verify);return new zh(u,n)}return bc()}function qf(t,e){return{documents:[Pf(t,e.path)]}}function Hf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Pf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pf(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(yl(t.value))return{unaryFilter:{field:Kf(t.field),op:"IS_NAN"}};if(gl(t.value))return{unaryFilter:{field:Kf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(yl(t.value))return{unaryFilter:{field:Kf(t.field),op:"IS_NOT_NAN"}};if(gl(t.value))return{unaryFilter:{field:Kf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kf(t.field),op:Yf(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Kf(t.field),direction:Qf(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||nl(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Gf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Gf(e.endAt)),n}function zf(t){var e=Rf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_c(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Bf(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new ql($f(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return nl(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Wf(n.startAt));var l=null;return n.endAt&&(l=Wf(n.endAt)),Wl(e,i,a,s,u,"F",c,l)}function Bf(t){return t?void 0!==t.unaryFilter?[Xf(t)]:void 0!==t.fieldFilter?[Jf(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Bf(t)}).reduce(function(t,e){return t.concat(e)}):bc():[]}function Gf(t){return{before:t.before,values:t.position}}function Wf(t){return new Ul(t.values||[],!!t.before)}function Qf(t){return Of[t]}function Yf(t){return Ef[t]}function Kf(t){return{fieldPath:t.rt()}}function $f(t){return zc.lt(t.fieldPath)}function Jf(t){return Al.create($f(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return bc()}}(t.fieldFilter.op),t.fieldFilter.value)}function Xf(t){switch(t.unaryFilter.op){case"IS_NAN":var e=$f(t.unaryFilter.field);return Al.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=$f(t.unaryFilter.field);return Al.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=$f(t.unaryFilter.field);return Al.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=$f(t.unaryFilter.field);return Al.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return bc()}}function Zf(t){var e=[];return t.fields.forEach(function(t){return e.push(t.rt())}),{fieldPaths:e}}function td(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var ed=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},nd=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)},function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&bc(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t(function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}})},t.prototype.On=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn(function(){return e(n)}):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.Mn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.Mn(r)},t}(),rd=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new ed,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new sd(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=hd(e.target.error);n.Bn.reject(new sd(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new sd(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(gc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ud(e)},t}(),id=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Object(ao.m)())&&yc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return gc("SimpleDb","Removing database:",t),cd(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(ao.m)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n=this;return Object(lc.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(gc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new sd(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new jc(xc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new sd(t,n))},i.onupgradeneeded=function(t){gc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Un.Jn(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){gc("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}})})},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(lc.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(lc.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=h.sent(),e=rd.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),nd.reject(t)}).On(),u={},s.catch(function(){}),[4,e.qn];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return gc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),od=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return cd(this.Zn.delete())},t}(),sd=function(t){function e(e,n){var r=this;return(r=t.call(this,xc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(lc.c)(e,t),e}(jc);function ad(t){return"IndexedDbTransactionError"===t.name}var ud=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(gc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(gc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),cd(n)},t.prototype.add=function(t){return gc("SimpleDb","ADD",this.store.name,t,t),cd(this.store.add(t))},t.prototype.get=function(t){var e=this;return cd(this.store.get(t)).next(function(n){return void 0===n&&(n=null),gc("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return gc("SimpleDb","DELETE",this.store.name,t),cd(this.store.delete(t))},t.prototype.count=function(){return gc("SimpleDb","COUNT",this.store.name),cd(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.cs=function(t,e){gc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,function(t,e,n){return n.delete()})},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new nd(function(n,r){e.onerror=function(t){var e=hd(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.os=function(t,e){var n=[];return new nd(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new od(i),s=e(i.primaryKey,i.value,o);if(s instanceof nd){var a=s.catch(function(t){return o.done(),nd.reject(t)});n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}}).next(function(){return nd.Mn(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function cd(t){return new nd(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=hd(t.target.error);n(e)}})}var ld=!1;function hd(t){var e=id.Qn(Object(ao.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new jc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ld||(ld=!0,setTimeout(function(){throw r},0)),r}}return t}var fd=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new ed,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(t){})}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout(function(){return e.As()},t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new jc(xc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps(function(){return null!==t.Is?(t.clearTimeout(),t.op().then(function(e){return t.Es.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function dd(t,e){if(yc("AsyncQueue",e+": "+t),ad(t))return new jc(xc.UNAVAILABLE,e+": "+t);throw t}var pd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",gd=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},t}();function yd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=md(e)),e=vd(t.get(n),e);return md(e)}function vd(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function md(t){return t+"\x01\x01"}function bd(t){var e=t.length;if(_c(e>=2),2===e)return _c("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),qc.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&bc(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:bc()}o=s+2}return new qc(r)}var _d=function(t,e){this.seconds=t,this.nanoseconds=e},wd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};wd.store="owner",wd.key="owner";var Od=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Od.store="mutationQueues",Od.keyPath="userId";var Ed=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ed.store="mutations",Ed.keyPath="batchId",Ed.userMutationsIndex="userMutationsIndex",Ed.userMutationsKeyPath=["userId","batchId"];var Cd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,yd(e)]},t.key=function(t,e,n){return[t,yd(e),n]},t}();Cd.store="documentMutations",Cd.PLACEHOLDER=new Cd;var Sd=function(t,e){this.path=t,this.readTime=e},Id=function(t,e){this.path=t,this.version=e},Td=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Td.store="remoteDocuments",Td.readTimeIndex="readTimeIndex",Td.readTimeIndexPath="readTime",Td.collectionReadTimeIndex="collectionReadTimeIndex",Td.collectionReadTimeIndexPath=["parentPath","readTime"];var xd=function(t){this.byteSize=t};xd.store="remoteDocumentGlobal",xd.key="remoteDocumentGlobalKey";var jd=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};jd.store="targets",jd.keyPath="targetId",jd.queryTargetsIndexName="queryTargetsIndex",jd.queryTargetsKeyPath=["canonicalId","targetId"];var Ad=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ad.store="targetDocuments",Ad.keyPath=["targetId","path"],Ad.documentTargetsIndex="documentTargetsIndex",Ad.documentTargetsKeyPath=["path","targetId"];var Nd=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Nd.key="targetGlobalKey",Nd.store="targetGlobal";var kd=function(t,e){this.collectionId=t,this.parent=e};kd.store="collectionParents",kd.keyPath=["collectionId","parent"];var Pd=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Pd.store="clientMetadata",Pd.keyPath="clientId";var Rd=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Rd.store="bundles",Rd.keyPath="bundleId";var Dd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Dd.store="namedQueries",Dd.keyPath="name";var Md=Object(lc.f)(Object(lc.f)([],Object(lc.f)(Object(lc.f)([],Object(lc.f)(Object(lc.f)([],Object(lc.f)(Object(lc.f)([],[Od.store,Ed.store,Cd.store,Td.store,jd.store,wd.store,Nd.store,Ad.store]),[Pd.store])),[xd.store])),[kd.store])),[Rd.store,Dd.store]),Ld=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Object(lc.c)(e,t),e}(gd);function Fd(t,e){var n=wc(t);return id.zn(n.ps,e)}var Ud=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=jh(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Ah(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Ah(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},af())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Sc(this.mutations,t.mutations,function(t,e){return kh(t,e)})&&Sc(this.baseMutations,t.baseMutations,function(t,e){return kh(t,e)})},t}(),Vd=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){_c(e.mutations.length===r.length);for(var i=of(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),qd=function(t){this.Fs=t};function Hd(t,e){if(e.document)return Ff(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Bc.Et(e.noDocument.path),r=Qd(e.noDocument.readTime);return new El(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Bc.Et(e.unknownDocument.path);return r=Qd(e.unknownDocument.version),new Cl(i,r)}return bc()}function zd(t,e,n){var r=Bd(n),i=e.key.path.X().it();if(e instanceof Ol){var o=function(t,e){return{name:Nf(t,e.key),fields:e.bt().mapValue.fields,updateTime:Sf(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new Td(null,null,o,s,r,i)}if(e instanceof El){var a=e.key.path.it(),u=Wd(e.version);return s=e.hasCommittedMutations,new Td(null,new Sd(a,u),null,s,r,i)}if(e instanceof Cl){var c=e.key.path.it(),l=Wd(e.version);return new Td(new Id(c,l),null,null,!0,r,i)}return bc()}function Bd(t){var e=t.j();return[e.seconds,e.nanoseconds]}function Gd(t){var e=new Fc(t[0],t[1]);return Uc.K(e)}function Wd(t){var e=t.j();return new _d(e.seconds,e.nanoseconds)}function Qd(t){var e=new Fc(t.seconds,t.nanoseconds);return Uc.K(e)}function Yd(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Vf(t.Fs,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Vf(t.Fs,e)}),o=Fc.fromMillis(e.localWriteTimeMs);return new Ud(e.batchId,o,n,i)}function Kd(t){var e,n,r=Qd(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Qd(t.lastLimboFreeSnapshotVersion):Uc.min();return void 0!==t.query.documents?(_c(1===(n=t.query).documents.length),e=th(Ql(Rf(n.documents[0])))):e=function(t){return th(zf(t))}(t.query),new uh(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Tc.fromBase64String(t.resumeToken))}function $d(t,e){var n,r=Wd(e.Ot),i=Wd(e.lastLimboFreeSnapshotVersion);n=jl(e.target)?qf(t.Fs,e.target):Hf(t.Fs,e.target);var o=e.resumeToken.toBase64();return new jd(e.targetId,Tl(e.target),r,o,e.sequenceNumber,i,n)}function Jd(t){var e=zf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?eh(e,e.limit,"L"):e}var Xd=function(){function t(){}return t.prototype.Os=function(t,e){return Zd(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Qd(e.createTime),version:e.version};var e})},t.prototype.ks=function(t,e){return Zd(t).put({bundleId:(n=e).id,createTime:Wd(xf(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return tp(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Jd(e.bundledQuery),readTime:Qd(e.readTime)};var e})},t.prototype.Ls=function(t,e){return tp(t).put(function(t){return{name:t.name,readTime:Wd(xf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Zd(t){return Fd(t,Rd.store)}function tp(t){return Fd(t,Dd.store)}var ep=function(){function t(){this.Bs=new np}return t.prototype.qs=function(t,e){return this.Bs.add(e),nd.resolve()},t.prototype.Us=function(t,e){return nd.resolve(this.Bs.getEntries(e))},t}(),np=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new $h(qc.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new $h(qc.H)).it()},t}(),rp=function(){function t(){this.Qs=new np}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs(function(){n.Qs.add(e)});var o={collectionId:r,parent:yd(i)};return ip(t).put(o)}return nd.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ic(e),""],!1,!0);return ip(t).rs(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(bd(o.parent))}return n})},t}();function ip(t){return Fd(t,kd.store)}var op={Ks:!1,Ws:0,js:0,Gs:0},sp=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function ap(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){if(t.code!==xc.FAILED_PRECONDITION||t.message!==pd)throw t;return gc("LocalStore","Unexpectedly lost primary lease"),[2]})})}sp.Xs=10,sp.Zs=1e3,sp.ti=new sp(41943040,sp.Xs,sp.Zs),sp.ei=new sp(-1,0,0);var up=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.si(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Wc(this.ii,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.et=function(){return Qc(this.ii)},t}(),cp=function(){function t(){this.ri=new up(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:Uc.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?nd.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function lp(t,e,n){var r=t.store(Ed.store),i=t.store(Cd.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){_c(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Cd.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return nd.Mn(o).next(function(){return c})}function hp(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw bc();e=t.noDocument}return JSON.stringify(e).length}var fp=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return _c(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pp(t).hs({index:Ed.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Ri=function(t,e,n,r){var i=this,o=gp(t),s=pp(t);return s.add({}).next(function(a){_c("number"==typeof a);for(var u=new Ud(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Uf(t.Fs,e)}),i=n.mutations.map(function(e){return Uf(t.Fs,e)});return new Ed(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),l=[],h=new $h(function(t,e){return Cc(t.rt(),e.rt())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Cd.key(i.userId,p.key.path,a);h=h.add(p.key.path.X()),l.push(s.put(c)),l.push(o.put(g,Cd.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ei.qs(t,e))}),t.gs(function(){i.Ii[a]=u.keys()}),nd.Mn(l).next(function(){return u})})},t.prototype.Pi=function(t,e){var n=this;return pp(t).get(e).next(function(t){return t?(_c(t.userId===n.userId),Yd(n.Qt,t)):null})},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?nd.resolve(this.Ii[e]):this.Pi(t,e).next(function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null})},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return pp(t).hs({index:Ed.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(_c(e.batchId>=r),o=Yd(n.Qt,e)),i.done()}).next(function(){return o})},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return pp(t).hs({index:Ed.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pp(t).rs(Ed.userMutationsIndex,n).next(function(t){return t.map(function(t){return Yd(e.Qt,t)})})},t.prototype.bi=function(t,e){var n=this,r=Cd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return gp(t).hs({range:i},function(r,i,s){var a=r[0],u=r[2],c=bd(r[1]);if(a===n.userId&&e.path.isEqual(c))return pp(t).get(u).next(function(t){if(!t)throw bc();_c(t.userId===n.userId),o.push(Yd(n.Qt,t))});s.done()}).next(function(){return o})},t.prototype.vi=function(t,e){var n=this,r=new $h(Cc),i=[];return e.forEach(function(e){var o=Cd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=gp(t).hs({range:s},function(t,i,o){var s=t[0],a=t[2],u=bd(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),nd.Mn(i).next(function(){return n.Si(t,r)})},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=Cd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new $h(Cc);return gp(t).hs({range:s},function(t,e,o){var s=t[0],u=t[2],c=bd(t[1]);s===n.userId&&r.nt(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Si(t,a)})},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(pp(t).get(e).next(function(t){if(null===t)throw bc();_c(t.userId===n.userId),r.push(Yd(n.Qt,t))}))}),nd.Mn(i).next(function(){return r})},t.prototype.Ci=function(t,e){var n=this;return lp(t.ps,this.userId,e).next(function(r){return t.gs(function(){n.xi(e.batchId)}),nd.forEach(r,function(e){return n.Ti.Ni(t,e)})})},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next(function(n){if(!n)return nd.resolve();var r=IDBKeyRange.lowerBound(Cd.prefixForUser(e.userId)),i=[];return gp(t).hs({range:r},function(t,n,r){if(t[0]===e.userId){var o=bd(t[1]);i.push(o)}else r.done()}).next(function(){_c(0===i.length)})})},t.prototype.Fi=function(t,e){return dp(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return yp(t).get(this.userId).next(function(t){return t||new Od(e.userId,-1,"")})},t}();function dp(t,e,n){var r=Cd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return gp(t).hs({range:o,us:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function pp(t){return Fd(t,Ed.store)}function gp(t){return Fd(t,Cd.store)}function yp(t){return Fd(t,Od.store)}var vp=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),mp=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next(function(n){var r=new vp(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next(function(){return n.highestTargetId})})},t.prototype.Qi=function(t){return this.qi(t).next(function(t){return Uc.K(new Fc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Ki=function(t){return this.qi(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)})},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next(function(){return n.qi(t).next(function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)})})},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next(function(){return bp(t).delete(e.targetId)}).next(function(){return n.qi(t)}).next(function(e){return _c(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)})},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return bp(t).hs(function(s,a){var u=Kd(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))}).next(function(){return nd.Mn(o)}).next(function(){return i})},t.prototype.In=function(t,e){return bp(t).hs(function(t,n){var r=Kd(n);e(r)})},t.prototype.qi=function(t){return _p(t).get(Nd.key).next(function(t){return _c(null!==t),t})},t.prototype.Ui=function(t,e){return _p(t).put(Nd.key,e)},t.prototype.Gi=function(t,e){return bp(t).put($d(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next(function(t){return t.targetCount})},t.prototype.tr=function(t,e){var n=Tl(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bp(t).hs({range:r,index:jd.queryTargetsIndexName},function(t,n,r){var o=Kd(n);xl(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.er=function(t,e,n){var r=this,i=[],o=wp(t);return e.forEach(function(e){var s=yd(e.path);i.push(o.put(new Ad(n,s))),i.push(r.Ti.nr(t,n,e))}),nd.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=wp(t);return nd.forEach(e,function(e){var o=yd(e.path);return nd.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])})},t.prototype.Yi=function(t,e){var n=wp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=wp(t),i=af();return r.hs({range:n,us:!0},function(t,e,n){var r=bd(t[1]),o=new Bc(r);i=i.add(o)}).next(function(){return i})},t.prototype.Fi=function(t,e){var n=yd(e.path),r=IDBKeyRange.bound([n],[Ic(n)],!1,!0),i=0;return wp(t).hs({index:Ad.documentTargetsIndex,us:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Sn=function(t,e){return bp(t).get(e).next(function(t){return t?Kd(t):null})},t}();function bp(t){return Fd(t,jd.store)}function _p(t){return Fd(t,Nd.store)}function wp(t){return Fd(t,Ad.store)}function Op(t,e){var n=t[1],r=e[1],i=Cc(t[0],e[0]);return 0===i?Cc(n,r):i}var Ep=function(){function t(t){this.cr=t,this.buffer=new $h(Op),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Op(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Cp=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;gc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,function(){return Object(lc.b)(e,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return ad(e=n.sent())?(gc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ap(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}})})})},t}(),Sp=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Pr=function(t,e){var n=this;if(0===e)return nd.resolve(Lc.q);var r=new Ep(e);return this.mr.In(t,function(t){return r.hr(t.sequenceNumber)}).next(function(){return n.mr.yr(t,function(t){return r.hr(t)})}).next(function(){return r.maxValue})},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(gc("LruGarbageCollector","Garbage collection skipped; disabled"),nd.resolve(op)):this.pr(t).next(function(r){return r<n.params.zs?(gc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),op):n.br(t,e)})},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next(function(e){return e>c.params.Js?(gc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)}).next(function(r){return n=r,s=Date.now(),c.Xi(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.gr(t,n)}).next(function(t){return u=Date.now(),pc()<=so.a.DEBUG&&gc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),nd.resolve({Ks:!0,Ws:r,js:i,Gs:t})})},t}(),Ip=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new Sp(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.vr=function(t){var e=0;return this.yr(t,function(t){e++}).next(function(){return e})},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,function(t,n){return e(n)})},t.prototype.nr=function(t,e,n){return Tp(t,n)},t.prototype.ir=function(t,e,n){return Tp(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return Tp(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return yp(t).ls(function(r){return dp(t,r,e).next(function(t){return t&&(n=!0),nd.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,function(s,a){if(a<=e){var u=n.Cr(t,s).next(function(e){if(!e)return o++,r._i(t,s).next(function(){return r.li(s),wp(t).delete([0,yd(s.path)])})});i.push(u)}}).next(function(){return nd.Mn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return Tp(t,e)},t.prototype.Dr=function(t,e){var n,r=wp(t),i=Lc.q;return r.hs({index:Ad.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Lc.q&&e(new Bc(bd(n)),i),i=s,n=o):i=Lc.q}).next(function(){i!==Lc.q&&e(new Bc(bd(n)),i)})},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function Tp(t,e){return wp(t).put(function(t,e){return new Ad(0,yd(t.path),e)}(e,t.bs))}var xp=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return Np(t).put(kp(e),n)},t.prototype.li=function(t,e){var n=Np(t),r=kp(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.kr(t,r)})},t.prototype._i=function(t,e){var n=this;return Np(t).get(kp(e)).next(function(t){return n.Mr(t)})},t.prototype.Lr=function(t,e){var n=this;return Np(t).get(kp(e)).next(function(t){var e=n.Mr(t);return e?{hi:e,size:hp(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=tf();return this.Br(t,e,function(t,e){var i=n.Mr(e);r=r.zt(t,i)}).next(function(){return r})},t.prototype.qr=function(t,e){var n=this,r=tf(),i=new Qh(Bc.H);return this.Br(t,e,function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,hp(e))):(r=r.zt(t,null),i=i.zt(t,0))}).next(function(){return{Ur:r,Qr:i}})},t.prototype.Br=function(t,e,n){if(e.et())return nd.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return Np(t).hs({range:r},function(t,e,r){for(var s=Bc.Et(t);o&&Bc.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()}).next(function(){for(;o;)n(o,null),o=i.ce()?i.oe():null})},t.prototype.Kr=function(t,e,n){var r=this,i=nf(),o=e.path.length+1,s={};if(n.isEqual(Uc.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=Bd(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Td.collectionReadTimeIndex}return Np(t).hs(s,function(t,n,s){if(t.length===o){var a=Hd(r.Qt,n);e.path.nt(a.key.path)?a instanceof Ol&&oh(e,a)&&(i=i.zt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Nr=function(t){return new jp(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Ap(t).get(xd.key).next(function(t){return _c(!!t),t})},t.prototype.kr=function(t,e){return Ap(t).put(xd.key,e)},t.prototype.Mr=function(t){if(t){var e=Hd(this.Qt,t);return e instanceof El&&e.version.isEqual(Uc.min())?null:e}return null},t}(),jp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new up(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(lc.c)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new $h(function(t,e){return Cc(t.rt(),e.rt())});return this.ri.forEach(function(o,s){var a=e.Gr.get(o);if(s.hi){var u=zd(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=hp(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var l=zd(e.jr.Qt,new El(o,Uc.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))}),i.forEach(function(r){n.push(e.jr.Ei.qs(t,r))}),n.push(this.jr.updateMetadata(t,r)),nd.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next(function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)})},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next(function(t){var e=t.Ur;return t.Qr.forEach(function(t,e){n.Gr.set(t,e)}),e})},e}(cp);function Ap(t){return Fd(t,xd.store)}function Np(t){return Fd(t,Td.store)}function kp(t){return t.path.it()}var Pp=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;_c(n<r&&n>=0&&r<=11);var o=new rd("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(wd.store)}(t),function(t){t.createObjectStore(Od.store,{keyPath:Od.keyPath}),t.createObjectStore(Ed.store,{keyPath:Ed.keyPath,autoIncrement:!0}).createIndex(Ed.userMutationsIndex,Ed.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Cd.store)}(t),Rp(t),function(t){t.createObjectStore(Td.store)}(t));var s=nd.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ad.store),t.deleteObjectStore(jd.store),t.deleteObjectStore(Nd.store)}(t),Rp(t)),s=s.next(function(){return function(t){var e=t.store(Nd.store),n=new Nd(0,0,Uc.min().j(),0);return e.put(Nd.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Ed.store).rs().next(function(n){t.deleteObjectStore(Ed.store),t.createObjectStore(Ed.store,{keyPath:Ed.keyPath,autoIncrement:!0}).createIndex(Ed.userMutationsIndex,Ed.userMutationsKeyPath,{unique:!0});var r=e.store(Ed.store),i=n.map(function(t){return r.put(t)});return nd.Mn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Pd.store,{keyPath:Pd.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.zr(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(xd.store)}(t),i.Hr(o)})),n<7&&r>=7&&(s=s.next(function(){return i.Jr(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Yr(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Td.store);e.createIndex(Td.readTimeIndex,Td.readTimeIndexPath,{unique:!1}),e.createIndex(Td.collectionReadTimeIndex,Td.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Xr(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Rd.store,{keyPath:Rd.keyPath})}(t),function(t){t.createObjectStore(Dd.store,{keyPath:Dd.keyPath})}(t)})),s},t.prototype.Hr=function(t){var e=0;return t.store(Td.store).hs(function(t,n){e+=hp(n)}).next(function(){var n=new xd(e);return t.store(xd.store).put(xd.key,n)})},t.prototype.zr=function(t){var e=this,n=t.store(Od.store),r=t.store(Ed.store);return n.rs().next(function(n){return nd.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(Ed.userMutationsIndex,i).next(function(r){return nd.forEach(r,function(r){_c(r.userId===n.userId);var i=Yd(e.Qt,r);return lp(t,n.userId,i).next(function(){})})})})})},t.prototype.Jr=function(t){var e=t.store(Ad.store),n=t.store(Td.store);return t.store(Nd.store).get(Nd.key).next(function(t){var r=[];return n.hs(function(n,i){var o=new qc(n),s=function(t){return[0,yd(t)]}(o);r.push(e.get(s).next(function(n){return n?nd.resolve():function(n){return e.put(new Ad(0,yd(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return nd.Mn(r)})})},t.prototype.Yr=function(t,e){t.createObjectStore(kd.store,{keyPath:kd.keyPath});var n=e.store(kd.store),r=new np,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:yd(i)})}};return e.store(Td.store).hs({us:!0},function(t,e){var n=new qc(t);return i(n.X())}).next(function(){return e.store(Cd.store).hs({us:!0},function(t,e){var n=bd(t[1]);return i(n.X())})})},t.prototype.Xr=function(t){var e=this,n=t.store(jd.store);return n.hs(function(t,r){var i=Kd(r),o=$d(e.Qt,i);return n.put(o)})},t}();function Rp(t){t.createObjectStore(Ad.store,{keyPath:Ad.keyPath}).createIndex(Ad.documentTargetsIndex,Ad.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(jd.store,{keyPath:jd.keyPath}).createIndex(jd.queryTargetsIndexName,jd.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Nd.store)}var Dp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Mp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new jc(xc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new Ip(this,i),this.ho=n+"main",this.Qt=new qd(u),this.lo=new id(this.ho,11,new Pp(this.Qt)),this._o=new mp(this.Ti,this.Qt),this.Ei=new rp,this.fo=function(t,e){return new xp(t,e)}(this.Qt,this.Ei),this.wo=new Xd,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&yc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new jc(xc.FAILED_PRECONDITION,Dp);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t._o.Ki(e)})}).then(function(e){t.so=new Lc(e,t.eo)}).then(function(){t.io=!0}).catch(function(e){return t.lo&&t.lo.close(),Promise.reject(e)})},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Object(lc.b)(e,void 0,void 0,function(){return Object(lc.d)(this,function(e){return this.Er?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn(function(n){return Object(lc.b)(e,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return Object(lc.b)(e,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Fp(e).put(new Pd(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Vo(e).next(function(e){e||(t.isPrimary=!1,t.Zr.po(function(){return t.uo(!1)}))})}).next(function(){return t.bo(e)}).next(function(n){return t.isPrimary&&!n?t.vo(e).next(function(){return!1}):!!n&&t.So(e).next(function(){return!0})})}).catch(function(e){if(ad(e))return gc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return gc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Zr.po(function(){return t.uo(e)}),t.isPrimary=e})},t.prototype.Vo=function(t){var e=this;return Lp(t).get(wd.key).next(function(t){return nd.resolve(e.Do(t))})},t.prototype.Co=function(t){return Fp(t).delete(this.clientId)},t.prototype.xo=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(lc.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Fd(t,Pd.store);return e.rs().next(function(t){var n=r.$o(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return nd.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)this.Eo.removeItem(this.Fo(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?nd.resolve(!0):Lp(t).get(wd.key).next(function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new jc(xc.FAILED_PRECONDITION,Dp);return!1}}return!(!e.networkEnabled||!e.inForeground)||Fp(t).rs().next(function(t){return void 0===e.$o(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&gc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.ko=function(){return Object(lc.b)(this,void 0,void 0,function(){var t=this;return Object(lc.d)(this,function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[wd.store,Pd.store],function(e){var n=new Ld(e,Lc.q);return t.vo(n).next(function(){return t.Co(n)})})];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}})})},t.prototype.$o=function(t,e){var n=this;return t.filter(function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)})},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Fp(e).rs().next(function(e){return t.$o(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return fp.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return gc("IndexedDbPersistence","Starting transaction:",t),this.lo.runTransaction(t,"readonly"===e?"readonly":"readwrite",Md,function(o){return r=new Ld(o,i.so?i.so.next():Lc.q),"readwrite-primary"===e?i.Vo(r).next(function(t){return!!t||i.bo(r)}).next(function(e){if(!e)throw yc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new jc(xc.FAILED_PRECONDITION,pd);return n(r)}).next(function(t){return i.So(r).next(function(){return t})}):i.jo(r).next(function(){return n(r)})}).then(function(t){return r.Vs(),t})},t.prototype.jo=function(t){var e=this;return Lp(t).get(wd.key).next(function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new jc(xc.FAILED_PRECONDITION,Dp)})},t.prototype.So=function(t){var e=new wd(this.clientId,this.allowTabSynchronization,Date.now());return Lp(t).put(wd.key,e)},t.Kn=function(){return id.Kn()},t.prototype.vo=function(t){var e=this,n=Lp(t);return n.get(wd.key).next(function(t){return e.Do(t)?(gc("IndexedDbPersistence","Releasing primary lease."),n.delete(wd.key)):nd.resolve()})},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(yc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground="visible"===t.document.visibilityState,t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps(function(){return e.ko()})},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return gc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return yc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){yc("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Lp(t){return Fd(t,wd.store)}function Fp(t){return Fd(t,Pd.store)}function Up(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Vp=function(t,e){this.progress=t,this.Go=e},qp=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next(function(r){return n.Jo(t,e,r)})},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t})},t.prototype.Yo=function(t,e,n){var r=tf();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)}),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next(function(e){return n.Zo(t,e)})},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next(function(r){var i=n.Yo(t,e,r),o=Zh();return i.forEach(function(t,e){e||(e=new El(t,Uc.min())),o=o.zt(t,e)}),o})},t.prototype.Kr=function(t,e,n){return function(t){return Bc.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):Xl(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new Bc(e)).next(function(t){var e=nf();return t instanceof Ol&&(e=e.zt(t.key,t)),e})},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=nf();return this.Ei.Us(t,i).next(function(s){return nd.forEach(s,function(s){var a=function(t,e){return new Gl(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next(function(t){t.forEach(function(t,e){o=o.zt(t,e)})})}).next(function(){return o})})},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next(function(n){return r=n,o.zo.Di(t,e)}).next(function(e){return o.sc(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=Ah(u,r.get(c),o.vs);r=l instanceof Ol?r.zt(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){oh(e,n)||(r=r.remove(t))}),r})},t.prototype.sc=function(t,e,n){for(var r=af(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Dh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Ol&&(c=c.zt(t,e))}),c})},t}(),Hp=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=af(),i=af(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),zp=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(Uc.min())?this.uc(t,e):this.ac.Xo(t,r).next(function(o){var s=i.hc(e,o);return(Yl(e)||Kl(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(pc()<=so.a.DEBUG&&gc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ih(e)),i.ac.Kr(t,e,n).next(function(t){return s.forEach(function(e){t=t.zt(e.key,e)}),t}))})},t.prototype.hc=function(t,e){var n=new $h(sh(t));return e.forEach(function(e,r){r instanceof Ol&&oh(t,r)&&(n=n.add(r))}),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return pc()<=so.a.DEBUG&&gc("QueryEngine","Using full collection scan to execute query:",ih(e)),this.ac.Kr(t,e,Uc.min())},t}(),Bp=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new Qh(Cc),this.dc=new up(function(t){return Tl(t)},xl),this.wc=Uc.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new qp(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Vr(n,e.fc)})},t}();function Gp(t,e,n,r){return new Bp(t,e,n,r)}function Wp(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(lc.d)(this,function(s){switch(s.label){case 0:return n=wc(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.zo.pi(t).next(function(s){return o=s,r=n.persistence.Qo(e),i=new qp(n.Ec,r,n.persistence.Ko()),r.pi(t)}).next(function(e){for(var n=[],r=[],s=af(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.Xo(t,s).next(function(t){return{Ic:t,mc:n,Ac:r}})})})];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}})})}function Qp(t,e){var n=wc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=nd.resolve();return o.forEach(function(t){s=s.next(function(){return r._i(e,t)}).next(function(e){var o=e,s=n.$s.get(t);_c(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)})}),s.next(function(){return t.zo.Ci(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}function Yp(t){var e=wc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e._o.Qi(t)})}function Kp(t,e){var n=wc(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach(function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next(function(){return n._o.er(t,e.qe,o)}));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return _c(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}});var a=Zh();if(e.Oe.forEach(function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))}),s.push($p(t,o,e.Oe,r,void 0).next(function(t){a=t})),!r.isEqual(Uc.min())){var u=n._o.Qi(t).next(function(e){return n._o.Wi(t,t.bs,r)});s.push(u)}return nd.Mn(s).next(function(){return o.apply(t)}).next(function(){return n.Tc.Zo(t,a)})}).then(function(t){return n.fc=i,t})}function $p(t,e,n,r,i){var o=af();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Zh();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof El&&s.version.isEqual(Uc.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):gc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Jp(t,e){var n=wc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)})}function Xp(t,e){var n=wc(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n._o.tr(t,e).next(function(i){return i?nd.resolve(r=i):n._o.Bi(t).next(function(i){return r=new uh(e,i,0,t.bs),n._o.ji(t,r).next(function(){return r})})})}).then(function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t})}function Zp(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:r=wc(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Ti.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ad(s=a.sent()))throw s;return gc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}})})}function tg(t,e,n){var r=wc(t),i=Uc.min(),o=af();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=wc(t),i=r.dc.get(n);return void 0!==i?nd.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,th(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next(function(t){o=t})}).next(function(){return r._c.Kr(t,e,n?i:Uc.min(),n?o:af())}).next(function(t){return{documents:t,Rc:o}})})}function eg(t,e){var n=wc(t),r=wc(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Sn(t,e).next(function(t){return t?t.target:null})})}function ng(t){var e=wc(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=wc(t),i=Zh(),o=Bd(n),s=Np(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:Td.readTimeIndex,range:a},function(t,e){var n=Hd(r.Qt,e);i=i.zt(n.key,n),o=e.readTime}).next(function(){return{Go:i,readTime:Gd(o)}})}(e.Ec,t,e.wc)}).then(function(t){var n=t.Go;return e.wc=t.readTime,n})}function rg(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){return[2,(e=wc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Np(t),n=Uc.min();return e.hs({index:Td.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Gd(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.wc=t})]})})}function ig(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(lc.d)(this,function(p){switch(p.label){case 0:for(i=wc(t),o=af(),s=Zh(),a=of(),u=0,c=n;u<c.length;u++)h=e.Pc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.zt(h,e.yc(l)),a=a.zt(h,e.gc(l.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,Xp(i,function(t){return th(Ql(qc.ot("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return $p(t,f,s,Uc.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i._o.Yi(t,d.targetId).next(function(){return i._o.er(t,o,d.targetId)}).next(function(){return i.Tc.Zo(t,e)})})})]}})})}function og(t,e,n){return void 0===n&&(n=af()),Object(lc.b)(this,void 0,void 0,function(){var r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return[4,Xp(t,th(Jd(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=wc(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=xf(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(Tc.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next(function(){return i._o.Yi(t,r.targetId)}).next(function(){return i._o.er(t,n,r.targetId)}).next(function(){return i.wo.Ls(t,e)})})]}})})}var sg=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return nd.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:xf(n.createTime)}),nd.resolve()},t.prototype.Ms=function(t,e){return nd.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:Jd(t.bundledQuery),readTime:xf(t.readTime)}}(e)),nd.resolve()},t}(),ag=function(){function t(){this.vc=new $h(ug.Sc),this.Dc=new $h(ug.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new ug(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach(function(t){return n.nr(t,e)})},t.prototype.ir=function(t,e){this.Nc(new ug(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},t.prototype.Fc=function(t){var e=this,n=new Bc(new qc([])),r=new ug(n,t),i=new ug(n,t+1),o=[];return this.Dc.me([r,i],function(t){e.Nc(t),o.push(t.key)}),o},t.prototype.Oc=function(){var t=this;this.vc.forEach(function(e){return t.Nc(e)})},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new Bc(new qc([])),n=new ug(e,t),r=new ug(e,t+1),i=af();return this.Dc.me([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Fi=function(t){var e=new ug(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),ug=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return Bc.H(t.key,e.key)||Cc(t.Mc,e.Mc)},t.Cc=function(t,e){return Cc(t.Mc,e.Mc)||Bc.H(t.key,e.key)},t}(),cg=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new $h(ug.Sc)}return t.prototype.Ai=function(t){return nd.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++;var o=new Ud(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new ug(u.key,i)),this.Ei.qs(t,u.key.path.X())}return nd.resolve(o)},t.prototype.Pi=function(t,e){return nd.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=this.Uc(e+1),r=n<0?0:n;return nd.resolve(this.zo.length>r?this.zo[r]:null)},t.prototype.Vi=function(){return nd.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return nd.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new ug(e,0),i=new ug(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],function(t){var e=n.qc(t.Mc);o.push(e)}),nd.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new $h(Cc);return e.forEach(function(t){var e=new ug(t,0),i=new ug(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],function(t){r=r.add(t.Mc)})}),nd.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;Bc.wt(i)||(i=i.child(""));var o=new ug(new Bc(i),0),s=new $h(Cc);return this.Bc.Ae(function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)},o),nd.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.qc(t);null!==r&&n.push(r)}),n},t.prototype.Ci=function(t,e){var n=this;_c(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return nd.forEach(e.mutations,function(i){var o=new ug(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)}).next(function(){n.Bc=r})},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new ug(e,0),r=this.Bc.Re(n);return nd.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return nd.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),lg=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new Qh(Bc.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return nd.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=tf();return e.forEach(function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)}),nd.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=nf(),i=new Bc(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.value,u=a.hi,c=a.readTime;if(!e.path.nt(s.key.path))break;c._(n)<=0||u instanceof Ol&&oh(e,u)&&(r=r.zt(u.key,u))}return nd.resolve(r)},t.prototype.jc=function(t,e){return nd.forEach(this.docs,function(t){return e(t)})},t.prototype.Nr=function(t){return new hg(this)},t.prototype.Or=function(t){return nd.resolve(this.size)},t}(),hg=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Object(lc.c)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach(function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)}),nd.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(cp),fg=function(){function t(t){this.persistence=t,this.Gc=new up(function(t){return Tl(t)},xl),this.lastRemoteSnapshotVersion=Uc.min(),this.highestTargetId=0,this.zc=0,this.Hc=new ag,this.targetCount=0,this.Jc=vp.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach(function(t,n){return e(n)}),nd.resolve()},t.prototype.Qi=function(t){return nd.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return nd.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),nd.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),nd.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new vp(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,nd.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),nd.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,nd.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)}),nd.Mn(o).next(function(){return i})},t.prototype.Zi=function(t){return nd.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return nd.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),nd.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach(function(e){i.push(r.Ni(t,e))}),nd.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),nd.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return nd.resolve(n)},t.prototype.Fi=function(t,e){return nd.resolve(this.Hc.Fi(e))},t}(),dg=function(){function t(t,e){var n=this;this.Yc={},this.so=new Lc(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new fg(this),this.Ei=new ep,this.fo=function(t,e){return new lg(t,function(t){return n.Ti.Xc(t)})}(this.Ei),this.Qt=new qd(e),this.wo=new sg(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new cg(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;gc("MemoryPersistence","Starting transaction:",t);var i=new pg(this.so.next());return this.Ti.Zc(),n(i).next(function(t){return r.Ti.ta(i).next(function(){return t})}).On().then(function(t){return i.Vs(),t})},t.prototype.ea=function(t,e){return nd.Ln(Object.values(this.Yc).map(function(n){return function(){return n.Fi(t,e)}}))},t}(),pg=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Object(lc.c)(e,t),e}(gd),gg=function(){function t(t){this.persistence=t,this.na=new ag,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw bc()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),nd.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),nd.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),nd.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach(function(t){return n.ra.add(t.toString())});var r=this.persistence.Sr();return r.rr(t,e.targetId).next(function(t){t.forEach(function(t){return n.ra.add(t.toString())})}).next(function(){return r.Ji(t,e)})},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return nd.forEach(this.ra,function(r){var i=Bc._t(r);return e.oa(t,i).next(function(t){t||n.li(i)})}).next(function(){return e.sa=null,n.apply(t)})},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next(function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())})},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return nd.Ln([function(){return nd.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function yg(t,e){return"firestore_clients_"+t+"_"+e}function vg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function mg(t,e){return"firestore_targets_"+t+"_"+e}var bg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new jc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(yc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),_g=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new jc(i.error.code,i.error.message)),o?new t(e,i.state,r):(yc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),wg=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=cf(),s=0;i&&s<r.activeTargetIds.length;++s)i=il(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(yc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Og=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(yc("SharedClientState","Failed to parse online state: "+e),null)},t}(),Eg=function(){function t(){this.activeTargetIds=cf()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Cg=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new Qh(Cc),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=yg(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new Eg),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(lc.d)(this,function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(yg(this.persistenceKey,r)))&&(o=wg.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)this.wa(c[u]);return this.Ta=[],this.window.addEventListener("unload",function(){return l.ko()}),this.Er=!0,[2]}})})},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(mg(this.persistenceKey,t));if(n){var r=_g.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(mg(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach(function(t){r.$a(t)}),this.currentUser=t,n.forEach(function(t){r.Ca(t)})},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return gc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){gc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){gc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(gc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void yc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return Object(lc.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(lc.d)(this,function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=Lc.q;if(null!=t)try{var n=JSON.parse(t);_c("number"==typeof n),e=n}catch(t){yc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Lc.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new bg(this.currentUser,t,e,n),i=vg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=vg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){this.storage.setItem(this.ya,JSON.stringify({clientId:this.la,onlineState:t}))},t.prototype.qa=function(t,e,n){var r=mg(this.persistenceKey,t),i=new _g(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return wg.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]);return bg.ca(new Nc(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return _g.ca(r,e)},t.prototype.pa=function(t){return Og.ca(t)},t.prototype.Ya=function(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(gc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._a.su(s,a).then(function(){n.Ea=r})},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=cf();return t.forEach(function(t,n){e=e.Pe(n.activeTargetIds)}),e},t}(),Sg=function(){function t(){this.iu=new Eg,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new Eg,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),Ig=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),Tg=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){gc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){gc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),xg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},jg=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),Ag=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(lc.c)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise(function(i,o){var s=new cc;s.listenOnce(sc.COMPLETE,function(){try{switch(s.getLastErrorCode()){case oc.NO_ERROR:var e=s.getResponseJson();gc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case oc.TIMEOUT:gc("Connection",'RPC "'+t+'" timed out'),o(new jc(xc.DEADLINE_EXCEEDED,"Request time out"));break;case oc.HTTP_ERROR:var n=s.getStatus();if(gc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(xc).indexOf(e)>=0?e:xc.UNKNOWN}(r.status);o(new jc(a,r.message))}else o(new jc(xc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new jc(xc.UNAVAILABLE,"Connection failed."));break;default:bc()}}finally{gc("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new tc,i=ra(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),Object(ao.t)()||Object(ao.w)()||Object(ao.q)()||Object(ao.s)()||Object(ao.x)()||Object(ao.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");gc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new jg({fu:function(t){c?gc("Connection","Not sending because WebChannel is closed:",t):(u||(gc("Connection","Opening WebChannel transport."),a.open(),u=!0),gc("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,uc.EventType.OPEN,function(){c||gc("Connection","WebChannel transport opened.")}),h(a,uc.EventType.CLOSE,function(){c||(c=!0,gc("Connection","WebChannel transport closed"),l.Ru())}),h(a,uc.EventType.ERROR,function(t){c||(c=!0,vc("Connection","WebChannel transport errored:",t),l.Ru(new jc(xc.UNAVAILABLE,"The operation could not be completed")))}),h(a,uc.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];_c(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){gc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Vh[t];if(void 0!==e)return Wh(e)}(i),s=r.message;void 0===o&&(o=xc.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Ru(new jc(o,s)),a.close()}else gc("Connection","WebChannel received:",n),l.Pu(n)}}),h(i,ac.STAT_EVENT,function(t){10===t.stat?gc("Connection","Detected buffering proxy"):11===t.stat&&gc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Au()},0),l},e}(function(){function t(t){this.yu=t,this.t=t.t,this.gu=(t.ssl?"https":"http")+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);gc("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then(function(t){return gc("RestConnection","Received: ",t),t},function(e){throw vc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.0",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){return this.gu+"/v1/"+e+":"+xg[t]},t}());function Ng(){return"undefined"!=typeof window?window:null}function kg(){return"undefined"!=typeof document?document:null}function Pg(t){return new Cf(t,!0)}var Rg=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&gc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,function(){return e.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),Dg=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new Rg(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===xc.RESOURCE_EXHAUSTED?(yc(e.toString()),yc("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===xc.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}})})},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then(function(e){t.Wu===n&&t.ih(e)},function(n){e(function(){var e=new jc(xc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)})})},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){n(function(){return e.state=2,e.listener.wu()})}),this.stream.Tu(function(t){n(function(){return e.rh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return Object(lc.b)(t,void 0,void 0,function(){return Object(lc.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.rh=function(t){return gc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps(function(){return e.Wu===t?n():(gc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Mg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Object(lc.c)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:bc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(_c(void 0===e||"string"==typeof e),Tc.fromBase64String(e||"")):(_c(void 0===e||e instanceof Uint8Array),Tc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?xc.UNKNOWN:Wh(t.code);return new jc(e,t.message||"")}(a);n=new vf(r,i,o,s||null)}else if("documentChange"in e){i=kf(t,(r=e.documentChange).document.name),o=xf(r.document.updateTime);var a=new ml({mapValue:{fields:r.document.fields}}),u=(s=new Ol(i,o,a,{}),r.targetIds||[]);n=new gf(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=kf(t,(r=e.documentDelete).document),o=r.readTime?xf(r.readTime):Uc.min(),a=new El(i,o),n=new gf([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=kf(t,(r=e.documentRemove).document),n=new gf([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return bc();var c=e.filter;i=new Bh(r=c.count||0),n=new yf(o=c.targetId,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return Uc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Uc.min():e.readTime?xf(e.readTime):Uc.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=Df(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=jl(r)?{documents:qf(t,r)}:{query:Hf(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=If(t,e.resumeToken):e.Ot._(Uc.min())>0&&(n.readTime=Sf(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return bc()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=Df(this.Qt),e.removeTarget=t,this.th(e)},e}(Dg),Lg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Object(lc.c)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(_c(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(_c(void 0!==e),t.map(function(t){return function(t,e){var n=xf(t.updateTime?t.updateTime:e);return n.isEqual(Uc.min())&&(n=xf(e)),new Sh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=xf(t.commitTime);return this.listener.dh(n,e)}return _c(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Df(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Uf(e.Qt,t)})};this.th(n)},e}(Dg),Fg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Object(lc.c)(e,t),e.prototype.Ih=function(){if(this.Th)throw new jc(xc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.pu(t,e,n,i)}).catch(function(t){throw t.code===xc.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.Du(t,e,n,i)}).catch(function(t){throw t.code===xc.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.terminate=function(){this.Th=!1},e}(function(){}),Ug=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(yc(e),this.Rh=!1):gc("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),Vg=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(t){n.Ps(function(){return Object(lc.b)(o,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return Kg(this)?(gc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return(e=wc(t)).Nh.add(4),[4,Hg(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,qg(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Oh=new Ug(n,r)};function qg(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:if(!Kg(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Hg(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function zg(t,e){var n=wc(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),Yg(n)?Qg(n):ly(n).Hu()&&Gg(n,e))}function Bg(t,e){var n=wc(t),r=ly(n);n.xh.delete(e),r.Hu()&&Wg(n,e),0===n.xh.size&&(r.Hu()?r.Xu():Kg(n)&&n.Oh.set("Unknown"))}function Gg(t,e){t.kh.on(e.targetId),ly(t).uh(e)}function Wg(t,e){t.kh.on(e),ly(t).hh(e)}function Qg(t){t.kh=new bf({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),ly(t).start(),t.Oh.Ph()}function Yg(t){return Kg(t)&&!ly(t).zu()&&t.xh.size>0}function Kg(t){return 0===wc(t).Nh.size}function $g(t){t.kh=void 0}function Jg(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){return t.xh.forEach(function(e,n){Gg(t,e)}),[2]})})}function Xg(t,e){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(n){return $g(t),Yg(t)?(t.Oh.Vh(e),Qg(t)):t.Oh.set("Unknown"),[2]})})}function Zg(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o;return Object(lc.d)(this,function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof vf&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(lc.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.xh.has(o=i[r])?[4,t.Dh.Mh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),gc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ty(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof gf?t.kh.dn(e):e instanceof yf?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(Uc.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Yp(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach(function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}}),n.Fe.forEach(function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(Tc.T,n.Ot)),Wg(t,e);var r=new uh(n.target,e,1,n.sequenceNumber);Gg(t,r)}}),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return gc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,ty(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function ty(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r=this;return Object(lc.d)(this,function(i){switch(i.label){case 0:if(!ad(e))throw e;return t.Nh.add(1),[4,Hg(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return Yp(t.bh)}),t._s.po(function(){return Object(lc.b)(r,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return gc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,qg(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function ey(t,e){return e().catch(function(n){return ty(t,n,e)})}function ny(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(lc.d)(this,function(s){switch(s.label){case 0:e=wc(t),n=hy(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Kg(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Jp(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=hy(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,ty(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return ry(e)&&iy(e),[2]}})})}function ry(t){return Kg(t)&&!hy(t).zu()&&t.Ch.length>0}function iy(t){hy(t).start()}function oy(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){return hy(t).Eh(),[2]})})}function sy(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n,r;return Object(lc.d)(this,function(i){for(e=hy(t),n=0,r=t.Ch;n<r.length;n++)e.fh(r[n].mutations);return[2]})})}function ay(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=Vd.from(r,e,n),[4,ey(t,function(){return t.Dh.Bh(i)})];case 1:return o.sent(),[4,ny(t)];case 2:return o.sent(),[2]}})})}function uy(t,e){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(n){switch(n.label){case 0:return e&&hy(t)._h?[4,function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:return Gh(r=e.code)&&r!==xc.ABORTED?(n=t.Ch.shift(),hy(t).Yu(),[4,ey(t,function(){return t.Dh.qh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,ny(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ry(t)&&iy(t),[2]}})})}function cy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n;return Object(lc.d)(this,function(r){switch(r.label){case 0:return n=wc(t),e?(n.Nh.delete(2),[4,qg(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,Hg(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function ly(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=wc(t);return r.Ih(),new Mg(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Jg.bind(null,t),Tu:Xg.bind(null,t),ah:Zg.bind(null,t)}),t.$h.push(function(n){return Object(lc.b)(e,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),Yg(t)?Qg(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),$g(t),e.label=3;case 3:return[2]}})})})),t.Uh}function hy(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=wc(t);return r.Ih(),new Lg(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:oy.bind(null,t),Tu:uy.bind(null,t),wh:sy.bind(null,t),dh:ay.bind(null,t)}),t.$h.push(function(n){return Object(lc.b)(e,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,ny(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(gc("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}})})})),t.Qh}var fy=function(){this.Kh=void 0,this.listeners=[]},dy=function(){this.queries=new up(function(t){return rh(t)},nh),this.onlineState="Unknown",this.Wh=new Set};function py(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(lc.d)(this,function(c){switch(c.label){case 0:if(n=wc(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new fy),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=dd(a,"Initialization of query '"+ih(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&my(n),[2]}})})}function gy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(lc.d)(this,function(a){return n=wc(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]})})}function yy(t,e){for(var n=wc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&my(n)}function vy(t,e,n){var r=wc(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function my(t){t.Wh.forEach(function(t){t.next()})}var by=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ff(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){return!t.fromCache||!(this.options.nl&&"Offline"!==e||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){return t.docChanges.length>0||!!(t.Ce||this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=ff.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),_y=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),wy=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return kf(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?Ff(this.Qt,t.document,!1):new El(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return xf(t)},t}();!function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new wy(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||af()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return[4,ig(this.bh,new wy(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,og(this.bh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Vp(Object.assign({},this.progress),t))]}})})}}();var Oy=function(t){this.key=t},Ey=function(t){this.key=t},Cy=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=af(),this.De=af(),this.hl=sh(t),this.ll=new lf(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new hf,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=Yl(this.query)&&i.size===this.query.limit?i.last():null,c=Kl(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt(function(t,e){var l=i.get(t),h=e instanceof Ol?e:null;h&&(h=oh(n.query,h)?h:null);var f=!!l&&n.De.has(l.key),d=!!h&&(h.Vt||n.De.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.wl(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.hl(h,u)>0||c&&n.hl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Yl(this.query)||Kl(this.query))for(;s.size>this.query.limit;){var l=Yl(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bc()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)}),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new ff(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new hf,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach(function(t){return e.cl=e.cl.add(t)}),t.Ue.forEach(function(t){}),t.Qe.forEach(function(t){return e.cl=e.cl.delete(t)}),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=af(),this.ll.forEach(function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))});var n=[];return e.forEach(function(e){t.ul.has(e)||n.push(new Ey(e))}),this.ul.forEach(function(t){e.has(t)||n.push(new Oy(t))}),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=af();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return ff.Ne(this.query,this.ll,this.De,0===this.al)},t}(),Sy=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Iy=function(t){this.key=t,this.Pl=!1},Ty=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new up(function(t){return rh(t)},nh),this.Sl=new Map,this.Dl=new Set,this.Cl=new Qh(Bc.H),this.xl=new Map,this.Nl=new ag,this.$l={},this.Fl=new Map,this.Ol=vp.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function xy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:return n=rv(t),(i=n.vl.get(e))?(n.Vl.Fa(i.targetId),r=i.view.Rl(),[3,4]):[3,1];case 1:return[4,Xp(n.bh,th(e))];case 2:return o=a.sent(),s=n.Vl.Fa(o.targetId),[4,jy(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Ml&&zg(n.yl,o),a.label=4;case 4:return[2,r]}})})}function jy(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(lc.d)(this,function(l){switch(l.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,tg(t.bh,e.query,!1).then(function(t){return e.view.fl(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(Hy(t,e.targetId,s.Il),s.snapshot)]}})})}(t,e,n,r)},[4,tg(t.bh,e,!0)];case 1:return i=l.sent(),o=new Cy(e,i.Rc),s=o.fl(i.documents),a=pf.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),Hy(t,n,u.Il),c=new Sy(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}})})}function Ay(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return n=wc(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter(function(t){return!nh(t,e)})),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,Zp(n.bh,r.targetId,!1).then(function(){n.Vl.La(r.targetId),Bg(n.yl,r.targetId),Vy(n,r.targetId)}).catch(ap)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Vy(n,r.targetId),[4,Zp(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Ny(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:r=iv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=wc(t),i=Fc.now(),o=e.reduce(function(t,e){return t.add(e.key)},af());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Tc.Xo(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Nh(c,n.get(c.key));null!=l&&s.push(new Dh(c.key,l,_l(l.proto.mapValue),Ih.exists(!0)))}return r.zo.Ri(t,i,s,e)})}).then(function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}})}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new Qh(Cc)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,Gy(r,i.ri)];case 3:return a.sent(),[4,ny(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=dd(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function ky(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:n=wc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Kp(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach(function(t,e){var r=n.xl.get(e);r&&(_c(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?_c(r.Pl):t.Qe.size>0&&(_c(r.Pl),r.Pl=!1))}),[4,Gy(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ap(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Py(t,e,n){var r=wc(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach(function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=wc(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)}),r&&my(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function Ry(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(lc.d)(this,function(c){switch(c.label){case 0:return(r=wc(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new Qh(Bc.H)).zt(o,new El(o,Uc.min())),a=af().add(o),u=new df(Uc.min(),new Map,new $h(Cc),s,a),[4,ky(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),By(r),[3,4];case 2:return[4,Zp(r.bh,e,!1).then(function(){return Vy(r,e,n)}).catch(ap)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Dy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:n=wc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Qp(n.bh,e)];case 2:return i=o.sent(),Uy(n,r,null),Fy(n,r),n.Vl.Na(r,"acknowledged"),[4,Gy(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ap(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function My(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:r=wc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=wc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.zo.Pi(t,e).next(function(e){return _c(null!==e),r=e.keys(),n.zo.Ci(t,e)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}(r.bh,e)];case 2:return i=o.sent(),Uy(r,e,n),Fy(r,e),r.Vl.Na(e,"rejected",n),[4,Gy(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ap(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Ly(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:Kg((n=wc(t)).yl)||gc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=wc(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.zo.Vi(t)})}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=dd(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Fy(t,e){(t.Fl.get(e)||[]).forEach(function(t){t.resolve()}),t.Fl.delete(e)}function Uy(t,e,n){var r=wc(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function Vy(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach(function(e){t.Nl.Fi(e)||qy(t,e)})}function qy(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(Bg(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),By(t))}function Hy(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Oy?(t.Nl.nr(o.key,e),zy(t,o)):o instanceof Ey?(gc("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||qy(t,o.key)):bc()}}function zy(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(gc("SyncEngine","New document in limbo: "+n),t.Dl.add(r),By(t))}function By(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new Bc(qc.ot(e)),r=t.Ol.next();t.xl.set(r,new Iy(n)),t.Cl=t.Cl.zt(n,r),zg(t.yl,new uh(th(Ql(n.path)),r,2,Lc.q))}}function Gy(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:return r=wc(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach(function(t,a){s.push(r.Ll(a,e,n).then(function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Hp.oc(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(lc.d)(this,function(l){switch(l.label){case 0:n=wc(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return nd.forEach(e,function(e){return nd.forEach(e.ic,function(r){return n.persistence.Ti.nr(t,e.targetId,r)}).next(function(){return nd.forEach(e.rc,function(r){return n.persistence.Ti.ir(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!ad(r=l.sent()))throw r;return gc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.fc.get(a),c=u.Lt(u.Ot),n.fc=n.fc.zt(a,c));return[2]}})})}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Wy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:return(n=wc(t)).currentUser.isEqual(e)?[3,3]:(gc("SyncEngine","User change. New user:",e.A()),[4,Wp(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach(function(t){t.forEach(function(t){t.reject(new jc(xc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,Gy(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Qy(t,e){var n=wc(t),r=n.xl.get(e);if(r&&r.Pl)return af().add(r.key);var i=af(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.vl.get(a[s]);i=i.Pe(u.view._l)}return i}function Yy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return[4,tg((n=wc(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&Hy(n,e.targetId,i.Il),i)]}})})}function Ky(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){return[2,ng((e=wc(t)).bh).then(function(t){return Gy(e,t)})]})})}function $y(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o;return Object(lc.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=wc(t),r=wc(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.yi(t,e).next(function(e){return e?n.Tc.Xo(t,e):nd.resolve(null)})})}((i=wc(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,ny(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Uy(i,e,r||null),Fy(i,e),function(t,e){wc(wc(t).zo).xi(e)}(i.bh,e)):bc(),s.label=4;case 4:return[4,Gy(i,o)];case 5:return s.sent(),[3,7];case 6:gc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Jy(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(lc.d)(this,function(c){switch(c.label){case 0:return rv(n=wc(t)),iv(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,Xy(n,r.it())]);case 1:return i=c.sent(),n.kl=!0,[4,cy(n.yl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)zg(n.yl,s[o]);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(a=[],u=Promise.resolve(),n.Sl.forEach(function(t,e){n.Vl.Ma(e)?a.push(e):u=u.then(function(){return Vy(n,e),Zp(n.bh,e,!0)}),Bg(n.yl,e)}),[4,u]);case 4:return c.sent(),[4,Xy(n,a)];case 5:return c.sent(),function(t){var e=wc(t);e.xl.forEach(function(t,n){Bg(e.yl,n)}),e.Nl.Oc(),e.xl=new Map,e.Cl=new Qh(Bc.H)}(n),n.kl=!1,[4,cy(n.yl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Xy(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(lc.d)(this,function(g){switch(g.label){case 0:n=wc(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Sl.get(a=s[o]))&&0!==c.length?[4,Xp(n.bh,th(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.vl.get(h[l]),[4,Yy(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,eg(n.bh,a)];case 8:return p=g.sent(),[4,Xp(n.bh,p)];case 9:return u=g.sent(),[4,jy(n,Zy(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}})})}function Zy(t){return Wl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tv(t){var e=wc(t);return wc(wc(e.bh).persistence).Uo()}function ev(t,e,n,r){return Object(lc.b)(this,void 0,void 0,function(){var i,o,s;return Object(lc.d)(this,function(a){switch(a.label){case 0:return(i=wc(t)).kl?(gc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ng(i.bh)];case 3:return o=a.sent(),s=df.Me(e,"current"===n),[4,Gy(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Zp(i.bh,e,!0)];case 6:return a.sent(),Vy(i,e,r),[3,8];case 7:bc(),a.label=8;case 8:return[2]}})})}function nv(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(lc.d)(this,function(f){switch(f.label){case 0:if(!(r=rv(t)).kl)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Sl.has(s=o[i])?(gc("SyncEngine","Adding an already active target "+s),[3,5]):[4,eg(r.bh,s)]:[3,6];case 2:return a=f.sent(),[4,Xp(r.bh,a)];case 3:return u=f.sent(),[4,jy(r,Zy(a),u.targetId,!1)];case 4:f.sent(),zg(r.yl,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(lc.d)(this,function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,Zp(r.bh,t,!1).then(function(){Bg(r.yl,t),Vy(r,t)}).catch(ap)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function rv(t){var e=wc(t);return e.yl.Dh.Lh=ky.bind(null,e),e.yl.Dh.vn=Qy.bind(null,e),e.yl.Dh.Mh=Ry.bind(null,e),e.bl.ah=yy.bind(null,e.gl),e.bl.Bl=vy.bind(null,e.gl),e}function iv(t){var e=wc(t);return e.yl.Dh.Bh=Dy.bind(null,e),e.yl.Dh.qh=My.bind(null,e),e}var ov=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return this.Qt=Pg(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}})})},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Gp(this.persistence,new zp,t.Jl,this.Qt)},t.prototype.jl=function(t){return new dg(gg.ia,this.Qt)},t.prototype.Wl=function(t){return new Sg},t.prototype.terminate=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},t}(),sv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(lc.c)(e,t),e.prototype.initialize=function(e){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,rg(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,iv(this.Yl._a)];case 4:return n.sent(),[4,ny(this.Yl.yl)];case 5:return n.sent(),[2]}})})},e.prototype.Hl=function(t){return Gp(this.persistence,new zp,t.Jl,this.Qt)},e.prototype.zl=function(t){return new Cp(this.persistence.Ti.lr,t._s)},e.prototype.jl=function(t){var e=Up(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?sp.Ys(this.cacheSizeBytes):sp.ti;return new Mp(this.synchronizeTabs,e,t.clientId,n,t._s,Ng(),kg(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new Sg},e}(ov),av=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(lc.c)(e,t),e.prototype.initialize=function(e){return Object(lc.b)(this,void 0,void 0,function(){var n,r=this;return Object(lc.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof Cg?(this.Vl._a={eu:$y.bind(null,n),nu:ev.bind(null,n),su:nv.bind(null,n),Uo:tv.bind(null,n),tu:Ky.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro(function(t){return Object(lc.b)(r,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return[4,Jy(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Wl=function(t){var e=Ng();if(!Cg.Kn(e))throw new jc(xc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Up(t.yu.t,t.yu.persistenceKey);return new Cg(e,t._s,n,t.clientId,t.Jl)},e}(sv),uv=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n=this;return Object(lc.d)(this,function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return Py(n._a,t,1)},this.yl.Dh.n_=Wy.bind(null,this._a),[4,cy(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.t_=function(t){return new dy},t.prototype.Xl=function(t){var e=Pg(t.yu.t),n=new Ag(t.yu);return function(t,e,n){return new Fg(t,e,n)}(t.credentials,n,e)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return Py(s._a,t,0)},o=Tg.Kn()?new Tg:new Ig,new Vg(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Ty(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return e=wc(t),gc("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,Hg(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}})})}(this.yl)},t}(),cv=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),lv=(function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new ed,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Ql=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},t.prototype.c_=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new _y(JSON.parse(r),t.length+n)]}})})},t.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.a_=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.h_=function(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new jc(xc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new zc(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}()),hv=function(t){this._methodName=t},fv=function(t){this.d_=t};function dv(t,e,n){if(!n)throw new jc(xc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function pv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new jc(xc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function gv(t,e,n,r){if(!0===e&&!0===r)throw new jc(xc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function yv(t){if(!Bc.wt(t))throw new jc(xc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function vv(t){if(Bc.wt(t))throw new jc(xc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function mv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":bc()}function bv(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new jc(xc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=mv(t);throw new jc(xc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function _v(t,e){if(e<=0)throw new jc(xc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var wv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new jc(xc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new jc(xc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,gv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Ov=new Map,Ev=function(){function t(t,e){this.w_="(lite)",this.E_=new wv({}),this.T_=!1,t instanceof fc?(this.I_=t,this.m_=new Pc):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new jc(xc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fc(t.options.projectId)}(t),this.m_=new Rc(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new jc(xc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new jc(xc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new wv(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Pc;switch(t.type){case"gapi":var e=t.client;return _c(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Mc(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new jc(xc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=Ov.get(this))&&(gc("ComponentProvider","Removing Datastore"),Ov.delete(this),t.terminate()),Promise.resolve();var t},t}(),Cv=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Iv(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Sv=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Iv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ql(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(lc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new Cv(this.firestore,null,new Bc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Sv);function Tv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof fv&&(t=t.d_),dv("collection","path",e),t instanceof Ev)return vv(n=qc.ot.apply(qc,Object(lc.f)([e],r))),new Iv(t,null,n);if(!(t instanceof Cv||t instanceof Iv))throw new jc(xc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return vv(n=qc.ot.apply(qc,Object(lc.f)([t.path],r)).child(qc.ot(e))),new Iv(t.firestore,null,n)}function xv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof fv&&(t=t.d_),1===arguments.length&&(e=Ec.u()),dv("doc","path",e),t instanceof Ev)return yv(n=qc.ot.apply(qc,Object(lc.f)([e],r))),new Cv(t,null,new Bc(n));if(!(t instanceof Cv||t instanceof Iv))throw new jc(xc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return yv(n=t.D_.child(qc.ot.apply(qc,Object(lc.f)([e],r)))),new Cv(t.firestore,t instanceof Iv?t.v_:null,new Bc(n))}function jv(t,e){return t instanceof fv&&(t=t.d_),e instanceof fv&&(e=e.d_),(t instanceof Cv||t instanceof Iv)&&(e instanceof Cv||e instanceof Iv)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Av(t,e){return t instanceof fv&&(t=t.d_),e instanceof fv&&(e=e.d_),t instanceof Sv&&e instanceof Sv&&t.firestore===e.firestore&&nh(t.C_,e.C_)&&t.v_===e.v_}var Nv=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new jc(xc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new jc(xc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return Cc(this.x_,t.x_)||Cc(this.N_,t.N_)},t}(),kv=/^__.*__$/,Pv=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new Dh(t,this.data,this.Gt,e,this.fieldTransforms):new Rh(t,this.data,e,this.fieldTransforms)},t}(),Rv=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Dh(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function Dv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bc()}}var Mv=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return nm(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find(function(e){return t.nt(e)})||void 0!==this.fieldTransforms.find(function(e){return t.nt(e.field)})},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Dv(this.k_)&&kv.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Lv=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||Pg(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Mv({k_:t,methodName:e,j_:n,path:zc.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Fv(t){var e=t.p_(),n=Pg(t.I_);return new Lv(t.I_,!!e.ignoreUndefinedProperties,n)}function Uv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Xv("Data must be an object, but it was:",s,r);var a,u,c=$v(r,s);if(o.merge)a=new Yc(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Zv(e,f[h],n);if(!s.contains(d))throw new jc(xc.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");rm(l,d)||l.push(d)}a=new Yc(l),u=s.fieldTransforms.filter(function(t){return a.Tt(t.field)})}else a=null,u=s.fieldTransforms;return new Pv(new ml(c),a,u)}var Vv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(hv);function qv(t,e,n){return new Mv({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var Hv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.z_=function(t){return new Ch(t.path,new yh)},e.prototype.isEqual=function(t){return t instanceof e},e}(hv),zv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(lc.c)(e,t),e.prototype.z_=function(t){var e=qv(this,t,!0),n=this.H_.map(function(t){return Kv(t,e)}),r=new vh(n);return new Ch(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(hv),Bv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(lc.c)(e,t),e.prototype.z_=function(t){var e=qv(this,t,!0),n=this.H_.map(function(t){return Kv(t,e)}),r=new bh(n);return new Ch(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(hv),Gv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(lc.c)(e,t),e.prototype.z_=function(t){var e=new wh(t.Qt,hh(t.Qt,this.J_));return new Ch(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(hv);function Wv(t,e,n,r){var i=t.G_(1,e,n);Xv("Data must be an object, but it was:",i,r);var o=[],s=new bl;Wc(r,function(t,r){var a=em(e,t,n);r instanceof fv&&(r=r.d_);var u=i.U_(a);if(r instanceof Vv)o.push(a);else{var c=Kv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Yc(o);return new Rv(s.Pt(),a,i.fieldTransforms)}function Qv(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Zv(e,r,n)],u=[i];if(o.length%2!=0)throw new jc(xc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Zv(e,o[c])),u.push(o[c+1]);for(var l=[],h=new bl,f=a.length-1;f>=0;--f)if(!rm(l,a[f])){var d=a[f],p=u[f];p instanceof fv&&(p=p.d_);var g=s.U_(d);if(p instanceof Vv)l.push(d);else{var y=Kv(p,g);null!=y&&(l.push(d),h.set(d,y))}}var v=new Yc(l);return new Rv(h.Pt(),v,s.fieldTransforms)}function Yv(t,e,n,r){return void 0===r&&(r=!1),Kv(n,t.G_(r?4:3,e))}function Kv(t,e){if(t instanceof fv&&(t=t.d_),Jv(t))return Xv("Unsupported field value:",e,t),$v(t,e);if(t instanceof hv)return function(t,e){if(!Dv(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Kv(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof fv&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hh(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Fc.fromDate(t);return{timestampValue:Sf(e.Qt,n)}}if(t instanceof Fc)return n=new Fc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Sf(e.Qt,n)};if(t instanceof Nv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ac)return{bytesValue:If(e.Qt,t.I)};if(t instanceof Cv){var r=t.firestore.I_;if(!r.isEqual(n=e.t))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:jf(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+mv(t))}(t,e)}function $v(t,e){var n={};return Qc(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):Wc(t,function(t,r){var i=Kv(r,e.L_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Jv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Fc||t instanceof Nv||t instanceof Ac||t instanceof Cv||t instanceof hv)}function Xv(t,e,n){if(!Jv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=mv(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function Zv(t,e,n){if(e instanceof fv&&(e=e.d_),e instanceof lv)return e.f_;if("string"==typeof e)return em(t,e);throw nm("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var tm=new RegExp("[~\\*/\\[\\]]");function em(t,e,n){if(e.search(tm)>=0)throw nm("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(lv.bind.apply(lv,Object(lc.f)([void 0],e.split("."))))).f_}catch(r){throw nm("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function nm(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new jc(xc.INVALID_ARGUMENT,(a+=". ")+t+u)}function rm(t,e){return t.some(function(t){return t.isEqual(e)})}var im=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n=this;return Object(lc.d)(this,function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new jc(xc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(lc.d)(this,function(u){switch(u.label){case 0:return n=wc(t),r=Df(n.Qt)+"/documents",i={documents:e.map(function(t){return Nf(n.Qt,t)})},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){_c(!!e.found);var n=kf(t,e.found.name),r=xf(e.found.updateTime),i=new ml({mapValue:{fields:e.found.fields}});return new Ol(n,r,i,{})}(t,e):"missing"in e?function(t,e){_c(!!e.missing),_c(!!e.readTime);var n=kf(t,e.missing),r=xf(e.readTime);return new El(n,r)}(t,e):bc()}(n.Qt,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());_c(!!e),a.push(e)}),a)]}})})}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof El||t instanceof Ol?n.sf(t):bc()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Hh(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e=this;return Object(lc.d)(this,function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Bc._t(n);e.mutations.push(new zh(r,e.jt(r)))}),[4,function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return n=wc(t),r=Df(n.Qt)+"/documents",i={writes:e.map(function(t){return Uf(n.Qt,t)})},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}})})},t.prototype.sf=function(t){var e;if(t instanceof Ol)e=t.version;else{if(!(t instanceof El))throw bc();e=Uc.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new jc(xc.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Ih.updateTime(e):Ih.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Uc.min()))throw new jc(xc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ih.updateTime(e)}return Ih.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),om=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new Rg(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu(function(){return Object(lc.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(lc.d)(this,function(r){return t=new im(this.Sh),(e=this.uf(t))&&e.then(function(e){n._s.Ps(function(){return t.commit().then(function(){n.Es.resolve(e)}).catch(function(t){n.hf(t)})})}).catch(function(t){n.hf(t)}),[2]})})})},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!nl(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps(function(){return e.af(),Promise.resolve()})):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Gh(e)}return!1},t}(),sm=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Nc.UNAUTHENTICATED,this.clientId=Ec.u(),this._f=function(){},this.C=new ed,this.credentials.v(function(t){gc("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()})}return t.prototype.getConfiguration=function(){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then(function(){return e._f(e.user)})},t.prototype.df=function(){if(this._s.wf)throw new jc(xc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new ed;return this._s.Tf(function(){return Object(lc.b)(t,void 0,void 0,function(){var t,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=dd(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function am(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(lc.d)(this,function(o){switch(o.label){case 0:return t._s.Af(),gc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff(function(n){r.isEqual(n)||(r=n,t._s.po(function(){return Object(lc.b)(i,void 0,void 0,function(){return Object(lc.d)(this,function(t){switch(t.label){case 0:return[4,Wp(e.bh,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.Po(function(){return t.terminate()}),t.mf=e,[2]}})})}function um(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:return t._s.Af(),[4,cm(t)];case 1:return n=i.sent(),gc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff(function(n){return t._s.po(function(){return function(t,e){return Object(lc.b)(this,void 0,void 0,function(){var n,r;return Object(lc.d)(this,function(i){switch(i.label){case 0:return(n=wc(t))._s.Af(),gc("RemoteStore","RemoteStore received new credentials"),r=Kg(n),n.Nh.add(3),[4,Hg(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,qg(n)];case 3:return i.sent(),[2]}})})}(e.yl,n)})}),t.If=e,[2]}})})}function cm(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return t.mf?[3,2]:(gc("FirestoreClient","Using default OfflineComponentProvider"),[4,am(t,new ov)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}})})}function lm(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return t.If?[3,2]:(gc("FirestoreClient","Using default OnlineComponentProvider"),[4,um(t,new uv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}})})}function hm(t){return cm(t).then(function(t){return t.persistence})}function fm(t){return cm(t).then(function(t){return t.bh})}function dm(t){return lm(t).then(function(t){return t.yl})}function pm(t){return lm(t).then(function(t){return t._a})}function gm(t){return Object(lc.b)(this,void 0,void 0,function(){var e,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:return[4,lm(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=xy.bind(null,e._a),n.Hh=Ay.bind(null,e._a),n)]}})})}function ym(t,e,n){var r=this;void 0===n&&(n={});var i=new ed;return t._s.Ps(function(){return Object(lc.b)(r,void 0,void 0,function(){var r;return Object(lc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new cv({next:function(o){e.Ps(function(){return gy(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new jc(xc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new jc(xc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new by(Ql(n.path),o,{includeMetadataChanges:!0,nl:!0});return py(t,s)},[4,gm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}function vm(t,e,n){var r=this;void 0===n&&(n={});var i=new ed;return t._s.Ps(function(){return Object(lc.b)(r,void 0,void 0,function(){var r;return Object(lc.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new cv({next:function(n){e.Ps(function(){return gy(t,s)}),n.fromCache&&"server"===r.source?i.reject(new jc(xc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new by(n,o,{includeMetadataChanges:!0,nl:!0});return py(t,s)},[4,gm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}var mm=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new Rg(this,"async_queue_retry"),this.vf=function(){var e=kg();e&&gc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=kg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=kg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps(function(){return e.Pf.push(t),e.Cf()})},t.prototype.Cf=function(){return Object(lc.b)(this,void 0,void 0,function(){var t,e=this;return Object(lc.d)(this,function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!ad(t=n.sent()))throw t;return gc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu(function(){return e.Cf()}),n.label=5;case 5:return[2]}})})},t.prototype.Df=function(t){var e=this,n=this.Rf.then(function(){return e.pf=!0,t().catch(function(t){throw e.Vf=t,e.pf=!1,yc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.pf=!1,t})});return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=fd.Ts(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&bc()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(lc.b)(this,void 0,void 0,function(){var t;return Object(lc.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then(function(){e.gf.sort(function(t,e){return t.ds-e.ds});for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()})},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function bm(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this.kf={},this.Mf=new ed,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)}}();var _m=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new mm,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(lc.c)(e,t),e.prototype.b_=function(){return this.qf||Om(this),this.qf.terminate()},e}(Ev);function wm(t){return t.qf||Om(t),t.qf.df(),t.qf}function Om(t){var e=t.p_(),n=function(t,e,n){return new hc(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new sm(t.m_,t.Bf,n)}function Em(t,e,n){var r=this,i=new ed;return t._s.enqueue(function(){return Object(lc.b)(r,void 0,void 0,function(){var r;return Object(lc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,am(t,n)];case 1:return o.sent(),[4,um(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===xc.FAILED_PRECONDITION||t.code===xc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Cm(t){if(t.R_||t.P_)throw new jc(xc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Sm=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),ol(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Jc(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Xc(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw bc()}},t.prototype.Hf=function(t,e){var n=this,r={};return Wc(t.fields||{},function(t,i){r[t]=n.Uf(i,e)}),r},t.prototype.Gf=function(t){return new Nv(Jc(t.latitude),Jc(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Uf(t,e)})},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=tl(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(el(t));default:return null}},t.prototype.Qf=function(t){var e=$c(t);return new Fc(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=qc.ot(t);_c(td(n));var r=new fc(n.get(1),n.get(3)),i=new Bc(n.Y(5));return r.isEqual(e)||yc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Im=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Cv(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new Tm(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(xm("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),Tm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Im);function xm(t,e){return"string"==typeof e?em(t,e):e instanceof fv?e.d_.f_:e.f_}function jm(t){if(Kl(t)&&0===t.xt.length)throw new jc(xc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Am=function(){};function Nm(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var km=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Object(lc.c)(e,t),e.prototype.td=function(t){var e=Fv(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new jc(xc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Um(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Fm(r,t,l[c]));a={arrayValue:{values:u}}}else a=Fm(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Um(s,o),a=Yv(n,"where",s,"in"===o||"not-in"===o);var h=Al.create(i,o,a);return function(t,e){if(e.Ct()){var n=Jl(t);if(null!==n&&!n.isEqual(e.field))throw new jc(xc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=$l(t);null!==r&&Vm(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new jc(xc.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new Sv(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Gl(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Am),Pm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Object(lc.c)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new jc(xc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new jc(xc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ql(e,n);return function(t,e){if(null===$l(t)){var n=Jl(t);null!==n&&Vm(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new Sv(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new Gl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Am),Rm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Object(lc.c)(e,t),e.prototype.td=function(t){return new Sv(t.firestore,t.v_,eh(t.C_,this.od,this.ad))},e}(Am),Dm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(lc.c)(e,t),e.prototype.td=function(t){var e=Lm(t,this.type,this.ud,this.hd);return new Sv(t.firestore,t.v_,function(t,e){return new Gl(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Am),Mm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(lc.c)(e,t),e.prototype.td=function(t){var e=Lm(t,this.type,this.ud,this.hd);return new Sv(t.firestore,t.v_,function(t,e){return new Gl(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Am);function Lm(t,e,n,r){if(n[0]instanceof fv&&(n[0]=n[0].d_),n[0]instanceof Im)return function(t,e,n,r,i){if(!r)throw new jc(xc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Zl(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(fl(e,r.key));else{var c=r.field(u.field);if(Zc(c))throw new jc(xc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.rt();throw new jc(xc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ul(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Fv(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new jc(xc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new jc(xc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Xl(t)&&-1!==c.indexOf("/"))throw new jc(xc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(qc.ot(c));if(!Bc.wt(l))throw new jc(xc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Bc(l);a.push(fl(e,h))}else{var f=Yv(n,r,c);a.push(f)}}return new Ul(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Fm(t,e,n){if(n instanceof fv&&(n=n.d_),"string"==typeof n){if(""===n)throw new jc(xc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xl(e)&&-1!==n.indexOf("/"))throw new jc(xc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(qc.ot(n));if(!Bc.wt(r))throw new jc(xc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return fl(t,new Bc(r))}if(n instanceof Cv)return fl(t,n.S_);throw new jc(xc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+mv(n)+".")}function Um(t,e){if(!Array.isArray(t)||0===t.length)throw new jc(xc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new jc(xc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Vm(t,e,n){if(!n.isEqual(e))throw new jc(xc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function qm(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Hm=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(lc.c)(e,t),e.prototype.Wf=function(t){return new Ac(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Cv(this.firestore,null,e)},e}(Sm),zm=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Bm=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Object(lc.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new Gm(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(xm("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(Im),Gm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Bm),Wm=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new zm(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach(function(r){t.call(e,new Gm(n.Yf,n.Xf,r.key,r,new zm(n._d.De.has(r.key),n._d.fromCache),n.query.v_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new jc(xc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map(function(e){return{type:"added",doc:new Gm(t.Yf,t.Xf,e.doc.key,e.doc,new zm(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}})}var r=t._d.Se;return t._d.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Gm(t.Yf,t.Xf,e.doc.key,e.doc,new zm(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Qm(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.dd=e),this.fd},t}();function Qm(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bc()}}function Ym(t,e){return t instanceof Bm&&e instanceof Bm?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof Wm&&e instanceof Wm&&t.Yf===e.Yf&&Av(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var Km=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(lc.c)(e,t),e.prototype.Wf=function(t){return new Ac(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Cv(this.firestore,null,e)},e}(Sm);function $m(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=bv(t,Cv);var o=bv(t.firestore,_m),s=Fv(o);return e instanceof fv&&(e=e.d_),Xm(o,[("string"==typeof e||e instanceof lv?Qv(s,"updateDoc",t.S_,e,n,r):Wv(s,"updateDoc",t.S_,e)).F_(t.S_,Ih.exists(!0))])}function Jm(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof fv&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||bm(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(bm(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Cv)c=bv(t.firestore,_m),l=Ql(t.S_.path),u={next:function(e){i[a]&&i[a](Zm(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=bv(t,Sv);c=bv(d.firestore,_m),l=d.C_;var p=new Km(c);u={next:function(t){i[a]&&i[a](new Wm(c,p,d,t))},error:i[a+1],complete:i[a+2]},jm(t.C_)}return function(t,e,n,r){var i=this,o=new cv(r),s=new by(e,o,n);return t._s.Ps(function(){return Object(lc.b)(i,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return e=py,[4,gm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.i_(),t._s.Ps(function(){return Object(lc.b)(i,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return e=gy,[4,gm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(wm(c),l,h,u)}function Xm(t,e){return function(t,e){var n=this,r=new ed;return t._s.Ps(function(){return Object(lc.b)(n,void 0,void 0,function(){var n;return Object(lc.d)(this,function(i){switch(i.label){case 0:return n=Ny,[4,pm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(wm(t),e)}function Zm(t,e,n){var r=n.docs.get(e.S_),i=new Km(t);return new Bm(t,i,e.S_,r,new zm(n.hasPendingWrites,n.fromCache),e.v_)}var tb=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Fv(t)}return t.prototype.set=function(t,e,n){this.md();var r=eb(t,this.Yf),i=qm(r.v_,e,n),o=Uv(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,Ih.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=eb(t,this.Yf);return e instanceof fv&&(e=e.d_),o="string"==typeof e||e instanceof lv?Qv(this.Id,"WriteBatch.update",s.S_,e,n,r):Wv(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,Ih.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=eb(t,this.Yf);return this.Ed=this.Ed.concat(new Hh(e.S_,Ih.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new jc(xc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function eb(t,e){if(t instanceof fv&&(t=t.d_),t.firestore!==e)throw new jc(xc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var nb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Object(lc.c)(e,t),e.prototype.get=function(e){var n=this,r=eb(e,this.Yf),i=new Km(this.Yf);return t.prototype.get.call(this,e).then(function(t){return new Bm(n.Yf,i,r.S_,t.Zf,new zm(!1,!1),r.v_)})},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Fv(t)}return t.prototype.get=function(t){var e=this,n=eb(t,this.Yf),r=new Hm(this.Yf);return this.Ad.ef([n.S_]).then(function(t){if(!t||1!==t.length)return bc();var i=t[0];if(i instanceof El)return new Im(e.Yf,r,n.S_,null,n.v_);if(i instanceof Ol)return new Im(e.Yf,r,i.key,i,n.v_);throw bc()})},t.prototype.set=function(t,e,n){var r=eb(t,this.Yf),i=qm(r.v_,e,n),o=Uv(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=eb(t,this.Yf);return e instanceof fv&&(e=e.d_),o="string"==typeof e||e instanceof lv?Qv(this.Id,"Transaction.update",s.S_,e,n,r):Wv(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=eb(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function rb(){if("undefined"==typeof Uint8Array)throw new jc(xc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ib(){if("undefined"==typeof atob)throw new jc(xc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ob=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.fromBase64String=function(t){return ib(),new e(Ac.fromBase64String(t))},e.fromUint8Array=function(t){return rb(),new e(Ac.fromUint8Array(t))},e.prototype.toBase64=function(){return ib(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return rb(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(fv),sb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Cm(t=bv(t,_m));var n=wm(t),r=t.p_(),i=new uv;return Em(n,i,new sv(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Cm(t=bv(t,_m));var e=wm(t),n=t.p_(),r=new uv;return Em(e,r,new av(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new jc(xc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ed;return t.Bf.Tf(function(){return Object(lc.b)(e,void 0,void 0,function(){var e;return Object(lc.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(lc.b)(this,void 0,void 0,function(){return Object(lc.d)(this,function(e){switch(e.label){case 0:return id.Kn()?[4,id.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Up(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.d_)},t}(),ab=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof fc||(i.Pd=e),i}return Object(lc.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=bv(t,Ev)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&vc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(lc.b)(e,void 0,void 0,function(){var e,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:return[4,hm(t)];case 1:return e=r.sent(),[4,dm(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=wc(t);return e.Nh.delete(0),qg(e)}(n))]}})})})}(wm(bv(this.d_,_m)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(lc.b)(e,void 0,void 0,function(){var e,n;return Object(lc.d)(this,function(r){switch(r.label){case 0:return[4,hm(t)];case 1:return e=r.sent(),[4,dm(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Object(lc.b)(this,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return(e=wc(t)).Nh.add(0),[4,Hg(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}})})}(n))]}})})})}(wm(bv(this.d_,_m)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&gv("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ed;return t._s.Ps(function(){return Object(lc.b)(e,void 0,void 0,function(){var e;return Object(lc.d)(this,function(r){switch(r.label){case 0:return e=Ly,[4,pm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(wm(bv(this.d_,_m)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new cv(e);return t._s.Ps(function(){return Object(lc.b)(n,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){wc(t).Wh.add(e),e.next()},[4,gm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.i_(),t._s.Ps(function(){return Object(lc.b)(n,void 0,void 0,function(){var e;return Object(lc.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){wc(t).Wh.delete(e)},[4,gm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(wm(t=bv(t,_m)),bm(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new jc(xc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new wb(this,Tv(this.d_,t))}catch(t){throw db(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new fb(this,xv(this.d_,t))}catch(t){throw db(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new mb(this,function(t,e){if(t=bv(t,Ev),dv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new jc(xc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Sv(t,null,function(t){return new Gl(qc.ct(),t)}(e))}(this.d_,t))}catch(t){throw db(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ed;return t._s.Ps(function(){return Object(lc.b)(n,void 0,void 0,function(){var n;return Object(lc.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return lm(t).then(function(t){return t.Sh})}(t)];case 1:return n=i.sent(),new om(t._s,n,e,r).run(),[2]}})})}),r.promise}(wm(t),function(n){return e(new nb(t,n))})}(this.d_,function(n){return t(new cb(e,n))})},e.prototype.batch=function(){var t=this;return wm(this.d_),new lb(new tb(this.d_,function(e){return Xm(t.d_,e)}))},e.prototype.loadBundle=function(t){throw new jc(xc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new jc(xc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(fv),ub=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(lc.c)(e,t),e.prototype.Wf=function(t){return new ob(new Ac(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return fb.yd(e,this.firestore,null)},e}(Sm),cb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new ub(e),r}return Object(lc.c)(e,t),e.prototype.get=function(t){var e=this,n=Ob(t);return this.d_.get(n).then(function(t){return new yb(e.Yf,new Bm(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))})},e.prototype.set=function(t,e,n){var r=Ob(t);return n?(pv("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ob(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(lc.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Ob(t);return this.d_.delete(e),this},e}(fv),lb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.set=function(t,e,n){var r=Ob(t);return n?(pv("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Ob(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(lc.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Ob(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(fv),hb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Object(lc.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Gm(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new vb(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new ub(t),n),i.set(n,o)),o},e}(fv);hb.Vd=new WeakMap;var fb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new ub(e),r}return Object(lc.c)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new jc(xc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new Cv(n.d_,r,new Bc(t)))},e.yd=function(t,n,r){return new e(n,new Cv(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new wb(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new wb(this.firestore,Tv(this.d_,t))}catch(t){throw db(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof fv&&(t=t.d_),t instanceof Cv&&jv(this.d_,t)},e.prototype.set=function(t,e){e=pv("DocumentReference.set",e);try{return function(t,e,n){t=bv(t,Cv);var r=bv(t.firestore,_m),i=qm(t.v_,e,n);return Xm(r,[Uv(Fv(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Ih.Kt())])}(this.d_,t,e)}catch(t){throw db(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?$m(this.d_,t):$m.apply(void 0,Object(lc.f)([this.d_,t,e],n))}catch(t){throw db(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Xm(bv((t=this.d_).firestore,_m),[new Hh(t.S_,Ih.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=pb(e),i=gb(e,function(e){return new yb(t.firestore,new Bm(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))});return Jm(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=bv(t,Cv);var e=bv(t.firestore,_m),n=wm(e),r=new Km(e);return function(t,e){var n=this,r=new ed;return t._s.Ps(function(){return Object(lc.b)(n,void 0,void 0,function(){var n;return Object(lc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i;return Object(lc.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=wc(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Tc.Ho(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Ol?n.resolve(i):i instanceof El?n.resolve(null):n.reject(new jc(xc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=dd(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,fm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.S_).then(function(n){return new Bm(e,r,t.S_,n,new zm(n instanceof Ol&&n.Vt,!0),t.v_)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=bv(t,Cv);var e=bv(t.firestore,_m);return ym(wm(e),t.S_,{source:"server"}).then(function(n){return Zm(e,t,n)})}(this.d_):function(t){t=bv(t,Cv);var e=bv(t.firestore,_m);return ym(wm(e),t.S_).then(function(n){return Zm(e,t,n)})}(this.d_)).then(function(t){return new yb(e.firestore,new Bm(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(t?hb.gd(this.firestore,t):null))},e}(fv);function db(t,e,n){return t.message=t.message.replace(e,n),t}function pb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!bm(r))return r}return{}}function gb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=bm(t[0])?t[0]:bm(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var yb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(lc.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new fb(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return Ym(this.d_,t.d_)},e}(fv),vb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(yb),mb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new ub(e),r}return Object(lc.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Nm(this.d_,function(t,e,n){var r=e,i=xm("where",t);return new km(i,r,n)}(t,n,r)))}catch(t){throw db(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Nm(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=xm("orderBy",t);return new Pm(r,n)}(t,n)))}catch(t){throw db(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Nm(this.d_,function(t){return _v("limit",t),new Rm("limit",t,"F")}(t)))}catch(t){throw db(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Nm(this.d_,function(t){return _v("limitToLast",t),new Rm("limitToLast",t,"L")}(t)))}catch(t){throw db(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Nm(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dm("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw db(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Nm(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dm("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw db(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Nm(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mm("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw db(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Nm(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mm("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw db(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Av(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=bv(t,Sv);var e=bv(t.firestore,_m),n=wm(e),r=new Km(e);return function(t,e){var n=this,r=new ed;return t._s.Ps(function(){return Object(lc.b)(n,void 0,void 0,function(){var n;return Object(lc.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(lc.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(lc.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,tg(t,e,!0)];case 1:return a=u.sent(),r=new Cy(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=dd(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,fm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.C_).then(function(n){return new Wm(e,r,t,n)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=bv(t,Sv);var e=bv(t.firestore,_m),n=wm(e),r=new Km(e);return vm(n,t.C_,{source:"server"}).then(function(n){return new Wm(e,r,t,n)})}(this.d_):function(t){t=bv(t,Sv);var e=bv(t.firestore,_m),n=wm(e),r=new Km(e);return jm(t.C_),vm(n,t.C_).then(function(n){return new Wm(e,r,t,n)})}(this.d_)).then(function(t){return new _b(e.firestore,new Wm(e.firestore.d_,e.Xf,e.d_,t._d))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=pb(e),i=gb(e,function(e){return new _b(t.firestore,new Wm(t.firestore.d_,t.Xf,t.d_,e._d))});return Jm(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(t?hb.gd(this.firestore,t):null))},e}(fv),bb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(lc.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new vb(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(fv),_b=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(lc.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new mb(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map(function(e){return new vb(t.Yf,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map(function(t){return new bb(e.Yf,t)})},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach(function(r){t.call(e,new vb(n.Yf,r))})},e.prototype.isEqual=function(t){return Ym(this.d_,t.d_)},e}(fv),wb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Object(lc.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new fb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new fb(this.firestore,void 0===t?xv(this.d_):xv(this.d_,t))}catch(t){throw db(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=bv(t.firestore,_m),r=xv(t),i=qm(t.v_,e);return Xm(n,[Uv(Fv(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Ih.exists(!1))]).then(function(){return r})}(this.d_,t).then(function(t){return new fb(e.firestore,t)})},e.prototype.isEqual=function(t){return jv(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(t?hb.gd(this.firestore,t):null))},e}(mb);function Ob(t){return t instanceof fv&&(t=t.d_),bv(t,Cv)}var Eb,Cb=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(lv.bind.apply(lv,Object(lc.f)([void 0],e))))||this}return Object(lc.c)(e,t),e.documentId=function(){return new e(zc.ht().rt())},e.prototype.isEqual=function(t){return t instanceof fv&&(t=t.d_),t instanceof lv&&this.d_.f_.isEqual(t.f_)},e}(fv),Sb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(lc.c)(e,t),e.serverTimestamp=function(){var t=new Hv("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Vv("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zv("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bv("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Gv("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(fv),Ib=n("/6Yf"),Tb={Firestore:ab,GeoPoint:Nv,Timestamp:Fc,Blob:ob,Transaction:cb,WriteBatch:lb,DocumentReference:fb,DocumentSnapshot:yb,Query:mb,QueryDocumentSnapshot:vb,QuerySnapshot:_b,CollectionReference:wb,FieldPath:Cb,FieldValue:Sb,setLogLevel:function(t){dc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function xb(t,e){return function(t,e=li.a){return new Et.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function jb(t,e){return xb(t,e).pipe(Object(Rt.a)(t=>({payload:t,type:"query"})))}function Ab(t,e){return jb(t,e).pipe(zt(void 0),no(),Object(Rt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Nb(t,e,n){return Ab(t,n).pipe(Bt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return kb(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return kb(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kb(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),di(),Object(Rt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function kb(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Pb(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new Ib.a("firestore",function(t){return function(t,e){return new ab(t,new _m(t,e),new sb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Tb)))})(Eb=oo.a),Eb.registerVersion("@firebase/firestore","2.2.0");class Rb{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Ab(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Rt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(zt(void 0),no(),Qt(([t,e])=>e.length>0||!t),Object(Rt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Bt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Pb(t);return Nb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return jb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Rt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ft.a)(this.query.get(t)).pipe(Object(wi.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Db(this.ref.doc(t),this.afs)}}class Db{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=qb(n,e);return new Rb(r,i,this.afs)}snapshotChanges(){return xb(this.ref,this.afs.schedulers.outsideAngular).pipe(zt(void 0),no(),Object(Rt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Rt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(ft.a)(this.ref.get(t)).pipe(Object(wi.b)(this.afs.schedulers.insideAngular))}}class Mb{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Ab(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Rt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Qt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Ab(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Bt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Pb(t);return Nb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return jb(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Rt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ft.a)(this.query.get(t)).pipe(Object(wi.b)(this.afs.schedulers.insideAngular))}}const Lb=new r.q("angularfire2.enableFirestorePersistence"),Fb=new r.q("angularfire2.firestore.persistenceSettings"),Ub=new r.q("angularfire2.firestore.settings"),Vb=new r.q("angularfire2.firestore.use-emulator");function qb(t,e=(t=>t)){return{query:e(t),ref:t}}let Hb=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new _i.d(o),this.keepUnstableUntilFirst=Object(_i.h)(this.schedulers);const c=Object(_i.g)(t,o,e);!Mi.a.auth&&u&&Object(_i.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(_i.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!P(i)){const e=()=>{try{return Object(ft.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Eb){return"undefined"!=typeof console&&console.warn(Eb),Object(dt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(dt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=qb(n,e),o=this.schedulers.ngZone.run(()=>r);return new Rb(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Mb(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Db(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(_i.c),r.Jb(_i.b,8),r.Jb(Lb,8),r.Jb(Ub,8),r.Jb(r.B),r.Jb(r.z),r.Jb(Fb,8),r.Jb(Vb,8),r.Jb(ji,8))},t.\u0275prov=Object(r.Ab)({factory:function(){return new t(Object(r.Jb)(_i.c),Object(r.Jb)(_i.b,8),Object(r.Jb)(Lb,8),Object(r.Jb)(Ub,8),Object(r.Jb)(r.B),Object(r.Jb)(r.z),Object(r.Jb)(Fb,8),Object(r.Jb)(Vb,8),Object(r.Jb)(ji,8))},token:t,providedIn:"any"}),t})(),zb=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Lb,useValue:!0},{provide:Fb,useValue:e}]}}}return t.\u0275mod=r.Cb({type:t}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[Hb]}),t})(),Bb=(()=>{class t{}return t.\u0275mod=r.Cb({type:t,bootstrap:[eo]}),t.\u0275inj=r.Bb({factory:function(e){return new(e||t)},providers:[],imports:[[ht,ci,_i.a.initializeApp(i,"deivamanikailasam"),Xi,zb]]}),t})();Object(r.S)(),ct().bootstrapModule(Bb).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);